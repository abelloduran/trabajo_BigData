[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Juan Antonio Abello",
    "section": "",
    "text": "Hola, soy Juan Antonio Abello\nEsta web sirve para presentar el trabajo final individual para la asignatura “Programación y manejo de datos en la era Del Big Data”, optativa de GECO en la Facultad de Economía de la Universitat de València.\nLa web de la asignatura está aquí y los trabajos de mis compañeros de curso puedes verlos aquí.\nMi trabajo lleva por título : “Agregados Macroeconómicos en España”. El objetivo es elaborar un análisis detallado de los agregados macroeconómicos clave para la economía española y sus regiones. En concreto, de variables cruciales como la producción, la tasa de desempleo y la inflación.\nEl trabajo puede verse aquí."
  },
  {
    "objectID": "my_trabajo_BigData.html",
    "href": "my_trabajo_BigData.html",
    "title": "Perspectivas Macro: Análisis de Agregados Económicos en España",
    "section": "",
    "text": "Bienvenido al análisis detallado de los agregados macroeconómicos clave para la economía española y sus regiones. Este trabajo, elaborado por Juan Antonio Abello Durán de la Universitat de València, se sumerge en variables cruciales como la producción, la tasa de desempleo y la inflación.\n\nEl objetivo principal de este estudio es proporcionar una visión integral de la evolución económica de España, centrándose en aspectos fundamentales como el Producto Interno Bruto (PIB), la tasa de desempleo y la inflación. Utilizando herramientas de programación en R y la versatilidad de Quarto para la creación de documentos dinámicos, exploraremos los datos disponibles y ofreceremos una perspectiva única sobre el desarrollo económico a lo largo del tiempo. Asimismo, uno de los aspectos más interesantes de este trabajo fue la limpieza de datos realizada para homogeneizar las distintas bases de datos utilizadas.\n\nLos datos utilizados en este análisis han sido sacados de conocidas bases de datos macroeconómicos para la economía española y sus regiones. En concreto, se utlizaron las siguientes bases:\n\nFEDEA: Se utilizaron las Series largas de algunos agregados económicos y demográficos regionales que contiene información de diversas varibles desde 1955 hasta 2021. Su autor, Ángel de la Fuente, un economista con un doctorado en Ciencias Económicas por la Universidad de Pennsylvania. Ha trabajado como profesor asociado, consultor para organismos internacionales y es actualmente el Director Ejecutivo de la Fundación de Estudios de Economía Aplicada (FEDEA) desde 2014. Además, ha recibido premios por su destacada labor, incluyendo el accésit al I Premio de la Fundación Banco Herrero en 2002.\nBdeMores: Una base de datos anuales de magnitudes macroeconómicas regionales de la economía española, compatible con las bases nacionales BDREMS. Iniciada en 1998, respalda los modelos macroeconómicos REMS y EREMS utilizados por la Dirección General de Presupuestos del Ministerio de Hacienda y Función Pública. Las magnitudes están clasificadas por región y rama de actividad, valoradas a precios corrientes y/o constantes de 2015, siguiendo los criterios del SEC2010. En la actualización de mayo de 2023, se incluyen revisiones relacionadas con la reclasificación temporal de la SAREB en el Sector de las Administraciones Públicas, conforme al acuerdo entre Eurostat y las autoridades estadísticas españolas.\nAMECO: La base de datos macroeconómica anual de la Dirección General de Asuntos Económicos y Financieros de la Comisión Europea. Utilizada para análisis e informes, incluye datos de la UE, la zona euro, Estados miembros, países candidatos y otros de la OCDE, abarcando más de 40 países. Organizada en dieciocho capítulos, abarca desde población y empleo hasta principales agregados de cuentas nacionales, sectores y ajuste cíclico de variables financieras públicas. A partir de 2002, los países de la zona euro publican series nacionales en euros, convirtiendo datos en moneda nacional antes de 2002 utilizando el tipo de cambio fijo al euro. A pesar del cambio de denominación a euros, las comparaciones y agregaciones deben basarse en series históricas establecidas en ECU hasta 1998 y su continuación estadística en EUR desde 1999 en adelante. En el presente trabajo, se utilizó AMECO para obtener datos sobre el PIB potencial y la tasa de desempleo estructural (NAIRU) a la hora de realizar los análisis.\n\nPara realizar este análisis, hemos empleado una variedad de paquetes de R, desde tidyverse para manipulación de datos hasta ggplot2 y plotly para la creación de gráficos interactivos. Además, hemos utilizado Quarto, una herramienta potente para la generación de documentos enriquecidos, que nos permite combinar texto, código y visualizaciones de manera efectiva. Las librerías utilizadas son las siguientes:\n\nCódigo#- 0) Librerías utilizadas -------------------------------------------------------\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(kableExtra)\nlibrary(ggplot2)\nlibrary(ggthemes)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(openxlsx)\nlibrary(countrycode)\nlibrary(ggimage)\nlibrary(gganimate)\nlibrary(lubridate)\nlibrary(sf)\nlibrary(mapSpain)\nlibrary(DT)\nlibrary(gt)\nlibrary(patchwork)\nlibrary(ggplot2)\nlibrary(ggtext)\nlibrary(vembedr)\n\n\n\nLa estructura del trabajo se divide en un análisis del Producto Interior Bruto (PIB), posteriormente se realiza un análisis de las Tasas de Desempleo, la evolución de la inflación y por último, se concluye con la representación gráfica de un par de Curvas de Phillips. A continuación, presentamos algunas de las visualizaciones clave obtenidas a partir del análisis de los datos macroeconómicos de España.\n\nEl Producto Interno Bruto (PIB) constituye un indicador fundamental que refleja la salud y la dinámica económica de un país. En este segmento de nuestro estudio, exploraremos detalladamente la evolución del PIB en el contexto de la economía española. Este análisis permitirá arrojar luz sobre las tendencias históricas, identificar patrones significativos y, en última instancia, comprender mejor los factores que impulsan el crecimiento económico.\n\nEl PIB real representa el valor total de los bienes y servicios producidos por una economía, ajustado a la inflación. Por otro lado, el PIB potencial denota la capacidad máxima de producción de la economía en un periodo sin generar presiones inflacionarias. Analizando la evolución de ambos, identificamos no solo las variaciones a lo largo de las décadas, sino también las discrepancias entre el rendimiento económico real y su capacidad subyacente. A través de herramientas de visualización, examinamos gráficamente esta evolución para obtener una comprensión sobre el crecimiento económico y las fluctuaciones cíclicas que han marcado su desarrollo.\n\n\nGráfico animado\nGráfico sin animar\nCódigo\n\n\n\n\nCódigo# Importar y arreglar los datos\nruta &lt;- \"./datos/spain.xlsx\"\ndf &lt;- rio::import(ruta) \ndf &lt;- df %&gt;%\n  slice(-1) %&gt;%\n  select(-c(24, 25, 26)) %&gt;%\n  mutate_at(vars(4:ncol(.)), as.numeric)\n\n#### PIB\n\n### Evolución del PIB y del PIB potencial \n\ndf1 &lt;- df %&gt;% \n  select(comunidad, periodo, PIB_real_2015, pib_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(PIB_real_2015 = round(PIB_real_2015, 3),\n         pib_potencial = round(pib_potencial, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Gráfico de la evolución del PIB real y potencial\n\np1 &lt;- ggplot(df1, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1) +\n  geom_point(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1) +\n  labs(title = \"Evolución del PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\", caption = \"Fuente: AMECO\") +\n  scale_color_manual(values = c(\"PIB Real\" = \"blue\", \"PIB Potencial\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\n# Crea la animación\np_animated &lt;- p1 +\n  transition_reveal(periodo) +\n  enter_fade() + \n  exit_fade()\n\n# Visualiza la animación\nanimate(p_animated, nframes = 200, fps = 20, end_pause = 0)\n\n\n\n\n\n\n\n\n\n\nCódigop1\n\n\n\n\n\n\n\n\n\n\nCódigo# Importar y arreglar los datos\nruta &lt;- \"./datos/spain.xlsx\"\ndf &lt;- rio::import(ruta) \ndf &lt;- df %&gt;%\n  slice(-1) %&gt;%\n  select(-c(24, 25, 26)) %&gt;%\n  mutate_at(vars(4:ncol(.)), as.numeric)\n\n#### PIB\n\n### Evolución del PIB y del PIB potencial \n\ndf1 &lt;- df %&gt;% \n  select(comunidad, periodo, PIB_real_2015, pib_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(PIB_real_2015 = round(PIB_real_2015, 3),\n         pib_potencial = round(pib_potencial, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Gráfico de la evolución del PIB real y potencial\n\np1 &lt;- ggplot(df1, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1) +\n  geom_point(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1) +\n  labs(title = \"Evolución del PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\", caption = \"Fuente: AMECO\") +\n  scale_color_manual(values = c(\"PIB Real\" = \"blue\", \"PIB Potencial\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\n\n\n\n\n\nEn complemento al análisis detallado de la evolución del PIB real y el PIB potencial (1.1), exploraremos el diferencial porcentual entre ambos indicadores en esta sección. Este enfoque proporcionará un apoyo visual a la comprensión de las variaciones entre el rendimiento económico real y su capacidad potencial.\nEste análisis específico nos permitirá identificar periodos de sobre o subutilización de la capacidad económica, proporcionando así una perspectiva más completa sobre la eficiencia y resiliencia de la economía en diversas coyunturas.\nCuando la diferencia entre el PIB real y el PIB potencial es positiva, indica que la economía está operando por encima de su capacidad máxima de producción. Esto puede traducirse en presiones inflacionarias, ya que la demanda supera la oferta disponible. Por otro lado, una diferencia negativa sugiere que la economía está operando por debajo de su capacidad, indicando subutilización de recursos y posible desempleo.\nEjemplos de Diferencia Negativa:\n\nCrisis de la Burbuja Inmobiliaria (2008 y posteriores): En este período, la diferencia negativa entre el PIB real y el PIB potencial en España señaló una significativa subutilización de la capacidad económica. La contracción en el sector inmobiliario y financiero llevó a una recesión, generando desempleo y disminuyendo la producción por debajo de su potencial.\nCrisis del COVID-19 (2020): Durante la crisis provocada por la pandemia, la diferencia negativa entre el PIB real y el PIB potencial reflejó una brusca contracción económica. Las restricciones y la disminución de la demanda llevaron a una caída en la producción, generando una brecha significativa. Las medidas de confinamiento y la incertidumbre económica contribuyeron a la subutilización de recursos.\n\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\ndf2 &lt;- df %&gt;% \n  select(comunidad, periodo, diferencia_real_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(diferencia_real_potencial = round(diferencia_real_potencial, 3),\n         periodo = as.numeric(periodo)) \n\n# Crear el gráfico con etiquetas en el eje x en vertical\np2 &lt;- ggplot(df2, aes(x = periodo, y = diferencia_real_potencial, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\", size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_real_potencial), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Diferencia Real-Potencial\", caption = \"Fuente: AMECO\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10)) +\n  scale_x_continuous(breaks = seq(min(df2$periodo), max(df2$periodo), by = 2))\n\n\n# Mostrar el gráfico\nprint(p2)\n\n\n\n\n\n\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\ndf2 &lt;- df %&gt;% \n  select(comunidad, periodo, diferencia_real_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(diferencia_real_potencial = round(diferencia_real_potencial, 3),\n         periodo = as.numeric(periodo)) \n\n# Crear el gráfico con etiquetas en el eje x en vertical\np2 &lt;- ggplot(df2, aes(x = periodo, y = diferencia_real_potencial, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\", size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_real_potencial), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Diferencia Real-Potencial\", caption = \"Fuente: AMECO\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10)) +\n  scale_x_continuous(breaks = seq(min(df2$periodo), max(df2$periodo), by = 2))\n\n\n\n\n\n\nSegún BBVA Research, el 2024 será un año de desaceleración para el crecimiento de las economías avanzadas. Además, las tensiones geopolíticas son significativas, incluyendo la expectativa de elecciones en EE. UU., en el Parlamento Europeo, entre otras. Los Bancos Centrales deberán finalizar la carrera por normalizar la inflación. La desinflación ha sido más rápida de lo anticipado. Será un año de ajuste fiscal para la eurozona con posibles efectos de contagio que podrían afectar a la economía española. Las elecciones en el Parlamento Europeo ponen de manifiesto la senda que seguirá la UE y una posible polarización que aumentaría la incertidumbre en la política económica.\nEspaña experimentó un crecimiento del 2,4% en 2023, el doble de lo previsto a finales de 2022, impulsado por políticas fiscales expansivas. La industria española tuvo un mejor desempeño que la industria europea gracias a la ventaja comparativa de no depender tanto del gas ruso. Además, aumentó la demanda interna, tanto pública como privada. También se observa un aumento en la migración: más consumo, mayor demanda y más empleo, entre otros. Se prevé que estas tendencias continúen en 2024, con un crecimiento superior al promedio europeo. Dado que España es una economía pequeña y muy abierta, estará altamente sensible a la incertidumbre y a las políticas económicas globales.\n\n\n\n\n\n\n\n\n\n\n\nEn esta sección, contrastamos el PIB per cápita real y nominal, siendo el año base para el PIB real el 2016. El PIB nominal, reflejando el valor total sin ajustes inflacionarios, tiende a estar por debajo del PIB real debido al impacto de la inflación.\nRealizar el análisis en torno al PIB pc real en lugar del PIB pc nominal es esencial por varias razones fundamentales. En primer lugar, el PIB pc real ajusta los valores de producción por inflación, ofreciendo una comparación más precisa del crecimiento económico a lo largo del tiempo al eliminar el efecto de los cambios en los precios. Esto resulta crucial para evaluar el aumento real en la producción y entender el verdadero progreso económico. En segundo lugar, el PIB pc real refleja de manera más precisa el bienestar real de la población al capturar no solo el crecimiento nominal, sino también el aumento real en los ingresos y niveles de vida. Por el contrario, el PIB pc nominal puede proporcionar interpretaciones engañosas, ya que los cambios en los valores pueden deberse simplemente a la inflación, sin implicar un cambio sustancial en la capacidad adquisitiva de la población.\nEn el análisis del PIB per cápita real desde 1955 hasta la crisis financiera de 2008, se observa una marcada tendencia de crecimiento, indicativa de un período de desarrollo económico en España. Sin embargo, a partir de 2008, tras la crisis de la burbuja inmobiliaria, se evidencia un relativo estancamiento en el crecimiento del PIB per cápita real. Este fenómeno refleja los desafíos económicos y las fluctuaciones asociadas con eventos significativos.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Evolución del PIB per cápita \ndf3 &lt;- df %&gt;% \n  select(comunidad, periodo, f_deflactor_pib, F_PIB_real_2016, f_población) %&gt;%\n  filter(comunidad == \"total\") %&gt;%\n  mutate(pib_nominal = F_PIB_real_2016 * f_deflactor_pib ) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016*1000) %&gt;%\n  mutate(pib_nominal = pib_nominal*1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  mutate(pibpc_nominal = pib_nominal / f_población)\n\n# Crear el gráfico interactivo con barras y línea\np3 &lt;- ggplot(df3, aes(x = as.factor(periodo), group = 1)) +  # Convierte periodo a factor\n  geom_bar(aes(y = pibpc_real, fill = \"PIB per cápita real\"), stat = \"identity\", position = \"dodge\", color = \"black\", alpha = 0.7) +\n  geom_ribbon(aes(ymin = 0, ymax = pibpc_nominal), fill = \"blue\", alpha = 0.1) +\n  geom_line(aes(y = pibpc_nominal, color = \"PIB per cápita nominal\"), size = 0.5) +\n  geom_point(aes(y = pibpc_nominal), color = \"blue\", size = 2) +\n  labs(title = \"Comparación entre PIB per cápita nominal y real\",\n       x = \"Año\",\n       y = \"PIB per cápita real\",\n       fill = \"Categoría\",\n       color = \"PIB per cápita nominal\",\n       caption = \"Fuente: FEDEA\") +\n  scale_fill_manual(values = c(\"PIB per cápita real\" = \"#FF9999\"), guide = \"none\") +  # Deshabilitar la leyenda para fill\n  scale_color_manual(values = c(\"PIB per cápita nominal\" = \"blue\"), guide = \"none\") +  # Deshabilitar la leyenda para color\n  scale_x_discrete(breaks = unique(df3$periodo[seq(1, nrow(df3), by = 5)])) +  # Muestra los años de 5 en 5\n  theme_stata(base_family = \"\") +\n  theme(legend.position = \"bottom\", axis.text.x = element_text(angle = 45, hjust = 1))\n\n# Convertir a gráfico interactivo con plotly\np3 &lt;- ggplotly(p3)\n\n# Mostrar el gráfico interactivo\np3\n\n\n\n\n\n\n\n\nCódigo### Evolución del PIB per cápita \ndf3 &lt;- df %&gt;% \n  select(comunidad, periodo, f_deflactor_pib, F_PIB_real_2016, f_población) %&gt;%\n  filter(comunidad == \"total\") %&gt;%\n  mutate(pib_nominal = F_PIB_real_2016 * f_deflactor_pib ) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016*1000) %&gt;%\n  mutate(pib_nominal = pib_nominal*1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  mutate(pibpc_nominal = pib_nominal / f_población)\n\n# Crear el gráfico interactivo con barras y línea\np3 &lt;- ggplot(df3, aes(x = periodo, group = 1)) +\n  geom_bar(aes(y = pibpc_real, fill = \"PIB per cápita real\"), stat = \"identity\", position = \"dodge\", color = \"black\", alpha = 0.7) +\n  geom_ribbon(aes(ymin = 0, ymax = pibpc_nominal), fill = \"blue\", alpha = 0.1) +\n  geom_line(aes(y = pibpc_nominal, color = \"PIB per cápita nominal\"), size = 0.5) +\n  geom_point(aes(y = pibpc_nominal), color = \"blue\", size = 2) +\n  labs(title = \"Comparación entre PIB per cápita nominal y real\",\n       x = \"Año\",\n       y = \"PIB per cápita real\",\n       fill = \"Categoría\",\n       color = \"PIB per cápita nominal\",\n       caption = \"Fuente: FEDEA\") +\n  scale_fill_manual(values = c(\"PIB per cápita real\" = \"#FF9999\")) +\n  scale_color_manual(values = c(\"PIB per cápita nominal\" = \"blue\")) +\n  theme_stata(base_family = \"\") +\n  theme(legend.position = \"bottom\", axis.text.x = element_text(angle = 90, hjust = 0.5))\n\n\n\n\n\n\nEn esta sección, presentaremos una tabla detallada que desglose el PIB per cápita real para las Comunidades Autónomas de España desde 1955 hasta la fecha actual. Esta tabla proporcionará una visión exhaustiva de la distribución del crecimiento económico a nivel regional, destacando posibles disparidades y patrones de desarrollo. Al presentar los datos de manera estructurada, facilitaremos la identificación de tendencias y la comprensión de la contribución relativa de cada región al panorama económico general del país.\n\n\nTabla\nCódigo\n\n\n\n\nCódigo### Tabla de scroll con pib pc real para las comunidades\n\nnuevos_nombres &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Islas Baleares\", \"Islas Canarias\", \n                    \"Cantabria\", \"Castilla y León\", \"Castilla - La Mancha\", \"Cataluña\", \n                    \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Comunidad de Madrid\", \n                    \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta y Melilla\", \"Total\")\n\n## Tabla que más me gusta \n\ndf4 &lt;- df %&gt;% \n  select(comunidad, periodo, F_PIB_real_2016, f_población) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016 * 1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  select(-c(3, 4)) %&gt;%\n  pivot_wider(names_from = periodo, values_from = pibpc_real) %&gt;% mutate(comunidad = nuevos_nombres)\n\ndf4 &lt;- df4 %&gt;% mutate(across(where(is.numeric), \\(x) round(x, digits = 2)))\n\ndf4 %&gt;%  \n  gt(rowname_col = \"comunidad\") %&gt;% tab_header(title = \"PIB per cápita por Comunidades Autónomas\", \n                                               subtitle = \"Euros constantes de 2015\")  %&gt;% \n  tab_source_note(md(\"Fuente: [BdeMores](https://www.sepg.pap.hacienda.gob.es/sitios/sepg/es-ES/Presupuestos/DocumentacionEstadisticas/Documentacion/paginas/basesdatosestudiosregionales.aspx)\")) %&gt;%\n  gtExtras::gt_theme_pff() \n\n\n\n\n\n\n\nPIB per cápita por Comunidades Autónomas\n    \n\nEuros constantes de 2015\n    \n\n\n      1955\n      1956\n      1957\n      1958\n      1959\n      1960\n      1961\n      1962\n      1963\n      1964\n      1965\n      1966\n      1967\n      1968\n      1969\n      1970\n      1971\n      1972\n      1973\n      1974\n      1975\n      1976\n      1977\n      1978\n      1979\n      1980\n      1981\n      1982\n      1983\n      1984\n      1985\n      1986\n      1987\n      1988\n      1989\n      1990\n      1991\n      1992\n      1993\n      1994\n      1995\n      1996\n      1997\n      1998\n      1999\n      2000\n      2001\n      2002\n      2003\n      2004\n      2005\n      2006\n      2007\n      2008\n      2009\n      2010\n      2011\n      2012\n      2013\n      2014\n      2015\n      2016\n      2017\n      2018\n      2019\n      2020\n      2021\n    \n\n\n\nAndalucía\n3184.06\n3265.11\n3285.89\n3448.74\n3750.92\n3754.61\n3824.63\n4094.68\n4373.78\n4780.93\n4956.07\n5343.86\n5686.45\n6059.73\n6593.74\n7146.68\n7356.05\n7688.80\n8076.45\n8181.97\n8504.48\n8692.45\n8617.60\n8953.16\n9468.35\n9783.68\n9661.23\n9718.81\n9861.41\n9908.32\n10189.57\n10409.64\n10928.73\n11507.39\n12053.80\n12764.42\n13065.95\n13101.51\n12792.82\n13021.62\n13298.47\n13595.89\n14243.52\n14727.59\n15277.55\n16142.12\n16633.43\n17015.28\n17481.28\n17869.88\n18180.95\n18649.52\n19033.52\n18914.99\n18080.75\n17667.49\n17443.59\n16780.82\n16390.91\n16639.83\n17186.52\n17658.59\n18126.28\n18581.98\n18816.76\n16712.47\n17583.96\n\n\nAragón\n4203.82\n4419.74\n4560.46\n4790.45\n5214.93\n5245.02\n5349.36\n5784.49\n6239.33\n6736.98\n6897.13\n7399.38\n7832.52\n8273.62\n8922.18\n9414.06\n9471.40\n9845.47\n10284.78\n10564.08\n11136.20\n11361.72\n11241.29\n11900.82\n12826.95\n13301.98\n13214.67\n13423.35\n13758.91\n13871.92\n14304.66\n14800.30\n15727.42\n16658.20\n17554.28\n18250.45\n18595.54\n18791.26\n18466.53\n18690.98\n19303.46\n19888.07\n20665.40\n21097.05\n21610.41\n22661.37\n23291.02\n23927.94\n24457.65\n24938.29\n25460.68\n26163.40\n26878.51\n26643.95\n25524.50\n25677.42\n25183.57\n24127.08\n24277.66\n24629.96\n25108.10\n25981.40\n26628.33\n27331.23\n27407.28\n24907.01\n26368.51\n\n\nAsturias\n4744.79\n4875.23\n4911.64\n5130.79\n5553.95\n5526.27\n5599.83\n5996.17\n6406.29\n6924.15\n7097.82\n7661.33\n8161.67\n8626.48\n9310.72\n9730.72\n9680.04\n10170.00\n10739.93\n11058.81\n11684.28\n11549.31\n11077.16\n11810.92\n12814.74\n13325.65\n13295.79\n13040.61\n12901.82\n13005.60\n13412.43\n13474.53\n13912.75\n14385.16\n14802.23\n14855.28\n15246.45\n15912.19\n15342.00\n15701.28\n15952.83\n16248.94\n16704.18\n17440.43\n17570.37\n18344.69\n19042.61\n19485.63\n19980.88\n20434.70\n21085.03\n21981.25\n22680.40\n22844.44\n21322.89\n21265.04\n21001.55\n20203.16\n19652.25\n19746.04\n20449.02\n20918.35\n21509.25\n21947.67\n22323.83\n19963.27\n21204.95\n\n\nIslas Baleares\n6231.96\n6517.08\n6680.64\n7052.96\n7712.10\n7808.81\n7977.59\n8458.08\n8947.62\n9705.44\n9984.38\n10827.74\n11589.16\n12359.66\n13460.35\n14415.75\n14681.66\n15186.35\n15768.66\n15741.30\n16139.95\n16201.53\n15787.59\n16401.20\n17343.61\n18227.06\n18369.84\n18506.99\n18823.88\n19170.14\n19959.82\n20415.77\n21454.83\n22207.71\n22864.76\n24528.21\n25006.75\n25015.85\n24644.85\n24739.63\n25036.24\n25557.81\n26897.41\n27349.77\n28414.74\n28999.80\n29308.11\n28459.45\n27892.40\n27838.22\n27958.58\n27957.63\n27927.80\n27496.32\n25890.56\n25385.69\n25166.30\n24597.82\n23986.57\n24560.78\n25258.25\n26088.78\n26572.15\n26886.72\n26918.33\n20386.75\n22481.00\n\n\nIslas Canarias\n3735.63\n3959.18\n4126.20\n4273.75\n4577.04\n4525.23\n4549.25\n4908.73\n5284.79\n5799.59\n6036.15\n6600.64\n7123.66\n7636.70\n8359.85\n9232.29\n9682.30\n10160.44\n10719.02\n10614.35\n10802.18\n11007.59\n10893.88\n11622.63\n12628.39\n13166.65\n13152.48\n13122.05\n13209.70\n13205.48\n13513.66\n13869.76\n14629.50\n15436.11\n16192.57\n16157.89\n16279.66\n16782.69\n16857.28\n17250.68\n17491.69\n17723.49\n18279.16\n19117.60\n20164.53\n20599.21\n21349.38\n21215.50\n21430.68\n21381.46\n21476.82\n21602.70\n21782.75\n21379.21\n20165.78\n20110.60\n19699.94\n19017.89\n18608.16\n18652.93\n19114.49\n19608.96\n20169.18\n20362.09\n20420.84\n16342.97\n17479.28\n\n\nCantabria\n5079.42\n5251.58\n5321.15\n5625.07\n6160.65\n6141.94\n6213.74\n6623.24\n7044.01\n7595.51\n7767.67\n8284.32\n8720.07\n9189.68\n9889.50\n10555.61\n10732.20\n10951.40\n11224.46\n11574.62\n12248.90\n12451.91\n12279.59\n12877.34\n13754.81\n14129.58\n13900.03\n13858.20\n13941.20\n14009.82\n14407.07\n14623.16\n15249.05\n15933.04\n16563.06\n16576.08\n16447.43\n16695.61\n16313.69\n16669.42\n16839.02\n17051.28\n17623.65\n18464.06\n19230.23\n20146.56\n21035.44\n21559.58\n21726.02\n22058.07\n22549.66\n23104.29\n23531.39\n23395.16\n22271.10\n22074.08\n21454.60\n20943.27\n20275.89\n20642.84\n21253.88\n21904.75\n22593.54\n23058.30\n23329.69\n20871.72\n22001.76\n\n\nCastilla y León\n3102.04\n3238.82\n3318.96\n3478.68\n3779.67\n3785.86\n3868.26\n4233.23\n4621.83\n5090.55\n5316.98\n5707.40\n6045.86\n6454.18\n7035.09\n7536.35\n7668.56\n8020.52\n8428.12\n8600.57\n9007.90\n9242.45\n9199.64\n9712.88\n10433.21\n10834.70\n10755.93\n10819.12\n10977.14\n11197.95\n11687.08\n12185.33\n13059.04\n13719.70\n14338.27\n14758.71\n14837.96\n15051.97\n15330.34\n15752.81\n16024.23\n16322.86\n16620.30\n17076.69\n17741.19\n18454.03\n18960.00\n19582.24\n20094.49\n20620.28\n21158.80\n21812.07\n22409.77\n22413.90\n21763.87\n21846.02\n21726.86\n21036.84\n20667.84\n20874.54\n21571.73\n22407.20\n22878.50\n23664.87\n23874.41\n21887.39\n22941.17\n\n\nCastilla - La Mancha\n2456.58\n2577.68\n2654.32\n2802.80\n3065.77\n3066.38\n3135.44\n3433.56\n3751.51\n4151.28\n4356.50\n4717.27\n5041.06\n5500.17\n6127.84\n6702.69\n6949.68\n7439.34\n7996.81\n8130.48\n8484.84\n8738.60\n8733.82\n9188.48\n9831.96\n10087.97\n9887.23\n10053.11\n10311.90\n10515.89\n10971.93\n11355.29\n12070.80\n12922.08\n13760.94\n14262.39\n14559.97\n14691.30\n13997.93\n14169.67\n14340.03\n14865.66\n15333.87\n15963.54\n16290.41\n16972.03\n17497.64\n17987.04\n18321.18\n18633.95\n18904.09\n19389.86\n19820.64\n19806.19\n18911.27\n18639.66\n18162.69\n17279.69\n17283.16\n17160.75\n17915.36\n18751.71\n19200.25\n19827.69\n19875.40\n18300.31\n19134.86\n\n\nCataluña\n6663.59\n6824.54\n6849.72\n7171.18\n7767.20\n7821.92\n7969.70\n8405.21\n8844.05\n9497.41\n9672.10\n10202.82\n10621.36\n11082.51\n11807.45\n12424.28\n12526.24\n12975.45\n13497.04\n13818.70\n14508.26\n14550.79\n14164.80\n14654.16\n15446.29\n15849.49\n15616.21\n15749.06\n16021.47\n16014.35\n16359.88\n16885.99\n17915.79\n18890.94\n19816.82\n21021.68\n21694.22\n21951.50\n21660.02\n22185.77\n22760.87\n23311.46\n23994.57\n24739.74\n25781.17\n26709.13\n27577.71\n27700.65\n27827.51\n28155.44\n28424.50\n28975.50\n29322.11\n28891.12\n27622.97\n27705.79\n27054.65\n26271.87\n26061.18\n26676.33\n27802.07\n28673.54\n29350.43\n29688.56\n29977.45\n26114.80\n27605.66\n\n\nComunidad Valenciana\n4650.84\n4859.48\n4978.37\n5252.97\n5738.44\n5690.94\n5697.55\n6032.16\n6372.11\n6843.74\n6970.97\n7390.33\n7732.53\n8107.98\n8681.40\n9233.18\n9374.23\n9840.40\n10373.49\n10574.09\n11059.30\n11243.54\n11090.51\n11530.72\n12211.35\n12545.87\n12365.38\n12531.30\n12816.82\n12857.59\n13194.96\n13571.82\n14344.12\n15152.46\n15918.62\n16578.41\n17083.29\n16902.50\n16423.78\n16618.42\n17029.83\n17253.41\n18107.27\n18999.40\n19736.76\n20722.54\n21535.67\n21652.85\n21589.66\n21732.48\n21901.31\n22261.35\n22391.15\n22171.63\n20755.06\n20565.24\n20107.46\n19334.92\n19167.72\n19642.18\n20377.71\n20946.30\n21671.64\n22036.96\n22243.25\n19663.47\n20698.70\n\n\nExtremadura\n2198.55\n2310.77\n2385.98\n2497.25\n2708.40\n2661.56\n2683.84\n2868.07\n3058.12\n3353.84\n3488.43\n3761.45\n4002.93\n4241.23\n4588.83\n4978.48\n5118.02\n5355.82\n5632.85\n5686.80\n5897.57\n6036.79\n5996.81\n6463.42\n7083.62\n7456.41\n7489.12\n7535.49\n7650.69\n7758.03\n8048.72\n8467.69\n9149.13\n9668.62\n10166.74\n10397.85\n10810.48\n10933.80\n10749.62\n10863.82\n10948.10\n11307.15\n11755.79\n12219.09\n12873.82\n13595.36\n14023.92\n14554.44\n15030.81\n15498.44\n16009.65\n16597.39\n17241.09\n17499.10\n16942.16\n16965.18\n16660.03\n16130.87\n16040.25\n16104.88\n16704.74\n17117.11\n17859.26\n18288.03\n18664.12\n16987.18\n17839.78\n\n\nGalicia\n2926.13\n3039.37\n3096.05\n3244.77\n3515.60\n3480.33\n3507.19\n3812.80\n4135.52\n4546.08\n4739.24\n5126.94\n5473.57\n5839.93\n6362.18\n6904.91\n7121.02\n7494.74\n7921.00\n8109.56\n8518.49\n8749.13\n8717.78\n9194.14\n9868.00\n10177.11\n10058.31\n10205.52\n10445.25\n10528.26\n10857.70\n11109.39\n11676.53\n12366.64\n13030.57\n13110.82\n13570.08\n13804.15\n13757.45\n14112.16\n14385.08\n14693.20\n15176.79\n15653.70\n16346.67\n16880.98\n17408.60\n17825.27\n18287.43\n18905.24\n19523.84\n20334.68\n21103.53\n21431.84\n20646.11\n20731.93\n20296.42\n19782.05\n19556.58\n19785.33\n20743.92\n21478.68\n22104.78\n22595.59\n22909.16\n20831.24\n21952.77\n\n\nComunidad de Madrid\n9558.50\n9775.68\n9796.12\n9968.67\n10510.68\n10379.33\n10383.62\n10753.06\n11110.86\n11895.69\n12078.94\n12398.31\n12560.03\n12946.12\n13626.43\n14214.80\n14236.58\n14887.34\n15646.07\n16036.68\n16863.97\n16663.30\n15988.46\n16383.46\n17113.56\n17623.79\n17430.58\n17370.49\n17455.90\n17573.65\n18099.36\n18669.80\n19793.43\n20683.63\n21504.77\n22232.15\n23029.92\n22999.72\n22674.36\n23135.20\n23712.76\n24127.20\n25091.19\n26552.35\n27639.66\n28877.15\n29807.70\n29787.10\n29959.55\n30557.91\n31364.28\n32270.98\n32682.32\n32453.92\n31438.92\n31313.91\n31388.70\n30800.60\n30432.59\n30954.62\n32040.34\n32947.24\n33948.04\n34445.54\n34981.17\n30814.50\n32553.06\n\n\nMurcia\n3228.71\n3340.95\n3390.47\n3578.17\n3910.95\n4014.29\n4188.12\n4573.00\n4982.14\n5496.21\n5750.52\n6213.60\n6626.34\n7101.63\n7772.05\n8414.49\n8629.75\n9058.69\n9552.74\n9584.66\n9871.70\n9959.48\n9748.46\n10243.40\n10960.82\n11195.39\n10946.72\n11128.61\n11420.56\n11581.99\n12015.27\n12356.41\n13056.28\n13799.28\n14511.97\n15432.64\n14879.11\n14804.97\n14558.08\n14717.62\n14726.97\n15057.73\n15856.59\n16578.84\n17121.40\n17963.00\n18550.88\n18813.79\n19060.58\n19216.96\n19465.24\n19854.22\n20185.28\n20147.88\n18968.46\n18778.49\n18455.92\n17917.56\n17664.13\n18038.51\n19228.58\n19994.89\n20560.15\n20475.31\n20716.98\n18658.77\n19494.51\n\n\nNavarra\n4846.13\n5034.76\n5134.04\n5399.56\n5885.97\n5939.46\n6059.16\n6564.75\n7096.70\n7703.30\n7930.38\n8499.01\n8989.50\n9435.23\n10112.58\n10862.18\n11133.16\n11521.64\n11984.08\n12510.87\n13401.12\n13540.52\n13281.20\n13827.10\n14666.31\n15074.02\n14855.11\n15262.25\n15821.79\n16309.33\n17204.05\n17679.67\n18682.71\n19840.40\n20953.17\n21656.75\n21627.10\n21277.26\n20944.71\n21474.10\n21983.47\n22522.47\n23453.64\n24336.46\n25129.66\n26480.11\n26954.29\n27332.30\n27661.40\n28266.35\n28748.27\n29488.54\n29950.58\n29922.05\n28487.57\n28636.96\n28451.83\n27452.82\n27238.74\n27881.04\n28631.54\n29369.12\n30279.23\n30579.74\n30959.36\n27560.54\n29196.57\n\n\nPaís Vasco\n7656.85\n7714.94\n7615.20\n7843.78\n8356.13\n8286.57\n8341.94\n8910.04\n9495.57\n10322.60\n10642.58\n11176.85\n11584.52\n12068.27\n12838.14\n13390.55\n13407.30\n13822.56\n14321.37\n14998.16\n16122.86\n15873.80\n15169.08\n15346.86\n15830.36\n15879.17\n15292.26\n15363.18\n15567.35\n15819.79\n16443.38\n16884.39\n17820.44\n18694.34\n19507.60\n19987.69\n20488.13\n20237.52\n19937.44\n20204.07\n20868.62\n21126.89\n22105.44\n23377.51\n24584.11\n25682.43\n26512.78\n26929.10\n27439.75\n28101.74\n28967.53\n29889.79\n30676.06\n30860.59\n29490.54\n29871.53\n29572.77\n29109.38\n28532.82\n29136.94\n30160.26\n30998.27\n31716.94\n32265.11\n32614.72\n29030.46\n30787.36\n\n\nLa Rioja\n3862.78\n4031.59\n4127.92\n4348.39\n4751.49\n4755.24\n4830.30\n5222.75\n5634.51\n6172.88\n6413.90\n6833.34\n7185.18\n7565.76\n8135.07\n8706.45\n8847.37\n9125.51\n9456.04\n9609.28\n10011.19\n10183.78\n10040.44\n10677.85\n11559.28\n11997.59\n11937.61\n12235.70\n12638.20\n12772.08\n13209.99\n13547.26\n14271.13\n15087.57\n15859.55\n18691.17\n19204.72\n19601.80\n19484.25\n19790.94\n20205.09\n20766.23\n21523.10\n22129.07\n22787.67\n24071.35\n24500.23\n24623.15\n25034.77\n25331.97\n25714.63\n26426.67\n26908.44\n26871.49\n25556.30\n25646.08\n25048.76\n24206.43\n23700.70\n24084.91\n24968.35\n25633.63\n25858.92\n26349.04\n26510.63\n24030.64\n25138.06\n\n\nCeuta y Melilla\n4214.89\n4260.60\n4221.57\n4260.95\n4459.81\n4442.94\n4523.97\n4687.96\n4843.89\n5286.45\n5474.71\n5869.81\n6213.84\n6590.14\n7120.09\n7575.67\n7658.48\n8150.32\n8727.11\n8889.04\n9294.32\n9413.58\n9251.35\n9802.27\n10575.61\n11181.96\n11286.03\n11592.50\n12010.28\n11938.50\n12144.63\n12218.44\n12636.80\n13144.98\n13613.44\n14887.46\n14556.10\n14444.51\n15100.53\n14933.16\n15004.37\n15120.51\n15764.50\n16514.26\n17138.75\n17674.29\n17943.49\n18416.53\n19229.73\n19753.79\n20075.26\n20338.70\n20455.42\n20497.26\n19702.16\n19125.36\n18604.44\n17851.38\n17736.80\n17746.31\n18177.97\n18550.10\n18936.80\n19365.20\n19705.39\n18064.63\n19003.66\n\n\nTotal\n4428.61\n4587.84\n4662.12\n4884.06\n5298.26\n5310.35\n5409.18\n5799.18\n6201.82\n6765.76\n6998.50\n7474.32\n7876.25\n8335.11\n9004.61\n9622.97\n9801.51\n10250.29\n10769.66\n11025.78\n11584.53\n11696.41\n11460.19\n11933.10\n12653.98\n13044.34\n12885.34\n12965.83\n13162.16\n13259.63\n13665.19\n14059.13\n14864.94\n15641.72\n16374.08\n17041.82\n17461.86\n17559.58\n17292.84\n17626.58\n18019.40\n18393.72\n19102.10\n19884.25\n20676.73\n21578.07\n22271.26\n22548.77\n22849.80\n23249.42\n23676.93\n24262.25\n24689.25\n24556.24\n23476.15\n23372.88\n23041.73\n22353.25\n22046.76\n22412.93\n23245.83\n23968.82\n24638.70\n25096.59\n25389.91\n22393.14\n23642.03\n\n\n\nFuente: BdeMores\n\n    \n\n\n\n\n\n\n\nCódigo### Tabla de scroll con pib pc real para las comunidades\n\nnuevos_nombres &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Islas Baleares\", \"Islas Canarias\", \n                    \"Cantabria\", \"Castilla y León\", \"Castilla - La Mancha\", \"Cataluña\", \n                    \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Comunidad de Madrid\", \n                    \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta y Melilla\", \"Total\")\n\n## Tabla que más me gusta \n\ndf4 &lt;- df %&gt;% \n  select(comunidad, periodo, F_PIB_real_2016, f_población) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016 * 1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  select(-c(3, 4)) %&gt;%\n  pivot_wider(names_from = periodo, values_from = pibpc_real) %&gt;% mutate(comunidad = nuevos_nombres)\n\ndf4 &lt;- df4 %&gt;% mutate(across(where(is.numeric), \\(x) round(x, digits = 2)))\n\n\n\n\n\n\nEn esta sección, nos adentraremos en el análisis del desempleo, examinando la evolución de la Tasa de Desempleo y la Tasa de Desempleo Estructural (NAIRU). Posteriormente, de la evolución de la población activa (parados y ocupados). Por último, la evolución de la tasa de desempleo por Comunidades Autónomas.\n\nEl enfoque principal será comprender la dinámica del empleo en España a lo largo del tiempo. Exploraremos la variación en la Tasa de Desempleo, destacando momentos críticos que han impactado el mercado laboral. Además, examinaremos la Tasa de Desempleo Estructural (NAIRU), que representa la tasa de desempleo natural en una economía sin presiones inflacionarias. Este análisis nos permitirá evaluar no solo las fluctuaciones a corto plazo, sino también comprender las condiciones subyacentes del mercado laboral a lo largo de las décadas.\n\n\nGráfico animado\nGráfico sin animar\nCódigo\n\n\n\n\nCódigo#### Desempleo\n\n### Tasa de desempleo vs NAIRU\n\ndfn &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n\n# Gráfico de la evolución del NAIRU y parados\n\npn &lt;- ggplot(dfn, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = nairu, color = \"NAIRU\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = nairu, color = \"NAIRU\"), size = 1) +\n  geom_point(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1) +\n  labs(title = \"Evolución de la Tasa de Desempleo y NAIRU\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\", caption = \"Fuente: AMECO\") +\n  scale_color_manual(values = c(\"NAIRU\" = \"blue\", \"Tasa de Paro\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\n# Crea la animación\np_animated2 &lt;- pn +\n  transition_reveal(periodo) +\n  enter_fade() + \n  exit_fade()\n\n# Visualiza la animación\nanimate(p_animated2, nframes = 200, fps = 20, end_pause = 0)\n\n\n\n\n\n\n\n\n\n\nCódigopn\n\n\n\n\n\n\n\n\n\n\nCódigo#### Desempleo\n\n### Tasa de desempleo vs NAIRU\n\ndfn &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n\n# Gráfico de la evolución del NAIRU y parados\n\npn &lt;- ggplot(dfn, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = nairu, color = \"NAIRU\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = nairu, color = \"NAIRU\"), size = 1) +\n  geom_point(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1) +\n  labs(title = \"Evolución de la Tasa de Desempleo y NAIRU\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\", caption = \"Fuente: AMECO\") +\n  scale_color_manual(values = c(\"NAIRU\" = \"blue\", \"Tasa de Paro\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\n\n\n\n\n\nEn esta sección, nos enfocaremos en el Diferencial porcentual entre la Tasa de Desempleo y la Tasa de Desempleo Estructural (NAIRU). Este análisis proporcionará una perspectiva detallada sobre las brechas entre la tasa de desempleo actual y la tasa de desempleo considerada natural en condiciones de equilibrio. Podemos destacar:\n\nDurante las décadas de los 80 y 90 en España, se observó que las tasas de desempleo estuvieron consistentemente por encima de la Tasa de Desempleo Estructural (NAIRU). Este fenómeno puede atribuirse a varios factores, entre ellos, la transición económica y la modernización industrial que caracterizaron esos períodos. Las reformas estructurales, aunque necesarias para la adaptación a la economía global, generaron desajustes temporales en el mercado laboral. Los cambios en la estructura productiva y la adopción de nuevas tecnologías llevaron a una destrucción de empleo en ciertos sectores, contribuyendo a tasas de desempleo elevadas.\nTras la crisis financiera de 2008, se evidenció un aumento significativo en la tasa de desempleo por encima de la NAIRU. La recesión económica y la contracción en diversos sectores, particularmente en la construcción, provocaron una rápida pérdida de empleo. La recuperación posterior fue gradual, pero la tasa de desempleo permaneció elevada durante un tiempo, reflejando las secuelas de la crisis.\nEn contraste, durante la crisis del COVID-19, las medidas gubernamentales, especialmente los Expedientes de Regulación Temporal de Empleo (ERTEs), jugaron un papel crucial. Estos programas de apoyo mitigaron la destrucción masiva de empleo al proporcionar un mecanismo de suspensión temporal de los contratos laborales. Esto evitó que la tasa de desempleo se disparara por encima de la NAIRU, ofreciendo estabilidad al mercado laboral y resaltando la eficacia de las políticas de respuesta ante crisis económicas.\n\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\n\ndfd &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo)) %&gt;% \n  mutate(diferencia_desempleo = b_tasa_paro - nairu)\n\npd &lt;- ggplot(dfd, aes(x = periodo, y = diferencia_desempleo, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\",size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_desempleo), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre Tasa de desempleo y NAIRU\",\n       x = \"Año\",\n       y = \"Diferencia entre Tasa de desempleo y NAIRU\", caption = \"Fuente: AMECO\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10))\n\n# Mostrar el gráfico\nprint(pd)\n\n\n\n\n\n\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\n\ndfd &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo)) %&gt;% \n  mutate(diferencia_desempleo = b_tasa_paro - nairu)\n\npd &lt;- ggplot(dfd, aes(x = periodo, y = diferencia_desempleo, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\",size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_desempleo), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre Tasa de desempleo y NAIRU\",\n       x = \"Año\",\n       y = \"Diferencia entre Tasa de desempleo y NAIRU\", caption = \"Fuente: AMECO\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10))\n\n\n\n\n\n\nEl análisis de la Población Activa proporcionará una visión completa de la participación laboral, permitiendo entender mejor las tendencias y desafíos en la oferta y la demanda de empleo en distintos períodos económicos.\nLa ecuación de la Población Activa (PA) se desglosa en dos componentes: los Ocupados (O) y los Parados (P). A partir de esta ecuación, se derivan varios indicadores económicos clave:\n\nTasa de Actividad (TA): La Tasa de Actividad mide la proporción de la población en edad de trabajar que está activamente participando en el mercado laboral, ya sea empleada o buscando empleo. Se calcula como (PA / Población en Edad de Trabajar (PET)) * 100.\nTasa de Ocupación (TO): La Tasa de Ocupación indica la proporción de la población en edad de trabajar que está actualmente empleada. Se determina como (O / PET) * 100.\nTasa de Paro (TP): La Tasa de Paro mide el porcentaje de la población activa que está desempleada, es decir, busca empleo pero no lo encuentra. Se expresa como (P / PA) * 100.\n\nEstos indicadores proporcionan una comprensión detallada de la dinámica del mercado laboral. La Tasa de Actividad refleja la participación general en el mercado laboral, la Tasa de Ocupación destaca la proporción de personas empleadas, y la Tasa de Paro señala la prevalencia del desempleo. Estos indicadores son fundamentales para evaluar el rendimiento económico y la salud del mercado laboral en diferentes contextos y períodos.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Como han evolucionado los parados y ocupados a lo largo del tiempo \ndf5 &lt;- df %&gt;% \n  select(comunidad, periodo, f_parados, f_ocupados) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(f_parados = round(f_parados, 3),\n         f_ocupados = round(f_ocupados, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Crear el gráfico con ggplot2\ngg_barras_apiladas &lt;- ggplot(df5, aes(x = periodo, fill = factor(comunidad))) +\n  geom_bar(aes(y = f_ocupados, color = \"Ocupados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  geom_bar(aes(y = f_parados, color = \"Parados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  labs(title = \"Comparación de Ocupados y Parados en España\",\n       x = \"Periodo\",\n       y = \"Número de Personas\",\n       color = \"Categoría\", caption = \"Fuente: FEDEA\") +\n  scale_fill_manual(values = c(\"Ocupados\" = \"blue\", \"Parados\" = \"red\")) +\n  theme_stata()\n\n# Imprimir el gráfico\nprint(gg_barras_apiladas)\n\n\n\n\n\n\n\n\n\n\nCódigo### Como han evolucionado los parados y ocupados a lo largo del tiempo \ndf5 &lt;- df %&gt;% \n  select(comunidad, periodo, f_parados, f_ocupados) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(f_parados = round(f_parados, 3),\n         f_ocupados = round(f_ocupados, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Crear el gráfico con ggplot2\ngg_barras_apiladas &lt;- ggplot(df5, aes(x = periodo, fill = factor(comunidad))) +\n  geom_bar(aes(y = f_ocupados, color = \"Ocupados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  geom_bar(aes(y = f_parados, color = \"Parados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  labs(title = \"Comparación de Ocupados y Parados en España\",\n       x = \"Periodo\",\n       y = \"Número de Personas\",\n       color = \"Categoría\", caption = \"Fuente: FEDEA\") +\n  scale_fill_manual(values = c(\"Ocupados\" = \"blue\", \"Parados\" = \"red\")) +\n  theme_stata()\n\n\n\n\n\n\nEn esta sección, se presentarán cuatro gráficos que ilustran la evolución temporal de la Tasa de Desempleo por Comunidad Autónoma en momentos clave: 1977, 1995, 2007 y 2021. Cada gráfico proporcionará una representación visual de cómo ha variado el desempleo en las diferentes regiones en estos años específicos. Más adelante en la presentación se utilizarán mapas para ofrecer una representación aún más gráfica y detallada de la evolución de la Tasa de Desempleo por Comunidad Autónoma.\n\n\nAño 1977\nAño 1995\nAño 2007\nAño 2021\nCódigo\n\n\n\n\nCódigo### Tasa de desempleo \n\ndf6 &lt;- df %&gt;%\n  select(comunidad, periodo, b_tasa_paro) %&gt;%\n  filter(periodo &gt;= 1977) %&gt;%\n  mutate(b_tasa_paro = round(b_tasa_paro, 2)) %&gt;%\n  mutate(periodo = as.numeric(periodo)) \n\n\n# Filtrar para el año 1977\ndf6_1977 &lt;- df6 %&gt;% filter(periodo == 1977) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_1977 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 1995\ndf6_1995 &lt;- df6 %&gt;% filter(periodo == 1995) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1995 de mayor a menor según la columna b_tasa_paro\ndf6_1995 &lt;- df6_1995 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2007\ndf6_2007 &lt;- df6 %&gt;% filter(periodo == 2007) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_2007 &lt;- df6_2007 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2021\ndf6_2021 &lt;- df6 %&gt;% filter(periodo == 2021) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_2021 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_2021 %&gt;% arrange(desc(b_tasa_paro))\n\n\n\n\n# Función para crear un gráfico de barras para la tasa de paro\ncrear_grafico &lt;- function(data, title) {\n  ggplot(data, aes(x = reorder(comunidad, b_tasa_paro), y = b_tasa_paro, fill = comunidad)) +\n    geom_bar(stat = \"identity\") +\n    labs(title = title, x = \"Comunidad Autónoma\", y = \"Tasa de Paro\") +\n    theme_stata() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))}\n\n# Crear gráficos individuales\ngrafico_1977 &lt;- crear_grafico(df6_1977, \"Tasa de Paro en 1977\")\ngrafico_1995 &lt;- crear_grafico(df6_1995, \"Tasa de Paro en 1995\")\ngrafico_2007 &lt;- crear_grafico(df6_2007, \"Tasa de Paro en 2007\")\ngrafico_2021 &lt;- crear_grafico(df6_2021, \"Tasa de Paro en 2021\")\n\n# Organizar los gráficos en una cuadrícula\ngrafico_combinado &lt;- grafico_1977 + theme(legend.position = \"none\")+ plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma 1977\",\n    caption = \"Fuente: BdeMores\") \n# Mostrar el gráfico combinado\nprint(grafico_combinado)\n\n\n\n\n\n\n\n\n\n\nCódigografico_combinado2 &lt;- grafico_1995 + theme(legend.position = \"none\")+ plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma 1995\",\n    caption = \"Fuente: BdeMores\") \n# Mostrar el gráfico combinado\nprint(grafico_combinado2)\n\n\n\n\n\n\n\n\n\n\nCódigo# Organizar los gráficos en una cuadrícula\ngrafico_combinado3 &lt;- grafico_2007 + theme(legend.position = \"none\")+ plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma 2007\",\n    caption = \"Fuente: BdeMores\") \n# Mostrar el gráfico combinado\nprint(grafico_combinado3)\n\n\n\n\n\n\n\n\n\n\nCódigo# Organizar los gráficos en una cuadrícula\ngrafico_combinado4 &lt;- grafico_2021 + theme(legend.position = \"none\")+ plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma 2021\",\n    caption = \"Fuente: BdeMores\") \n# Mostrar el gráfico combinado\nprint(grafico_combinado4)\n\n\n\n\n\n\n\n\n\n\nCódigo### Tasa de desempleo \n\ndf6 &lt;- df %&gt;%\n  select(comunidad, periodo, b_tasa_paro) %&gt;%\n  filter(periodo &gt;= 1977) %&gt;%\n  mutate(b_tasa_paro = round(b_tasa_paro, 2)) %&gt;%\n  mutate(periodo = as.numeric(periodo)) \n\n\n# Filtrar para el año 1977\ndf6_1977 &lt;- df6 %&gt;% filter(periodo == 1977) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_1977 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 1995\ndf6_1995 &lt;- df6 %&gt;% filter(periodo == 1995) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1995 de mayor a menor según la columna b_tasa_paro\ndf6_1995 &lt;- df6_1995 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2007\ndf6_2007 &lt;- df6 %&gt;% filter(periodo == 2007) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_2007 &lt;- df6_2007 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2021\ndf6_2021 &lt;- df6 %&gt;% filter(periodo == 2021) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_2021 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_2021 %&gt;% arrange(desc(b_tasa_paro))\n\n\n\n\n# Función para crear un gráfico de barras para la tasa de paro\ncrear_grafico &lt;- function(data, title) {\n  ggplot(data, aes(x = reorder(comunidad, b_tasa_paro), y = b_tasa_paro, fill = comunidad)) +\n    geom_bar(stat = \"identity\") +\n    labs(title = title, x = \"Comunidad Autónoma\", y = \"Tasa de Paro\") +\n    theme_stata() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))}\n\n# Crear gráficos individuales\ngrafico_1977 &lt;- crear_grafico(df6_1977, \"Tasa de Paro en 1977\")\ngrafico_1995 &lt;- crear_grafico(df6_1995, \"Tasa de Paro en 1995\")\ngrafico_2007 &lt;- crear_grafico(df6_2007, \"Tasa de Paro en 2007\")\ngrafico_2021 &lt;- crear_grafico(df6_2021, \"Tasa de Paro en 2021\")\n\n\n\n\n\n\nEn esta sección, realizaremos una comparación integral entre el Producto Interno Bruto (PIB) y la Tasa de Desempleo por Comunidades Autónomas.\n\nEn esta sección, exploraremos la evolución de la Tasa de Desempleo en España a través de cuatro mapas interactivos que representan los años 1955, 1975, 2000 y 2021 respectivamente. Estos mapas proporcionarán una visión visual de cómo ha variado la tasa de desempleo en cada Comunidad Autónoma a lo largo de décadas clave en la historia económica española.\nAl analizar estos mapas, se observan diferencias notables en las tasas de desempleo entre el sur y el norte de España. Estas disparidades pueden atribuirse a diversas razones, como las disparidades históricas en el desarrollo industrial, la concentración de sectores económicos específicos en ciertas regiones y las variaciones en las inversiones y políticas de desarrollo regional.\nCon el paso del tiempo, esta tendencia ha mostrado un creciente aumento de la disparidad entre el sur y el norte, acentuándose aún más en los años recientes. Factores como la descentralización industrial, las inversiones en infraestructura y la dinámica de la globalización han influido en estas diferencias regionales en las tasas de desempleo. Este análisis visual nos permitirá identificar patrones geográficos y comprender cómo factores económicos y estructurales han impactado la distribución del empleo en España a lo largo del tiempo.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo#### Mapa coroplético desempleo y PIB \n\nnuevos_nombres2 &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Baleares\", \"Canarias\", \n                     \"Cantabria\", \"Castilla y León\", \"Castilla-La Mancha\", \"Cataluña\", \n                     \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Madrid\", \n                     \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta\", \"Melilla\")\ndfc &lt;- df %&gt;%\n  distinct(comunidad) %&gt;%\n  mutate(nuevos_nombres = nuevos_nombres2)\n\ndfc &lt;- left_join(df, dfc, by = \"comunidad\")\n\ndfc &lt;- dfc %&gt;%\n  select(nuevos_nombres, periodo, F_PIB_real_2016, f_parados, f_ocupados, f_población) %&gt;%\n  mutate(tasa_desempleo =  f_parados/(f_parados + f_ocupados)*100) %&gt;%\n  mutate(pibpc= F_PIB_real_2016/f_población) %&gt;%\n  select(nuevos_nombres, periodo, pibpc, tasa_desempleo) %&gt;%\n  rename(comunidad = nuevos_nombres)\n\n\n#Obtenemos el mapa de España por CCAA\ndf_ccaa &lt;- esp_get_ccaa()%&gt;%\n  select(ccaa.shortname.es, geometry) %&gt;%\n  rename(\"comunidad\" = ccaa.shortname.es)\n\ndf_datos_mapa &lt;- dfc %&gt;% filter(periodo %in% c(1955, 1975, 2000, 2021)) %&gt;%\n  filter(`comunidad`!= \"total\")\n\n\ndf_mapa &lt;- left_join(df_ccaa, df_datos_mapa, by = c(\"comunidad\" = \"comunidad\"))\n\n### Mapa para el paro \n\ndf_mapa_ccaa1 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(paro_ccaa_4 = ntile(tasa_desempleo, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(paro_ccaa_4 = forcats::as_factor(paro_ccaa_4))\n\npc &lt;- ggplot(df_mapa_ccaa1) +\n  geom_sf(aes(geometry = geometry, fill = paro_ccaa_4)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"Tasa de desempleo por cuartiles\" , caption = \"Fuente: FEDEA\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\npc\n\n\n\n\n\n\n\n\n\n\nCódigo#### Mapa coroplético desempleo y PIB \n\nnuevos_nombres2 &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Baleares\", \"Canarias\", \n                     \"Cantabria\", \"Castilla y León\", \"Castilla-La Mancha\", \"Cataluña\", \n                     \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Madrid\", \n                     \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta\", \"Melilla\")\ndfc &lt;- df %&gt;%\n  distinct(comunidad) %&gt;%\n  mutate(nuevos_nombres = nuevos_nombres2)\n\ndfc &lt;- left_join(df, dfc, by = \"comunidad\")\n\ndfc &lt;- dfc %&gt;%\n  select(nuevos_nombres, periodo, F_PIB_real_2016, f_parados, f_ocupados, f_población) %&gt;%\n  mutate(tasa_desempleo =  f_parados/(f_parados + f_ocupados)*100) %&gt;%\n  mutate(pibpc= F_PIB_real_2016/f_población) %&gt;%\n  select(nuevos_nombres, periodo, pibpc, tasa_desempleo) %&gt;%\n  rename(comunidad = nuevos_nombres)\n\n\n#Obtenemos el mapa de España por CCAA\ndf_ccaa &lt;- esp_get_ccaa()%&gt;%\n  select(ccaa.shortname.es, geometry) %&gt;%\n  rename(\"comunidad\" = ccaa.shortname.es)\n\ndf_datos_mapa &lt;- dfc %&gt;% filter(periodo %in% c(1955, 1975, 2000, 2021)) %&gt;%\n  filter(`comunidad`!= \"total\")\n\n\ndf_mapa &lt;- left_join(df_ccaa, df_datos_mapa, by = c(\"comunidad\" = \"comunidad\"))\n\n### Mapa para el paro \n\ndf_mapa_ccaa1 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(paro_ccaa_4 = ntile(tasa_desempleo, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(paro_ccaa_4 = forcats::as_factor(paro_ccaa_4))\n\npc &lt;- ggplot(df_mapa_ccaa1) +\n  geom_sf(aes(geometry = geometry, fill = paro_ccaa_4)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"Tasa de desempleo por cuartiles\" , caption = \"Fuente: FEDEA\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\n\n\n\n\n\nEn este análisis, exploraremos la evolución de la renta per cápita en España mediante cuatro mapas interactivos correspondientes a los años 1955, 1975, 2000 y 2021. Estos mapas nos brindarán una representación visual dinámica de cómo ha variado el Producto Interno Bruto (PIB) per cápita en cada Comunidad Autónoma a lo largo de décadas clave.\nContrastando con el análisis de la Tasa de Desempleo, se observa una tendencia consistente a lo largo del tiempo: las Comunidades Autónomas del norte de España, con tasas de desempleo históricamente más bajas, exhiben mayores niveles de PIB per cápita. Por otro lado, las Comunidades Autónomas del sur, con tasas de desempleo históricamente más altas, presentan niveles más bajos de PIB per cápita.\nEstas correlaciones reflejan la interconexión entre el empleo y la producción económica a nivel regional. Factores históricos, inversiones en infraestructura, desarrollo industrial y políticas económicas pueden explicar estas disparidades. Al analizar conjuntamente los mapas de desempleo y PIB per cápita, se obtiene una comprensión más completa de cómo los aspectos económicos y laborales han influido en el desarrollo regional de España a lo largo de los años.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Mapa para el PIB\n\ndf_mapa_ccaa2 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(pibpc = ntile(pibpc, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(pibpc = forcats::as_factor(pibpc))\n\npc2 &lt;- ggplot(df_mapa_ccaa2) +\n  geom_sf(aes(geometry = geometry, fill = pibpc)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"PIBpc real por cuartiles\" , caption = \"Fuente: FEDEA\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\npc2\n\n\n\n\n\n\n\n\n\n\nCódigo### Mapa para el PIB\n\ndf_mapa_ccaa2 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(pibpc = ntile(pibpc, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(pibpc = forcats::as_factor(pibpc))\n\npc2 &lt;- ggplot(df_mapa_ccaa2) +\n  geom_sf(aes(geometry = geometry, fill = pibpc)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"PIBpc real por cuartiles\" , caption = \"Fuente: FEDEA\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\n\n\n\n\n\n\nEn esta sección, presentaremos una tabla detallada que muestra la Inflación Interanual por Comunidades Autónomas desde el año 1956. La medida de inflación utilizada es el Deflactor del PIB, calculado a través de la tasa de crecimiento del deflactor. Esta herramienta nos permite evaluar cómo los precios han variado en cada región a lo largo del tiempo, proporcionando una visión integral de la dinámica inflacionaria a nivel autonómico.\nEl Deflactor del PIB es una métrica relevante que ajusta el PIB nominal al valor real, teniendo en cuenta las variaciones en los precios. Al calcular la tasa de inflación interanual, se capturan los cambios porcentuales en el nivel general de precios en cada Comunidad Autónoma. Este análisis permitirá identificar patrones inflacionarios, evaluar la estabilidad económica y entender las variaciones regionales en los costos de bienes y servicios a lo largo del tiempo.\n\n\nTabla\nCódigo\n\n\n\n\nCódigonuevos_nombres &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Islas Baleares\", \"Islas Canarias\", \n                    \"Cantabria\", \"Castilla y León\", \"Castilla - La Mancha\", \"Cataluña\", \n                    \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Comunidad de Madrid\", \n                    \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta y Melilla\", \"Total\")\n\n\ndf20 &lt;- df %&gt;% \n  select(comunidad, periodo, f_deflactor_pib) %&gt;%\n  group_by(comunidad) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100) %&gt;%\n  ungroup() %&gt;%\n  pivot_wider(names_from = periodo, values_from = f_deflactor_pib) %&gt;%\n  mutate(comunidad = nuevos_nombres) %&gt;%\n  mutate(across(where(is.numeric), ~round(., digits = 2))) \n\ndf20 &lt;- df20[, -2]\n\n\ndf20%&gt;%  \n  gt(rowname_col = \"comunidad\") %&gt;% \n  tab_header(title = \"Inflación interanual con el Deflactor del PIB por CCAA\", \n             subtitle = \"Valores expresados en porcentaje (%)\")  %&gt;% \n  tab_source_note(md(\"Fuente: [Fedea](https://fedea.net/angel-de-la-fuente/)\")) %&gt;%\n  gtExtras::gt_theme_pff() \n\n\n\n\n\n\n\nInflación interanual con el Deflactor del PIB por CCAA\n    \n\nValores expresados en porcentaje (%)\n    \n\n\n      1956\n      1957\n      1958\n      1959\n      1960\n      1961\n      1962\n      1963\n      1964\n      1965\n      1966\n      1967\n      1968\n      1969\n      1970\n      1971\n      1972\n      1973\n      1974\n      1975\n      1976\n      1977\n      1978\n      1979\n      1980\n      1981\n      1982\n      1983\n      1984\n      1985\n      1986\n      1987\n      1988\n      1989\n      1990\n      1991\n      1992\n      1993\n      1994\n      1995\n      1996\n      1997\n      1998\n      1999\n      2000\n      2001\n      2002\n      2003\n      2004\n      2005\n      2006\n      2007\n      2008\n      2009\n      2010\n      2011\n      2012\n      2013\n      2014\n      2015\n      2016\n      2017\n      2018\n      2019\n      2020\n      2021\n    \n\n\n\nAndalucía\n7.15\n12.54\n11.20\n5.68\n2.55\n0.86\n5.57\n8.07\n7.69\n9.45\n8.55\n8.91\n6.00\n5.22\n6.39\n8.30\n8.49\n11.81\n16.45\n17.29\n16.40\n23.28\n21.12\n17.40\n13.34\n12.50\n13.75\n11.60\n11.48\n7.55\n10.93\n5.72\n5.80\n7.24\n7.99\n7.02\n5.78\n4.09\n4.28\n3.69\n3.38\n1.35\n1.90\n2.68\n2.96\n4.35\n4.31\n4.66\n4.65\n4.99\n3.85\n2.99\n2.11\n-0.51\n0.13\n-0.38\n-0.01\n0.57\n-0.36\n1.32\n-0.18\n2.03\n0.76\n0.92\n1.19\n2.42\n\n\nAragón\n7.21\n12.61\n11.08\n5.57\n2.94\n1.25\n5.22\n7.72\n7.42\n9.17\n7.05\n7.40\n6.39\n5.61\n5.75\n7.64\n8.77\n12.10\n16.13\n16.97\n16.28\n23.16\n19.82\n16.13\n13.83\n12.98\n13.86\n11.70\n11.43\n7.51\n11.11\n5.89\n5.49\n6.92\n5.98\n8.01\n5.61\n4.32\n4.50\n3.31\n3.14\n2.46\n2.36\n2.45\n2.72\n4.15\n4.39\n3.74\n3.84\n4.12\n4.10\n3.93\n2.74\n-0.73\n-1.20\n0.39\n0.34\n-0.08\n-0.39\n0.07\n0.88\n1.73\n0.78\n2.26\n2.03\n2.53\n\n\nAsturias\n7.95\n13.38\n10.04\n4.58\n2.14\n0.47\n4.20\n6.68\n7.45\n9.21\n7.69\n8.04\n6.10\n5.32\n6.48\n8.38\n7.40\n10.69\n16.11\n16.95\n16.50\n23.39\n17.76\n14.13\n13.04\n12.20\n16.09\n13.89\n11.58\n7.66\n12.47\n7.18\n5.41\n6.84\n8.28\n5.94\n5.21\n4.87\n4.21\n6.04\n3.08\n0.96\n3.90\n2.12\n4.07\n3.97\n4.00\n3.53\n4.52\n5.37\n4.69\n3.78\n2.41\n1.07\n1.10\n-0.42\n-0.45\n-0.05\n-0.12\n0.76\n0.06\n2.00\n1.30\n0.78\n0.77\n4.43\n\n\nIslas Baleares\n5.59\n10.90\n11.84\n6.28\n2.00\n0.33\n5.80\n8.32\n8.03\n9.80\n7.94\n8.30\n5.79\n5.01\n6.51\n8.41\n8.28\n11.59\n16.59\n17.43\n16.80\n23.71\n22.09\n18.34\n11.94\n11.11\n15.62\n13.43\n12.56\n8.59\n12.18\n6.91\n6.58\n8.03\n5.01\n7.93\n6.80\n3.94\n5.04\n3.60\n3.60\n3.79\n4.77\n4.75\n6.25\n5.70\n5.34\n3.99\n4.57\n4.19\n4.71\n3.31\n2.74\n-0.06\n-3.30\n-0.37\n0.12\n1.35\n0.14\n1.42\n1.06\n2.01\n1.53\n1.60\n0.46\n4.64\n\n\nIslas Canarias\n9.19\n14.69\n11.41\n5.88\n2.46\n0.78\n4.97\n7.46\n7.17\n8.92\n8.46\n8.82\n5.93\n5.15\n6.39\n8.30\n7.51\n10.79\n17.02\n17.86\n17.38\n24.32\n22.84\n19.06\n12.52\n11.68\n14.39\n12.22\n12.09\n8.15\n12.33\n7.06\n6.03\n7.47\n9.32\n7.99\n6.48\n6.34\n3.32\n4.24\n3.65\n3.26\n3.17\n4.09\n4.16\n4.19\n4.69\n3.82\n3.90\n3.99\n4.01\n2.89\n2.57\n-0.30\n-0.76\n0.49\n-0.54\n0.74\n-0.10\n0.27\n0.26\n1.33\n1.50\n1.18\n1.13\n3.23\n\n\nCantabria\n7.49\n12.90\n11.06\n5.55\n2.79\n1.10\n4.93\n7.42\n7.44\n9.20\n7.89\n8.25\n5.42\n4.65\n5.41\n7.29\n8.15\n11.46\n14.58\n15.40\n15.88\n22.73\n20.13\n16.43\n14.38\n13.53\n13.49\n11.34\n11.18\n7.27\n11.14\n5.92\n5.58\n7.01\n7.79\n8.04\n7.31\n3.38\n3.96\n5.49\n3.58\n2.31\n2.65\n3.20\n3.82\n4.01\n4.30\n4.24\n4.69\n4.94\n4.13\n4.26\n2.92\n-0.17\n0.26\n0.73\n-0.98\n0.38\n0.24\n-0.34\n0.58\n0.79\n1.79\n1.82\n1.12\n2.10\n\n\nCastilla y León\n6.21\n11.55\n9.54\n4.10\n2.01\n0.34\n5.24\n7.73\n6.57\n8.31\n7.43\n7.79\n5.68\n4.91\n5.58\n7.47\n7.85\n11.15\n16.56\n17.40\n15.90\n22.75\n20.16\n16.46\n13.33\n12.48\n14.68\n12.50\n10.81\n6.91\n10.25\n5.07\n5.52\n6.96\n5.97\n9.47\n6.23\n4.03\n1.99\n7.84\n2.91\n2.27\n2.50\n2.54\n2.79\n4.07\n3.46\n3.82\n3.94\n3.98\n3.47\n3.51\n1.77\n-0.34\n-0.46\n-0.21\n0.75\n-0.48\n-0.13\n0.64\n0.05\n1.11\n1.51\n1.57\n0.48\n1.66\n\n\nCastilla - La Mancha\n8.03\n13.47\n9.43\n4.00\n2.11\n0.44\n4.88\n7.37\n5.01\n6.72\n7.39\n7.74\n5.25\n4.47\n4.99\n6.87\n9.08\n12.42\n16.88\n17.72\n15.30\n22.12\n20.00\n16.31\n13.36\n12.51\n13.24\n11.09\n10.69\n6.79\n10.33\n5.15\n5.76\n7.20\n7.68\n7.16\n6.52\n6.38\n3.23\n4.95\n2.61\n2.03\n2.77\n2.86\n2.83\n4.37\n3.27\n4.52\n3.28\n4.74\n3.48\n3.12\n1.58\n-0.25\n-0.05\n0.76\n1.80\n-1.80\n-0.83\n0.86\n-0.69\n2.21\n0.82\n1.55\n0.56\n2.58\n\n\nCataluña\n6.03\n11.37\n10.43\n4.95\n2.75\n1.06\n4.90\n7.39\n7.44\n9.20\n7.77\n8.13\n5.83\n5.05\n5.93\n7.82\n8.36\n11.67\n15.59\n16.43\n16.36\n23.24\n20.14\n16.45\n13.52\n12.67\n13.81\n11.65\n11.89\n7.95\n10.78\n5.58\n5.40\n6.83\n5.06\n6.53\n6.72\n3.75\n4.20\n5.39\n4.14\n2.78\n2.18\n2.77\n3.51\n4.12\n4.25\n4.19\n3.99\n4.06\n4.40\n3.54\n2.64\n0.07\n-2.05\n0.44\n0.50\n0.41\n0.05\n0.19\n0.67\n1.29\n1.36\n1.75\n1.71\n2.09\n\n\nComunidad Valenciana\n6.51\n11.87\n10.97\n5.46\n2.70\n1.02\n4.78\n7.26\n7.27\n9.02\n7.87\n8.23\n5.86\n5.08\n6.02\n7.91\n8.36\n11.67\n15.94\n16.78\n16.32\n23.20\n20.73\n17.01\n13.87\n13.02\n13.45\n11.30\n11.47\n7.55\n11.42\n6.18\n5.69\n7.13\n7.33\n6.24\n7.60\n5.13\n3.45\n2.91\n3.95\n2.15\n2.05\n2.64\n3.12\n4.19\n4.36\n4.31\n4.09\n4.37\n4.41\n3.41\n2.47\n0.09\n-0.80\n0.30\n-0.37\n0.23\n0.04\n0.16\n0.50\n0.90\n1.56\n1.45\n1.66\n1.89\n\n\nExtremadura\n8.54\n14.00\n10.70\n5.21\n2.19\n0.51\n4.11\n6.59\n6.50\n8.24\n7.58\n7.94\n5.81\n5.04\n5.65\n7.54\n9.56\n12.91\n16.10\n16.94\n16.08\n22.94\n19.41\n15.74\n12.94\n12.09\n14.23\n12.07\n11.23\n7.31\n11.47\n6.23\n5.96\n7.40\n8.68\n6.21\n7.40\n4.21\n5.41\n2.07\n3.06\n1.09\n2.60\n2.70\n2.73\n3.99\n3.19\n3.72\n3.80\n5.09\n2.51\n3.16\n2.04\n0.46\n-1.94\n-0.97\n-0.53\n0.46\n-0.32\n1.82\n1.74\n1.94\n1.00\n0.27\n1.69\n1.83\n\n\nGalicia\n7.51\n12.92\n11.01\n5.50\n3.17\n1.48\n5.02\n7.52\n6.81\n8.56\n8.38\n8.74\n5.34\n4.57\n6.01\n7.91\n8.39\n11.70\n16.45\n17.29\n16.34\n23.22\n20.60\n16.89\n13.18\n12.33\n13.54\n11.39\n11.36\n7.45\n11.50\n6.26\n5.77\n7.21\n9.05\n6.01\n6.73\n4.00\n2.87\n6.82\n3.03\n2.41\n2.78\n2.24\n3.36\n3.90\n4.22\n4.25\n3.99\n4.72\n3.98\n3.36\n2.19\n0.09\n-0.02\n0.03\n-0.47\n1.05\n-0.12\n0.03\n-0.12\n1.07\n1.28\n1.47\n0.43\n2.62\n\n\nComunidad de Madrid\n7.12\n12.51\n12.14\n6.58\n3.52\n1.82\n6.65\n9.18\n9.54\n11.33\n10.22\n10.59\n6.49\n5.71\n6.44\n8.35\n9.28\n12.62\n16.41\n17.25\n17.41\n24.35\n21.87\n18.12\n13.40\n12.55\n13.99\n11.82\n12.21\n8.26\n10.82\n5.61\n5.69\n7.12\n9.71\n6.62\n8.21\n4.65\n4.47\n5.42\n3.44\n2.59\n2.39\n2.65\n3.69\n4.32\n4.72\n3.92\n3.65\n3.51\n4.24\n3.26\n2.47\n0.90\n-2.18\n-0.13\n-0.04\n0.35\n-0.31\n0.73\n0.43\n0.79\n1.20\n1.47\n1.37\n1.95\n\n\nMurcia\n7.63\n13.04\n11.00\n5.49\n3.12\n1.43\n4.74\n7.22\n6.59\n8.33\n8.50\n8.86\n5.94\n5.16\n6.17\n8.07\n8.05\n11.35\n17.38\n18.23\n16.74\n23.65\n20.90\n17.18\n13.33\n12.49\n13.48\n11.33\n11.56\n7.63\n11.55\n6.30\n5.46\n6.89\n7.31\n11.42\n5.95\n2.73\n4.14\n3.99\n2.95\n2.34\n1.87\n2.54\n4.38\n4.43\n4.92\n4.85\n4.39\n5.19\n3.99\n3.18\n2.37\n-0.37\n3.85\n-1.22\n0.41\n1.22\n-1.65\n-0.49\n-1.12\n0.80\n1.86\n1.62\n1.15\n3.22\n\n\nNavarra\n6.46\n11.82\n11.54\n6.00\n2.73\n1.05\n6.28\n8.81\n6.41\n8.15\n8.30\n8.66\n5.52\n4.75\n5.59\n7.48\n9.56\n12.91\n13.86\n14.68\n16.19\n23.06\n20.25\n16.55\n13.50\n12.65\n13.31\n11.17\n11.23\n7.32\n11.04\n5.82\n5.65\n7.09\n4.29\n10.26\n8.83\n2.95\n3.49\n5.81\n3.65\n2.63\n1.45\n2.24\n2.67\n3.78\n3.99\n3.64\n3.51\n4.55\n3.43\n3.14\n2.35\n0.50\n-0.75\n-0.20\n-0.25\n0.54\n-0.25\n0.33\n0.50\n0.62\n0.91\n1.75\n1.22\n1.62\n\n\nPaís Vasco\n7.33\n12.73\n10.39\n4.91\n2.43\n0.75\n5.07\n7.56\n7.24\n8.99\n7.06\n7.41\n6.25\n5.47\n5.34\n7.22\n9.25\n12.59\n13.56\n14.38\n16.21\n23.09\n19.75\n16.07\n14.26\n13.41\n13.61\n11.46\n11.48\n7.56\n11.03\n5.82\n5.43\n6.86\n7.96\n6.97\n7.55\n4.41\n4.87\n3.88\n3.80\n2.25\n2.34\n2.71\n3.41\n3.71\n4.21\n3.81\n4.09\n4.37\n4.45\n3.51\n2.88\n-0.25\n-0.25\n0.01\n-0.43\n0.46\n0.03\n-0.04\n0.39\n1.33\n1.27\n1.44\n0.40\n2.33\n\n\nLa Rioja\n7.59\n13.00\n10.94\n5.44\n3.28\n1.59\n5.27\n7.77\n6.49\n8.22\n7.54\n7.89\n5.32\n4.55\n5.26\n7.14\n8.79\n12.11\n15.40\n16.23\n16.10\n22.97\n20.77\n17.06\n13.19\n12.35\n13.38\n11.23\n10.70\n6.81\n10.67\n5.47\n5.72\n7.16\n-4.93\n7.12\n5.60\n3.16\n5.28\n3.84\n2.46\n3.06\n2.84\n3.57\n2.99\n4.36\n3.67\n4.39\n2.67\n3.94\n3.93\n3.02\n2.07\n0.03\n-1.23\n0.78\n0.45\n1.37\n1.04\n-0.08\n-1.77\n2.70\n1.67\n1.36\n0.92\n1.59\n\n\nCeuta y Melilla\n7.97\n13.41\n12.47\n6.89\n2.91\n1.22\n7.90\n10.46\n10.05\n11.84\n13.30\n13.67\n7.49\n6.71\n7.79\n9.72\n7.98\n11.28\n17.80\n18.65\n18.27\n25.27\n22.66\n18.88\n14.15\n13.30\n14.63\n12.46\n11.81\n7.88\n11.56\n6.32\n5.55\n6.98\n4.03\n14.64\n5.60\n1.67\n4.19\n12.23\n3.29\n3.16\n4.68\n3.16\n2.75\n3.16\n4.49\n3.85\n4.40\n3.85\n4.92\n3.20\n2.15\n1.25\n-0.32\n-0.45\n-1.43\n1.23\n-0.40\n0.87\n0.56\n-1.10\n1.56\n1.73\n2.53\n1.72\n\n\nTotal\n6.92\n12.31\n10.83\n5.33\n2.63\n0.96\n5.28\n7.78\n7.40\n9.17\n8.17\n8.53\n5.91\n5.14\n5.95\n7.84\n8.52\n11.84\n15.95\n16.78\n16.49\n23.38\n20.63\n16.93\n13.42\n12.57\n13.93\n11.76\n11.62\n7.69\n11.07\n5.85\n5.65\n7.09\n7.31\n7.11\n6.87\n4.34\n3.99\n4.82\n3.52\n2.32\n2.40\n2.75\n3.43\n4.20\n4.31\n4.14\n4.02\n4.29\n4.12\n3.34\n2.40\n0.08\n-0.98\n0.03\n0.07\n0.36\n-0.19\n0.51\n0.29\n1.30\n1.25\n1.45\n1.23\n2.30\n\n\n\nFuente: Fedea\n\n    \n\n\n\n\n\n\n\nCódigodf20 &lt;- df %&gt;% \n  select(comunidad, periodo, f_deflactor_pib) %&gt;%\n  group_by(comunidad) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100) %&gt;%\n  ungroup() %&gt;%\n  pivot_wider(names_from = periodo, values_from = f_deflactor_pib) %&gt;%\n  mutate(comunidad = nuevos_nombres) %&gt;%\n  mutate(across(where(is.numeric), ~round(., digits = 2))) \n\ndf20 &lt;- df20[, -2]\n\n\n\n\n\n\nLas Curvas de Phillips son representaciones gráficas que exploran la relación inversa entre la tasa de inflación y la tasa de desempleo en una economía. Esta relación es fundamental en la teoría macroeconómica y proporciona insights valiosos sobre las dinámicas del mercado laboral y los efectos de las políticas económicas.\nEn términos generales, la Curva de Phillips sugiere que existe una relación de trade-off entre inflación y desempleo en el corto plazo. Esto significa que cuando la tasa de desempleo es baja, la inflación tiende a ser alta, y viceversa. Esta relación implica que las autoridades económicas pueden elegir entre tener una tasa de desempleo más baja a expensas de una inflación más alta, o viceversa.\nSin embargo, es importante destacar que esta relación puede ser afectada por diversos factores a largo plazo, como las expectativas inflacionarias y las condiciones estructurales del mercado laboral. A lo largo del tiempo, las Curvas de Phillips pueden cambiar de forma debido a cambios en la estructura económica, las políticas gubernamentales y las expectativas de los agentes económicos.\nA continuación, exploraremos Curvas de Phillips específicas para la economía española y un par de sus provincias en diferentes momentos del tiempo. Analizar estas curvas nos permitirá comprender cómo ha evolucionado la relación entre inflación y desempleo, proporcionando información valiosa sobre la dinámica económica a lo largo de los años.\n\nEn el análisis de las Curvas de Phillips para la economía española en distintos periodos, se observan tendencias y cambios significativos en la relación entre la tasa de inflación y la tasa de desempleo.\nCurva de Phillips 1978-2000: Durante este periodo, la curva exhibe una pendiente más pronunciada, indicando que pequeñas variaciones en la tasa de desempleo estaban asociadas con cambios más notables en la tasa de inflación. Este fenómeno podría atribuirse a la introducción de políticas económicas y monetarias, así como a factores como las expectativas inflacionarias más sensibles a las fluctuaciones en el mercado laboral.\nCurva de Phillips 2000-2021: En contraste, la curva correspondiente a este periodo presenta una pendiente menos pronunciada, sugiriendo que variaciones en la tasa de desempleo generaban cambios más moderados en la tasa de inflación. Factores como la estabilidad financiera, la globalización y cambios en la estructura del mercado laboral podrían haber contribuido a esta menor sensibilidad entre inflación y desempleo.\nCurva de Phillips 1978-2021: Esta curva, abarcando el periodo completo, muestra una pendiente intermedia entre las dos anteriores. Indica una tendencia general a lo largo de estas décadas, sugiriendo que la relación entre inflación y desempleo ha experimentado cambios. Factores estructurales a largo plazo, como la evolución de las políticas económicas y las expectativas del mercado, han influido en esta dinámica más moderada.\nLa tendencia a que la Curva de Phillips se haya aplanado en la economía española puede explicarse por diversos factores económicos y estructurales a lo largo del tiempo. En primer lugar, la evolución de las expectativas inflacionarias ha influido en la respuesta de los agentes económicos a cambios en la tasa de desempleo. Asimismo, la implementación de políticas económicas más efectivas y la estabilidad financiera pueden haber mitigado la sensibilidad de la inflación ante variaciones en el empleo. Además, la integración económica y la globalización han introducido nuevas dinámicas que pueden haber alterado la relación tradicional entre inflación y desempleo. Estos elementos, combinados con cambios en la estructura del mercado laboral y la madurez de la economía española, contribuyen a la percepción de que la Curva de Phillips ha experimentado un aplanamiento, reflejando una mayor complejidad y moderación en la relación entre estos dos indicadores clave.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Curvas de Phillips \n\n\n# Crear columnas para los grupos de periodos\ndf10 &lt;- df %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100)\n  \n  \n  df10 &lt;- df10 %&gt;%\n  mutate(periodo_grupo = case_when(\n    periodo &gt;= 1977 & periodo &lt;= 2000 ~ \"1977-2000\",\n    periodo &gt; 2000 & periodo &lt;= 2021 ~ \"2000-2021\",\n    periodo &gt;= 1977 & periodo &lt;= 2021 ~ \"1977-2021\",\n    TRUE ~ \"Otro\"\n  ))\n\n# Gráfico de la Curva de Phillips con líneas para diferentes periodos\np_phillips &lt;- ggplot(df10, aes(x = b_tasa_paro, y = f_deflactor_pib, color = periodo_grupo)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  annotate('text', x = 7, y = 17, label = '1978-2000', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 9, y = 6, label = '2000-2021', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 7.5, y = 11, label = '1978-2021', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  labs(title = \"Curva de Phillips\",\n       subtitle = \"La Curva de Phillips representa la relación entre la tasa de desempleo y la inflación.\\n¿Cómo ha evolucionado en España?\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: FEDEA',\n       color = 'Periodo') +\n  scale_color_manual(values = c('#d1495b', '#00798c', '#fd5532')) +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\n# Añadir una capa de regresión para todo el conjunto de datos (discontinua)\np_phillips &lt;- p_phillips +\n  geom_smooth(aes(group = 1), method = 'lm', se = FALSE, linetype = 2, color = 'black')\n\nprint(p_phillips)\n\n\n\n\n\n\n\n\n\n\nCódigo### Curvas de Phillips \n\n\n# Crear columnas para los grupos de periodos\ndf10 &lt;- df %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100)\n  \n  \n  df10 &lt;- df10 %&gt;%\n  mutate(periodo_grupo = case_when(\n    periodo &gt;= 1977 & periodo &lt;= 2000 ~ \"1977-2000\",\n    periodo &gt; 2000 & periodo &lt;= 2021 ~ \"2000-2021\",\n    periodo &gt;= 1977 & periodo &lt;= 2021 ~ \"1977-2021\",\n    TRUE ~ \"Otro\"\n  ))\n\n# Gráfico de la Curva de Phillips con líneas para diferentes periodos\np_phillips &lt;- ggplot(df10, aes(x = b_tasa_paro, y = f_deflactor_pib, color = periodo_grupo)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  annotate('text', x = 7, y = 17, label = '1978-2000', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 9, y = 6, label = '2000-2021', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 7.5, y = 11, label = '1978-2021', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  labs(title = \"Curva de Phillips\",\n       subtitle = \"La Curva de Phillips representa la relación entre la tasa de desempleo y la inflación.\\n¿Cómo ha evolucionado en España?\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: FEDEA',\n       color = 'Periodo') +\n  scale_color_manual(values = c('#d1495b', '#00798c', '#fd5532')) +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\n# Añadir una capa de regresión para todo el conjunto de datos (discontinua)\np_phillips &lt;- p_phillips +\n  geom_smooth(aes(group = 1), method = 'lm', se = FALSE, linetype = 2, color = 'black')\n\n\n\n\n\n\nEn este análisis, realizamos una comparación entre las Curvas de Phillips para España, Madrid y Andalucía. Estas representaciones gráficas exploran la relación entre la tasa de inflación y la tasa de desempleo en tres contextos diferentes: a nivel nacional, en la comunidad autónoma más rica (Madrid) y en una de las comunidades con mayores desafíos económicos (Andalucía).\nCurva de Phillips para España: La Curva de Phillips a nivel nacional refleja la relación histórica entre inflación y desempleo en el conjunto de la economía española.\nCurva de Phillips para Madrid: En el caso de Madrid, una de las comunidades más prósperas, la curva exhibe una pendiente más plana en comparación con la curva nacional. Esto sugiere que las variaciones en la tasa de desempleo en Madrid están asociadas con cambios menos pronunciados en la tasa de inflación.\nCurva de Phillips para Andalucía: Contrastando con Madrid, la Curva de Phillips para Andalucía muestra una pendiente similar a la curva nacional, pero con niveles de desempleo más elevados. Esto indica que, aunque la sensibilidad entre inflación y desempleo es parecida a nivel nacional, Andalucía enfrenta mayores desafíos en términos de empleo.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Comunidades CP\n\n# Filtrar datos por comunidades específicas y periodo\ndf_comunidades &lt;- df %&gt;% \n  filter(comunidad %in% c(\"mad\", \"and\", \"total\"), periodo &gt;= 1977 & periodo &lt;= 2021) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  group_by(comunidad) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100) %&gt;%\n  ungroup()\n\n# Gráfico de la Curva de Phillips con una regresión para cada comunidad\np_phillips_comunidades &lt;- ggplot(df_comunidades, aes(x = b_tasa_paro, y = f_deflactor_pib, color = comunidad)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  annotate('text', x = 33, y = 5, label = 'Andalucía', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 8, y = 11, label = 'España', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 6, y = 5, label = 'Madrid', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  labs(title = \"Curva de Phillips por Comunidad Autónoma\",\n       subtitle = \"Relación entre la tasa de desempleo y la inflación (1977-2021)\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: FEDEA',\n       color = 'Comunidad Autónoma') +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\nprint(p_phillips_comunidades)\n\n\n\n\n\n\n\n\n\n\nCódigo### Comunidades CP\n\n# Filtrar datos por comunidades específicas y periodo\ndf_comunidades &lt;- df %&gt;% \n  filter(comunidad %in% c(\"mad\", \"and\", \"total\"), periodo &gt;= 1977 & periodo &lt;= 2021) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  group_by(comunidad) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100) %&gt;%\n  ungroup()\n\n# Gráfico de la Curva de Phillips con una regresión para cada comunidad\np_phillips_comunidades &lt;- ggplot(df_comunidades, aes(x = b_tasa_paro, y = f_deflactor_pib, color = comunidad)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  annotate('text', x = 33, y = 5, label = 'Andalucía', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 8, y = 11, label = 'España', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 6, y = 5, label = 'Madrid', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  labs(title = \"Curva de Phillips por Comunidad Autónoma\",\n       subtitle = \"Relación entre la tasa de desempleo y la inflación (1977-2021)\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: FEDEA',\n       color = 'Comunidad Autónoma') +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\n\n\n\n\n\nEn resumen, este análisis exhaustivo de los agregados macroeconómicos para España proporciona una visión integral de la evolución económica a lo largo de décadas. Desde el análisis del PIB hasta la relación entre inflación y desempleo a través de las Curvas de Phillips, cada sección revela tendencias y determinantes clave. Las comparaciones entre comunidades autónomas, como Madrid y Andalucía, resaltan disparidades regionales en la interacción entre indicadores económicos fundamentales.\nLa utilización de herramientas de programación en R y Quarto ha permitido una exploración profunda y visualmente impactante de los datos macroeconómicos. La observación de cambios significativos en la sensibilidad de la Curva de Phillips a lo largo del tiempo y las diferencias regionales subrayan la riqueza de la economía española en su complejidad y dinamismo.\nQuiero expresar mi agradecimiento por este trabajo, que ha sido fundamental en mi proceso de aprendizaje en la asignatura “Programación y manejo de datos en la era del Big Data”. Este análisis no solo me ha proporcionado valiosas habilidades en R, sino que también ha contribuido significativamente a mi preparación para enfrentar desafíos en mi futuro profesional.\n\n\nÁngel de la Fuente. (n.d.). Retrieved from https://fedea.net/angel-de-la-fuente/\nAMECO Database. (n.d.). Retrieved from https://economy-finance.ec.europa.eu/economic-research-and-databases/economic-databases/ameco-database_en\nBdeMores. (n.d.). Retrieved from https://www.sepg.pap.hacienda.gob.es/sitios/sepg/es-ES/Presupuestos/DocumentacionEstadisticas/Documentacion/paginas/basesdatosestudiosregionales.aspx"
  },
  {
    "objectID": "my_trabajo_BigData.html#intro",
    "href": "my_trabajo_BigData.html#intro",
    "title": "Agregados Macroeconómicos para España",
    "section": "",
    "text": "Los datos se pueden cargar en la memoria de de R/RStudio de esta forma:\n\nCódigo#- 0) Librerías utilizadas -------------------------------------------------------\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(kableExtra)\nlibrary(ggplot2)\nlibrary(ggthemes)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(openxlsx)\nlibrary(countrycode)\nlibrary(ggimage)\nlibrary(gganimate)\nlibrary(lubridate)\nlibrary(sf)\nlibrary(mapSpain)\nlibrary(DT)\nlibrary(gt)\nlibrary(patchwork)\nlibrary(ggplot2)\nlibrary(ggtext)"
  },
  {
    "objectID": "my_trabajo_BigData.html#los-pingüinos-molan",
    "href": "my_trabajo_BigData.html#los-pingüinos-molan",
    "title": "Agregados Macroeconómicos para España",
    "section": "",
    "text": "Vamos a ver una foto de un pingüinos\n\nCódigo# Importar y arreglar los datos\nruta &lt;- \"./datos/spain.xlsx\"\ndf &lt;- rio::import(ruta) \ndf &lt;- df %&gt;%\n  slice(-1) %&gt;%\n  select(-c(24, 25, 26)) %&gt;%\n  mutate_at(vars(4:ncol(.)), as.numeric)\n\n#### PIB\n\n### Evolución del PIB y del PIB potencial \n\ndf1 &lt;- df %&gt;% \n  select(comunidad, periodo, PIB_real_2015, pib_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(PIB_real_2015 = round(PIB_real_2015, 3),\n         pib_potencial = round(pib_potencial, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Gráfico de la evolución del PIB real y potencial\n\np1 &lt;- ggplot(df1, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1) +\n  geom_point(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1) +\n  labs(title = \"Evolución del PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\") +\n  scale_color_manual(values = c(\"PIB Real\" = \"blue\", \"PIB Potencial\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\n# Crea la animación\np1\n\n\n\n\n\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\ndf2 &lt;- df %&gt;% \n  select(comunidad, periodo, diferencia_real_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(diferencia_real_potencial = round(diferencia_real_potencial, 3))\n\n# Crear el gráfico con etiquetas en el eje x en vertical\np2 &lt;- ggplot(df2, aes(x = periodo, y = diferencia_real_potencial, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\",size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_real_potencial), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Diferencia Real-Potencial\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10))\n\n# Mostrar el gráfico\nprint(p2)\n\n\n\n\n\n\n\n\n\nCódigo### Evolución del PIB per cápita \ndf3 &lt;- df %&gt;% \n  select(comunidad, periodo, f_deflactor_pib, F_PIB_real_2016, f_población) %&gt;%\n  filter(comunidad == \"total\") %&gt;%\n  mutate(pib_nominal = F_PIB_real_2016 * f_deflactor_pib ) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016*1000) %&gt;%\n  mutate(pib_nominal = pib_nominal*1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  mutate(pibpc_nominal = pib_nominal / f_población)\n\n# Crear el gráfico interactivo con barras y línea\np3 &lt;- ggplot(df3, aes(x = periodo, group = 1)) +\n  geom_bar(aes(y = pibpc_real, fill = \"PIB per cápita real\"), stat = \"identity\", position = \"dodge\", color = \"black\", alpha = 0.7) +\n  geom_ribbon(aes(ymin = 0, ymax = pibpc_nominal), fill = \"blue\", alpha = 0.1) +\n  geom_line(aes(y = pibpc_nominal, color = \"PIB per cápita nominal\"), size = 0.5) +\n  geom_point(aes(y = pibpc_nominal), color = \"blue\", size = 2) +\n  labs(title = \"Comparación entre PIB per cápita nominal y real\",\n       x = \"Año\",\n       y = \"PIB per cápita real\",\n       fill = \"Categoría\",\n       color = \"PIB per cápita nominal\",\n       caption = \"Elaboración propia a partir de datos\") +\n  scale_fill_manual(values = c(\"PIB per cápita real\" = \"#FF9999\")) +\n  scale_color_manual(values = c(\"PIB per cápita nominal\" = \"blue\")) +\n  theme_stata(base_family = \"\") +\n  theme(legend.position = \"bottom\", axis.text.x = element_text(angle = 90, hjust = 0.5))\n\n# Convertir a gráfico interactivo con plotly\np3 &lt;- ggplotly(p3)\n\n# Mostrar el gráfico interactivo\nprint(p3)\n\n\n\n\nCódigo### Tabla de scroll con pib pc real para las comunidades\n\nnuevos_nombres &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Islas Baleares\", \"Islas Canarias\", \n                    \"Cantabria\", \"Castilla y León\", \"Castilla - La Mancha\", \"Cataluña\", \n                    \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Comunidad de Madrid\", \n                    \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta y Melilla\", \"Total\")\n\n## Tabla que más me gusta \n\ndf4 &lt;- df %&gt;% \n  select(comunidad, periodo, F_PIB_real_2016, f_población) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016 * 1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  select(-c(3, 4)) %&gt;%\n  pivot_wider(names_from = periodo, values_from = pibpc_real) %&gt;% mutate(comunidad = nuevos_nombres)\n\ndf4 &lt;- df4 %&gt;% mutate(across(where(is.numeric), \\(x) round(x, digits = 2)))\n\ndf4 %&gt;%  \n  gt(rowname_col = \"comunidad\") %&gt;% tab_header(title = \"PIB per cápita por Comunidades Autónomas\", \n                                               subtitle = \"Euros constantes de 2015\")  %&gt;% \n  tab_source_note(md(\"Fuente: datos proveniente de la web [Fedea](https://fedea.net/angel-de-la-fuente/)\")) %&gt;%\n  gtExtras::gt_theme_pff() \n\n\n\n\n\n\n\nPIB per cápita por Comunidades Autónomas\n    \n\nEuros constantes de 2015\n    \n\n\n      1955\n      1956\n      1957\n      1958\n      1959\n      1960\n      1961\n      1962\n      1963\n      1964\n      1965\n      1966\n      1967\n      1968\n      1969\n      1970\n      1971\n      1972\n      1973\n      1974\n      1975\n      1976\n      1977\n      1978\n      1979\n      1980\n      1981\n      1982\n      1983\n      1984\n      1985\n      1986\n      1987\n      1988\n      1989\n      1990\n      1991\n      1992\n      1993\n      1994\n      1995\n      1996\n      1997\n      1998\n      1999\n      2000\n      2001\n      2002\n      2003\n      2004\n      2005\n      2006\n      2007\n      2008\n      2009\n      2010\n      2011\n      2012\n      2013\n      2014\n      2015\n      2016\n      2017\n      2018\n      2019\n      2020\n      2021\n    \n\n\n\nAndalucía\n3184.06\n3265.11\n3285.89\n3448.74\n3750.92\n3754.61\n3824.63\n4094.68\n4373.78\n4780.93\n4956.07\n5343.86\n5686.45\n6059.73\n6593.74\n7146.68\n7356.05\n7688.80\n8076.45\n8181.97\n8504.48\n8692.45\n8617.60\n8953.16\n9468.35\n9783.68\n9661.23\n9718.81\n9861.41\n9908.32\n10189.57\n10409.64\n10928.73\n11507.39\n12053.80\n12764.42\n13065.95\n13101.51\n12792.82\n13021.62\n13298.47\n13595.89\n14243.52\n14727.59\n15277.55\n16142.12\n16633.43\n17015.28\n17481.28\n17869.88\n18180.95\n18649.52\n19033.52\n18914.99\n18080.75\n17667.49\n17443.59\n16780.82\n16390.91\n16639.83\n17186.52\n17658.59\n18126.28\n18581.98\n18816.76\n16712.47\n17583.96\n\n\nAragón\n4203.82\n4419.74\n4560.46\n4790.45\n5214.93\n5245.02\n5349.36\n5784.49\n6239.33\n6736.98\n6897.13\n7399.38\n7832.52\n8273.62\n8922.18\n9414.06\n9471.40\n9845.47\n10284.78\n10564.08\n11136.20\n11361.72\n11241.29\n11900.82\n12826.95\n13301.98\n13214.67\n13423.35\n13758.91\n13871.92\n14304.66\n14800.30\n15727.42\n16658.20\n17554.28\n18250.45\n18595.54\n18791.26\n18466.53\n18690.98\n19303.46\n19888.07\n20665.40\n21097.05\n21610.41\n22661.37\n23291.02\n23927.94\n24457.65\n24938.29\n25460.68\n26163.40\n26878.51\n26643.95\n25524.50\n25677.42\n25183.57\n24127.08\n24277.66\n24629.96\n25108.10\n25981.40\n26628.33\n27331.23\n27407.28\n24907.01\n26368.51\n\n\nAsturias\n4744.79\n4875.23\n4911.64\n5130.79\n5553.95\n5526.27\n5599.83\n5996.17\n6406.29\n6924.15\n7097.82\n7661.33\n8161.67\n8626.48\n9310.72\n9730.72\n9680.04\n10170.00\n10739.93\n11058.81\n11684.28\n11549.31\n11077.16\n11810.92\n12814.74\n13325.65\n13295.79\n13040.61\n12901.82\n13005.60\n13412.43\n13474.53\n13912.75\n14385.16\n14802.23\n14855.28\n15246.45\n15912.19\n15342.00\n15701.28\n15952.83\n16248.94\n16704.18\n17440.43\n17570.37\n18344.69\n19042.61\n19485.63\n19980.88\n20434.70\n21085.03\n21981.25\n22680.40\n22844.44\n21322.89\n21265.04\n21001.55\n20203.16\n19652.25\n19746.04\n20449.02\n20918.35\n21509.25\n21947.67\n22323.83\n19963.27\n21204.95\n\n\nIslas Baleares\n6231.96\n6517.08\n6680.64\n7052.96\n7712.10\n7808.81\n7977.59\n8458.08\n8947.62\n9705.44\n9984.38\n10827.74\n11589.16\n12359.66\n13460.35\n14415.75\n14681.66\n15186.35\n15768.66\n15741.30\n16139.95\n16201.53\n15787.59\n16401.20\n17343.61\n18227.06\n18369.84\n18506.99\n18823.88\n19170.14\n19959.82\n20415.77\n21454.83\n22207.71\n22864.76\n24528.21\n25006.75\n25015.85\n24644.85\n24739.63\n25036.24\n25557.81\n26897.41\n27349.77\n28414.74\n28999.80\n29308.11\n28459.45\n27892.40\n27838.22\n27958.58\n27957.63\n27927.80\n27496.32\n25890.56\n25385.69\n25166.30\n24597.82\n23986.57\n24560.78\n25258.25\n26088.78\n26572.15\n26886.72\n26918.33\n20386.75\n22481.00\n\n\nIslas Canarias\n3735.63\n3959.18\n4126.20\n4273.75\n4577.04\n4525.23\n4549.25\n4908.73\n5284.79\n5799.59\n6036.15\n6600.64\n7123.66\n7636.70\n8359.85\n9232.29\n9682.30\n10160.44\n10719.02\n10614.35\n10802.18\n11007.59\n10893.88\n11622.63\n12628.39\n13166.65\n13152.48\n13122.05\n13209.70\n13205.48\n13513.66\n13869.76\n14629.50\n15436.11\n16192.57\n16157.89\n16279.66\n16782.69\n16857.28\n17250.68\n17491.69\n17723.49\n18279.16\n19117.60\n20164.53\n20599.21\n21349.38\n21215.50\n21430.68\n21381.46\n21476.82\n21602.70\n21782.75\n21379.21\n20165.78\n20110.60\n19699.94\n19017.89\n18608.16\n18652.93\n19114.49\n19608.96\n20169.18\n20362.09\n20420.84\n16342.97\n17479.28\n\n\nCantabria\n5079.42\n5251.58\n5321.15\n5625.07\n6160.65\n6141.94\n6213.74\n6623.24\n7044.01\n7595.51\n7767.67\n8284.32\n8720.07\n9189.68\n9889.50\n10555.61\n10732.20\n10951.40\n11224.46\n11574.62\n12248.90\n12451.91\n12279.59\n12877.34\n13754.81\n14129.58\n13900.03\n13858.20\n13941.20\n14009.82\n14407.07\n14623.16\n15249.05\n15933.04\n16563.06\n16576.08\n16447.43\n16695.61\n16313.69\n16669.42\n16839.02\n17051.28\n17623.65\n18464.06\n19230.23\n20146.56\n21035.44\n21559.58\n21726.02\n22058.07\n22549.66\n23104.29\n23531.39\n23395.16\n22271.10\n22074.08\n21454.60\n20943.27\n20275.89\n20642.84\n21253.88\n21904.75\n22593.54\n23058.30\n23329.69\n20871.72\n22001.76\n\n\nCastilla y León\n3102.04\n3238.82\n3318.96\n3478.68\n3779.67\n3785.86\n3868.26\n4233.23\n4621.83\n5090.55\n5316.98\n5707.40\n6045.86\n6454.18\n7035.09\n7536.35\n7668.56\n8020.52\n8428.12\n8600.57\n9007.90\n9242.45\n9199.64\n9712.88\n10433.21\n10834.70\n10755.93\n10819.12\n10977.14\n11197.95\n11687.08\n12185.33\n13059.04\n13719.70\n14338.27\n14758.71\n14837.96\n15051.97\n15330.34\n15752.81\n16024.23\n16322.86\n16620.30\n17076.69\n17741.19\n18454.03\n18960.00\n19582.24\n20094.49\n20620.28\n21158.80\n21812.07\n22409.77\n22413.90\n21763.87\n21846.02\n21726.86\n21036.84\n20667.84\n20874.54\n21571.73\n22407.20\n22878.50\n23664.87\n23874.41\n21887.39\n22941.17\n\n\nCastilla - La Mancha\n2456.58\n2577.68\n2654.32\n2802.80\n3065.77\n3066.38\n3135.44\n3433.56\n3751.51\n4151.28\n4356.50\n4717.27\n5041.06\n5500.17\n6127.84\n6702.69\n6949.68\n7439.34\n7996.81\n8130.48\n8484.84\n8738.60\n8733.82\n9188.48\n9831.96\n10087.97\n9887.23\n10053.11\n10311.90\n10515.89\n10971.93\n11355.29\n12070.80\n12922.08\n13760.94\n14262.39\n14559.97\n14691.30\n13997.93\n14169.67\n14340.03\n14865.66\n15333.87\n15963.54\n16290.41\n16972.03\n17497.64\n17987.04\n18321.18\n18633.95\n18904.09\n19389.86\n19820.64\n19806.19\n18911.27\n18639.66\n18162.69\n17279.69\n17283.16\n17160.75\n17915.36\n18751.71\n19200.25\n19827.69\n19875.40\n18300.31\n19134.86\n\n\nCataluña\n6663.59\n6824.54\n6849.72\n7171.18\n7767.20\n7821.92\n7969.70\n8405.21\n8844.05\n9497.41\n9672.10\n10202.82\n10621.36\n11082.51\n11807.45\n12424.28\n12526.24\n12975.45\n13497.04\n13818.70\n14508.26\n14550.79\n14164.80\n14654.16\n15446.29\n15849.49\n15616.21\n15749.06\n16021.47\n16014.35\n16359.88\n16885.99\n17915.79\n18890.94\n19816.82\n21021.68\n21694.22\n21951.50\n21660.02\n22185.77\n22760.87\n23311.46\n23994.57\n24739.74\n25781.17\n26709.13\n27577.71\n27700.65\n27827.51\n28155.44\n28424.50\n28975.50\n29322.11\n28891.12\n27622.97\n27705.79\n27054.65\n26271.87\n26061.18\n26676.33\n27802.07\n28673.54\n29350.43\n29688.56\n29977.45\n26114.80\n27605.66\n\n\nComunidad Valenciana\n4650.84\n4859.48\n4978.37\n5252.97\n5738.44\n5690.94\n5697.55\n6032.16\n6372.11\n6843.74\n6970.97\n7390.33\n7732.53\n8107.98\n8681.40\n9233.18\n9374.23\n9840.40\n10373.49\n10574.09\n11059.30\n11243.54\n11090.51\n11530.72\n12211.35\n12545.87\n12365.38\n12531.30\n12816.82\n12857.59\n13194.96\n13571.82\n14344.12\n15152.46\n15918.62\n16578.41\n17083.29\n16902.50\n16423.78\n16618.42\n17029.83\n17253.41\n18107.27\n18999.40\n19736.76\n20722.54\n21535.67\n21652.85\n21589.66\n21732.48\n21901.31\n22261.35\n22391.15\n22171.63\n20755.06\n20565.24\n20107.46\n19334.92\n19167.72\n19642.18\n20377.71\n20946.30\n21671.64\n22036.96\n22243.25\n19663.47\n20698.70\n\n\nExtremadura\n2198.55\n2310.77\n2385.98\n2497.25\n2708.40\n2661.56\n2683.84\n2868.07\n3058.12\n3353.84\n3488.43\n3761.45\n4002.93\n4241.23\n4588.83\n4978.48\n5118.02\n5355.82\n5632.85\n5686.80\n5897.57\n6036.79\n5996.81\n6463.42\n7083.62\n7456.41\n7489.12\n7535.49\n7650.69\n7758.03\n8048.72\n8467.69\n9149.13\n9668.62\n10166.74\n10397.85\n10810.48\n10933.80\n10749.62\n10863.82\n10948.10\n11307.15\n11755.79\n12219.09\n12873.82\n13595.36\n14023.92\n14554.44\n15030.81\n15498.44\n16009.65\n16597.39\n17241.09\n17499.10\n16942.16\n16965.18\n16660.03\n16130.87\n16040.25\n16104.88\n16704.74\n17117.11\n17859.26\n18288.03\n18664.12\n16987.18\n17839.78\n\n\nGalicia\n2926.13\n3039.37\n3096.05\n3244.77\n3515.60\n3480.33\n3507.19\n3812.80\n4135.52\n4546.08\n4739.24\n5126.94\n5473.57\n5839.93\n6362.18\n6904.91\n7121.02\n7494.74\n7921.00\n8109.56\n8518.49\n8749.13\n8717.78\n9194.14\n9868.00\n10177.11\n10058.31\n10205.52\n10445.25\n10528.26\n10857.70\n11109.39\n11676.53\n12366.64\n13030.57\n13110.82\n13570.08\n13804.15\n13757.45\n14112.16\n14385.08\n14693.20\n15176.79\n15653.70\n16346.67\n16880.98\n17408.60\n17825.27\n18287.43\n18905.24\n19523.84\n20334.68\n21103.53\n21431.84\n20646.11\n20731.93\n20296.42\n19782.05\n19556.58\n19785.33\n20743.92\n21478.68\n22104.78\n22595.59\n22909.16\n20831.24\n21952.77\n\n\nComunidad de Madrid\n9558.50\n9775.68\n9796.12\n9968.67\n10510.68\n10379.33\n10383.62\n10753.06\n11110.86\n11895.69\n12078.94\n12398.31\n12560.03\n12946.12\n13626.43\n14214.80\n14236.58\n14887.34\n15646.07\n16036.68\n16863.97\n16663.30\n15988.46\n16383.46\n17113.56\n17623.79\n17430.58\n17370.49\n17455.90\n17573.65\n18099.36\n18669.80\n19793.43\n20683.63\n21504.77\n22232.15\n23029.92\n22999.72\n22674.36\n23135.20\n23712.76\n24127.20\n25091.19\n26552.35\n27639.66\n28877.15\n29807.70\n29787.10\n29959.55\n30557.91\n31364.28\n32270.98\n32682.32\n32453.92\n31438.92\n31313.91\n31388.70\n30800.60\n30432.59\n30954.62\n32040.34\n32947.24\n33948.04\n34445.54\n34981.17\n30814.50\n32553.06\n\n\nMurcia\n3228.71\n3340.95\n3390.47\n3578.17\n3910.95\n4014.29\n4188.12\n4573.00\n4982.14\n5496.21\n5750.52\n6213.60\n6626.34\n7101.63\n7772.05\n8414.49\n8629.75\n9058.69\n9552.74\n9584.66\n9871.70\n9959.48\n9748.46\n10243.40\n10960.82\n11195.39\n10946.72\n11128.61\n11420.56\n11581.99\n12015.27\n12356.41\n13056.28\n13799.28\n14511.97\n15432.64\n14879.11\n14804.97\n14558.08\n14717.62\n14726.97\n15057.73\n15856.59\n16578.84\n17121.40\n17963.00\n18550.88\n18813.79\n19060.58\n19216.96\n19465.24\n19854.22\n20185.28\n20147.88\n18968.46\n18778.49\n18455.92\n17917.56\n17664.13\n18038.51\n19228.58\n19994.89\n20560.15\n20475.31\n20716.98\n18658.77\n19494.51\n\n\nNavarra\n4846.13\n5034.76\n5134.04\n5399.56\n5885.97\n5939.46\n6059.16\n6564.75\n7096.70\n7703.30\n7930.38\n8499.01\n8989.50\n9435.23\n10112.58\n10862.18\n11133.16\n11521.64\n11984.08\n12510.87\n13401.12\n13540.52\n13281.20\n13827.10\n14666.31\n15074.02\n14855.11\n15262.25\n15821.79\n16309.33\n17204.05\n17679.67\n18682.71\n19840.40\n20953.17\n21656.75\n21627.10\n21277.26\n20944.71\n21474.10\n21983.47\n22522.47\n23453.64\n24336.46\n25129.66\n26480.11\n26954.29\n27332.30\n27661.40\n28266.35\n28748.27\n29488.54\n29950.58\n29922.05\n28487.57\n28636.96\n28451.83\n27452.82\n27238.74\n27881.04\n28631.54\n29369.12\n30279.23\n30579.74\n30959.36\n27560.54\n29196.57\n\n\nPaís Vasco\n7656.85\n7714.94\n7615.20\n7843.78\n8356.13\n8286.57\n8341.94\n8910.04\n9495.57\n10322.60\n10642.58\n11176.85\n11584.52\n12068.27\n12838.14\n13390.55\n13407.30\n13822.56\n14321.37\n14998.16\n16122.86\n15873.80\n15169.08\n15346.86\n15830.36\n15879.17\n15292.26\n15363.18\n15567.35\n15819.79\n16443.38\n16884.39\n17820.44\n18694.34\n19507.60\n19987.69\n20488.13\n20237.52\n19937.44\n20204.07\n20868.62\n21126.89\n22105.44\n23377.51\n24584.11\n25682.43\n26512.78\n26929.10\n27439.75\n28101.74\n28967.53\n29889.79\n30676.06\n30860.59\n29490.54\n29871.53\n29572.77\n29109.38\n28532.82\n29136.94\n30160.26\n30998.27\n31716.94\n32265.11\n32614.72\n29030.46\n30787.36\n\n\nLa Rioja\n3862.78\n4031.59\n4127.92\n4348.39\n4751.49\n4755.24\n4830.30\n5222.75\n5634.51\n6172.88\n6413.90\n6833.34\n7185.18\n7565.76\n8135.07\n8706.45\n8847.37\n9125.51\n9456.04\n9609.28\n10011.19\n10183.78\n10040.44\n10677.85\n11559.28\n11997.59\n11937.61\n12235.70\n12638.20\n12772.08\n13209.99\n13547.26\n14271.13\n15087.57\n15859.55\n18691.17\n19204.72\n19601.80\n19484.25\n19790.94\n20205.09\n20766.23\n21523.10\n22129.07\n22787.67\n24071.35\n24500.23\n24623.15\n25034.77\n25331.97\n25714.63\n26426.67\n26908.44\n26871.49\n25556.30\n25646.08\n25048.76\n24206.43\n23700.70\n24084.91\n24968.35\n25633.63\n25858.92\n26349.04\n26510.63\n24030.64\n25138.06\n\n\nCeuta y Melilla\n4214.89\n4260.60\n4221.57\n4260.95\n4459.81\n4442.94\n4523.97\n4687.96\n4843.89\n5286.45\n5474.71\n5869.81\n6213.84\n6590.14\n7120.09\n7575.67\n7658.48\n8150.32\n8727.11\n8889.04\n9294.32\n9413.58\n9251.35\n9802.27\n10575.61\n11181.96\n11286.03\n11592.50\n12010.28\n11938.50\n12144.63\n12218.44\n12636.80\n13144.98\n13613.44\n14887.46\n14556.10\n14444.51\n15100.53\n14933.16\n15004.37\n15120.51\n15764.50\n16514.26\n17138.75\n17674.29\n17943.49\n18416.53\n19229.73\n19753.79\n20075.26\n20338.70\n20455.42\n20497.26\n19702.16\n19125.36\n18604.44\n17851.38\n17736.80\n17746.31\n18177.97\n18550.10\n18936.80\n19365.20\n19705.39\n18064.63\n19003.66\n\n\nTotal\n4428.61\n4587.84\n4662.12\n4884.06\n5298.26\n5310.35\n5409.18\n5799.18\n6201.82\n6765.76\n6998.50\n7474.32\n7876.25\n8335.11\n9004.61\n9622.97\n9801.51\n10250.29\n10769.66\n11025.78\n11584.53\n11696.41\n11460.19\n11933.10\n12653.98\n13044.34\n12885.34\n12965.83\n13162.16\n13259.63\n13665.19\n14059.13\n14864.94\n15641.72\n16374.08\n17041.82\n17461.86\n17559.58\n17292.84\n17626.58\n18019.40\n18393.72\n19102.10\n19884.25\n20676.73\n21578.07\n22271.26\n22548.77\n22849.80\n23249.42\n23676.93\n24262.25\n24689.25\n24556.24\n23476.15\n23372.88\n23041.73\n22353.25\n22046.76\n22412.93\n23245.83\n23968.82\n24638.70\n25096.59\n25389.91\n22393.14\n23642.03\n\n\n\nFuente: datos proveniente de la web Fedea\n\n    \n\n\n\n\n\n\nCódigo#### Desempleo\n\n### Tasa de desempleo vs NAIRU\n\ndfn &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n\n# Gráfico de la evolución del NAIRU y parados\n\npn &lt;- ggplot(dfn, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = nairu, color = \"NAIRU\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = nairu, color = \"NAIRU\"), size = 1) +\n  geom_point(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1) +\n  labs(title = \"Evolución del PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\") +\n  scale_color_manual(values = c(\"NAIRU\" = \"blue\", \"Tasa de Paro\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\npn\n\n\n\n\n\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\n\ndfd &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo)) %&gt;% \n  mutate(diferencia_desempleo = b_tasa_paro - nairu)\n\npd &lt;- ggplot(dfd, aes(x = periodo, y = diferencia_desempleo, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\",size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_desempleo), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre Tasa de desempleo y NAIRU\",\n       x = \"Año\",\n       y = \"Diferencia entre Tasa de desempleo y NAIRU\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10))\n\n# Mostrar el gráfico\nprint(pd)\n\n\n\n\n\n\n\n\n\nCódigo### Como han evolucionado los parados y ocupados a lo largo del tiempo \ndf5 &lt;- df %&gt;% \n  select(comunidad, periodo, f_parados, f_ocupados) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(f_parados = round(f_parados, 3),\n         f_ocupados = round(f_ocupados, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Crear el gráfico con ggplot2\ngg_barras_apiladas &lt;- ggplot(df5, aes(x = periodo, fill = factor(comunidad))) +\n  geom_bar(aes(y = f_ocupados, color = \"Ocupados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  geom_bar(aes(y = f_parados, color = \"Parados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  labs(title = \"Comparación de Ocupados y Parados en España\",\n       x = \"Periodo\",\n       y = \"Número de Personas\",\n       color = \"Categoría\") +\n  scale_fill_manual(values = c(\"Ocupados\" = \"blue\", \"Parados\" = \"red\")) +\n  theme_stata()\n\n# Imprimir el gráfico\nprint(gg_barras_apiladas)\n\n\n\n\n\n\n\n\n\nCódigo### Tasa de desempleo \n\ndf6 &lt;- df %&gt;%\n  select(comunidad, periodo, b_tasa_paro) %&gt;%\n  filter(periodo &gt;= 1977) %&gt;%\n  mutate(b_tasa_paro = round(b_tasa_paro, 2)) %&gt;%\n  mutate(periodo = as.numeric(periodo)) \n\n\n# Filtrar para el año 1977\ndf6_1977 &lt;- df6 %&gt;% filter(periodo == 1977) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_1977 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 1995\ndf6_1995 &lt;- df6 %&gt;% filter(periodo == 1995) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1995 de mayor a menor según la columna b_tasa_paro\ndf6_1995 &lt;- df6_1995 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2007\ndf6_2007 &lt;- df6 %&gt;% filter(periodo == 2007) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_2007 &lt;- df6_2007 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2021\ndf6_2021 &lt;- df6 %&gt;% filter(periodo == 2021) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_2021 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_2021 %&gt;% arrange(desc(b_tasa_paro))\n\n\n\n\n# Función para crear un gráfico de barras para la tasa de paro\ncrear_grafico &lt;- function(data, title) {\n  ggplot(data, aes(x = reorder(comunidad, b_tasa_paro), y = b_tasa_paro, fill = comunidad)) +\n    geom_bar(stat = \"identity\") +\n    labs(title = title, x = \"Comunidad Autónoma\", y = \"Tasa de Paro\") +\n    theme_stata() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))}\n\n# Crear gráficos individuales\ngrafico_1977 &lt;- crear_grafico(df6_1977, \"Tasa de Paro en 1977\")\ngrafico_1995 &lt;- crear_grafico(df6_1995, \"Tasa de Paro en 1995\")\ngrafico_2007 &lt;- crear_grafico(df6_2007, \"Tasa de Paro en 2007\")\ngrafico_2021 &lt;- crear_grafico(df6_2021, \"Tasa de Paro en 2021\")\n\n# Organizar los gráficos en una cuadrícula\ngrafico_combinado &lt;- wrap_plots(\n  grafico_1977 + theme(legend.position = \"none\"),\n  grafico_1995 + theme(legend.position = \"none\"),\n  ncol = 2) + plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma\",\n    subtitle = \"(1977, 1995, 2007, y 2021 respectivamente)\",\n    caption = \"Datos del INE\")\n# Mostrar el gráfico combinado\nprint(grafico_combinado)\n\n\n\n\n\n\n\n\n\nCódigografico_combinado2 &lt;- wrap_plots(\n  grafico_2007 + theme(legend.position = \"none\"),\n  grafico_2021 + theme(legend.position = \"none\"),\n  ncol = 2) + plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma\",\n    subtitle = \"(1977, 1995, 2007, y 2021 respectivamente)\",\n    caption = \"Datos del INE\")\nprint(grafico_combinado2)\n\n\n\n\n\n\n\n\n\nCódigo#### Mapa coroplético desempleo y PIB \n\nnuevos_nombres2 &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Baleares\", \"Canarias\", \n                     \"Cantabria\", \"Castilla y León\", \"Castilla-La Mancha\", \"Cataluña\", \n                     \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Madrid\", \n                     \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta\", \"Melilla\")\ndfc &lt;- df %&gt;%\n  distinct(comunidad) %&gt;%\n  mutate(nuevos_nombres = nuevos_nombres2)\n\ndfc &lt;- left_join(df, dfc, by = \"comunidad\")\n\ndfc &lt;- dfc %&gt;%\n  select(nuevos_nombres, periodo, F_PIB_real_2016, f_parados, f_ocupados, f_población) %&gt;%\n  mutate(tasa_desempleo =  f_parados/(f_parados + f_ocupados)*100) %&gt;%\n  mutate(pibpc= F_PIB_real_2016/f_población) %&gt;%\n  select(nuevos_nombres, periodo, pibpc, tasa_desempleo) %&gt;%\n  rename(comunidad = nuevos_nombres)\n\n\n#Obtenemos el mapa de España por CCAA\ndf_ccaa &lt;- esp_get_ccaa()%&gt;%\n  select(ccaa.shortname.es, geometry) %&gt;%\n  rename(\"comunidad\" = ccaa.shortname.es)\n\ndf_datos_mapa &lt;- dfc %&gt;% filter(periodo %in% c(1955, 1975, 2000, 2021)) %&gt;%\n  filter(`comunidad`!= \"total\")\n\n\ndf_mapa &lt;- left_join(df_ccaa, df_datos_mapa, by = c(\"comunidad\" = \"comunidad\"))\n\n### Mapa para el paro \n\ndf_mapa_ccaa1 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(paro_ccaa_4 = ntile(tasa_desempleo, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(paro_ccaa_4 = forcats::as_factor(paro_ccaa_4))\n\npc &lt;- ggplot(df_mapa_ccaa1) +\n  geom_sf(aes(geometry = geometry, fill = paro_ccaa_4)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"Tasa de desempleo por cuartiles\" , caption = \"Elaboración propia a partir de datos extraídos del INE\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\npc\n\n\n\n\n\n\n\n\n\nCódigo### Mapa para el PIB\n\ndf_mapa_ccaa2 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(pibpc = ntile(pibpc, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(pibpc = forcats::as_factor(pibpc))\n\npc2 &lt;- ggplot(df_mapa_ccaa2) +\n  geom_sf(aes(geometry = geometry, fill = pibpc)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"PIBpc real por cuartiles\" , caption = \"Elaboración propia a partir de datos extraídos del INE\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\npc2\n\n\n\n\n\n\n\n\n\nCódigo### Curvas de Phillips \n\n\n# Crear columnas para los grupos de periodos\ndf10 &lt;- df %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100)\n  \n  \n  df10 &lt;- df10 %&gt;%\n  mutate(periodo_grupo = case_when(\n    periodo &gt;= 1977 & periodo &lt;= 2000 ~ \"1977-2000\",\n    periodo &gt; 2000 & periodo &lt;= 2021 ~ \"2000-2021\",\n    periodo &gt;= 1977 & periodo &lt;= 2021 ~ \"1977-2021\",\n    TRUE ~ \"Otro\"\n  ))\n\n# Gráfico de la Curva de Phillips con líneas para diferentes periodos\np_phillips &lt;- ggplot(df10, aes(x = b_tasa_paro, y = f_deflactor_pib, color = periodo_grupo)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  annotate('text', x = 7, y = 17, label = '1978-2000', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 9, y = 6, label = '2000-2021', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 7.5, y = 11, label = '1978-2021', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  labs(title = \"Curva de Phillips\",\n       subtitle = \"La Curva de Phillips representa la relación entre la tasa de desempleo y la inflación.\\n¿Cómo ha evolucionado en España?\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: Datos del INE',\n       color = 'Periodo') +\n  scale_color_manual(values = c('#d1495b', '#00798c', '#fd5532')) +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\n# Añadir una capa de regresión para todo el conjunto de datos (discontinua)\np_phillips &lt;- p_phillips +\n  geom_smooth(aes(group = 1), method = 'lm', se = FALSE, linetype = 2, color = 'black')\n\nprint(p_phillips)\n\n\n\n\n\n\n\n\n\nCódigo### Comunidades CP\n\n# Filtrar datos por comunidades específicas y periodo\ndf_comunidades &lt;- df %&gt;% \n  filter(comunidad %in% c(\"mad\", \"and\", \"total\"), periodo &gt;= 1977 & periodo &lt;= 2021) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  group_by(comunidad) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100) %&gt;%\n  ungroup()\n\n# Gráfico de la Curva de Phillips con una regresión para cada comunidad\np_phillips_comunidades &lt;- ggplot(df_comunidades, aes(x = b_tasa_paro, y = f_deflactor_pib, color = comunidad)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  annotate('text', x = 33, y = 5, label = 'Andalucía', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 8, y = 11, label = 'España', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 6, y = 5, label = 'Madrid', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  labs(title = \"Curva de Phillips por Comunidad Autónoma\",\n       subtitle = \"Relación entre la tasa de desempleo y la inflación (1977-2021)\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: Datos del INE',\n       color = 'Comunidad Autónoma') +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\nprint(p_phillips_comunidades)"
  },
  {
    "objectID": "my_trabajo_BigData.html#algunos-gráficos",
    "href": "my_trabajo_BigData.html#algunos-gráficos",
    "title": "Los pingüinos molan",
    "section": "Algunos gráficos",
    "text": "Algunos gráficos\nBueno pues vamos a hacer algún gráfico, pero claro antes he de cargar los paquetes\n\nCódigolibrary(tidyverse)\n\n\nArreglo los datos\n\nCódigo#- cojos datos de pingüinos y arreglo un poco \ndf &lt;- palmerpenguins::penguins %&gt;% \n  dplyr::select(species, bill_depth_mm, body_mass_g) %&gt;% \n  tidyr::drop_na()\n\n\n\nPrimer gráfico\n\nCódigo#- primer gráfico\np &lt;- ggplot(data = df, \n       mapping = aes(x = bill_depth_mm, y = body_mass_g, color = species)) +\n     geom_point()\np\n\n\n\n\n\n\n\nSegundo\n\nCódigo#- segundo gráfico\np &lt;- p + geom_smooth(method = \"lm\", se = FALSE) \n\np\n\n\n\n\n\n\n\nEl último\n\nCódigo#- tercer gráfico\np + geom_smooth(method = \"lm\", se = FALSE, color = \"black\") \n\n\n\n\n\n\n\n\nCon esto acabo mi trabajo para BigData!!\n\n\n\nInformación sobre la sesión\nAbajo muestro mi entorno de trabajo y paquetes utilizados\n\n\n current session info \n\n─ Session info ───────────────────────────────────────────────────────────────\n setting  value\n version  R version 4.2.2 Patched (2022-11-10 r83330)\n os       Ubuntu 22.04.3 LTS\n system   x86_64, linux-gnu\n ui       X11\n language (EN)\n collate  es_ES.UTF-8\n ctype    es_ES.UTF-8\n tz       Europe/Madrid\n date     2023-11-24\n pandoc   3.1.1 @ /usr/lib/rstudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)\n\n─ Packages ───────────────────────────────────────────────────────────────────\n package        * version date (UTC) lib source\n cli              3.6.1   2023-03-23 [1] CRAN (R 4.2.2)\n clipr            0.8.0   2022-02-22 [1] CRAN (R 4.2.2)\n colorspace       2.1-0   2023-01-23 [1] CRAN (R 4.2.2)\n desc             1.4.2   2022-09-08 [1] CRAN (R 4.2.2)\n details          0.3.0   2022-03-27 [1] CRAN (R 4.2.0)\n digest           0.6.31  2022-12-11 [1] CRAN (R 4.2.2)\n dplyr          * 1.1.2   2023-04-20 [1] CRAN (R 4.2.2)\n evaluate         0.21    2023-05-05 [1] CRAN (R 4.2.2)\n fansi            1.0.4   2023-01-22 [1] CRAN (R 4.2.2)\n farver           2.1.1   2022-07-06 [1] CRAN (R 4.2.1)\n fastmap          1.1.1   2023-02-24 [1] CRAN (R 4.2.2)\n forcats        * 1.0.0   2023-01-29 [1] CRAN (R 4.2.2)\n generics         0.1.3   2022-07-05 [1] CRAN (R 4.2.2)\n ggplot2        * 3.4.2   2023-04-03 [1] CRAN (R 4.2.2)\n glue             1.6.2   2022-02-24 [1] CRAN (R 4.2.2)\n gtable           0.3.3   2023-03-21 [1] CRAN (R 4.2.2)\n hms              1.1.3   2023-03-21 [1] CRAN (R 4.2.2)\n htmltools        0.5.5   2023-03-23 [1] CRAN (R 4.2.2)\n htmlwidgets      1.6.2   2023-03-17 [1] CRAN (R 4.2.2)\n httr             1.4.7   2023-08-15 [1] CRAN (R 4.2.2)\n jsonlite         1.8.7   2023-06-29 [1] CRAN (R 4.2.2)\n knitr            1.43    2023-05-25 [1] CRAN (R 4.2.2)\n labeling         0.4.2   2020-10-20 [1] CRAN (R 4.2.2)\n lattice          0.20-45 2021-09-22 [4] CRAN (R 4.2.0)\n lifecycle        1.0.3   2022-10-07 [1] CRAN (R 4.2.1)\n lubridate      * 1.9.2   2023-02-10 [1] CRAN (R 4.2.2)\n magrittr         2.0.3   2022-03-30 [1] CRAN (R 4.2.2)\n Matrix           1.5-3   2022-11-11 [4] CRAN (R 4.2.2)\n mgcv             1.8-41  2022-10-21 [4] CRAN (R 4.2.1)\n munsell          0.5.0   2018-06-12 [1] CRAN (R 4.2.2)\n nlme             3.1-162 2023-01-31 [4] CRAN (R 4.2.2)\n palmerpenguins * 0.1.1   2022-08-15 [1] CRAN (R 4.2.1)\n pillar           1.9.0   2023-03-22 [1] CRAN (R 4.2.2)\n pkgconfig        2.0.3   2019-09-22 [1] CRAN (R 4.2.2)\n png              0.1-8   2022-11-29 [1] CRAN (R 4.2.2)\n purrr          * 1.0.1   2023-01-10 [1] CRAN (R 4.2.2)\n R6               2.5.1   2021-08-19 [1] CRAN (R 4.2.2)\n readr          * 2.1.4   2023-02-10 [1] CRAN (R 4.2.2)\n rlang            1.1.1   2023-04-28 [1] CRAN (R 4.2.2)\n rmarkdown        2.22    2023-06-01 [1] CRAN (R 4.2.2)\n rprojroot        2.0.3   2022-04-02 [1] CRAN (R 4.2.2)\n rstudioapi       0.14    2022-08-22 [1] CRAN (R 4.2.2)\n scales           1.2.1   2022-08-20 [1] CRAN (R 4.2.2)\n sessioninfo      1.2.2   2021-12-06 [1] CRAN (R 4.2.0)\n stringi          1.7.12  2023-01-11 [1] CRAN (R 4.2.2)\n stringr        * 1.5.0   2022-12-02 [1] CRAN (R 4.2.2)\n tibble         * 3.2.1   2023-03-20 [1] CRAN (R 4.2.2)\n tidyr          * 1.3.0   2023-01-24 [1] CRAN (R 4.2.2)\n tidyselect       1.2.0   2022-10-10 [1] CRAN (R 4.2.2)\n tidyverse      * 2.0.0   2023-02-22 [1] CRAN (R 4.2.2)\n timechange       0.2.0   2023-01-11 [1] CRAN (R 4.2.2)\n tzdb             0.4.0   2023-05-12 [1] CRAN (R 4.2.2)\n utf8             1.2.3   2023-01-31 [1] CRAN (R 4.2.2)\n vctrs            0.6.3   2023-06-14 [1] CRAN (R 4.2.2)\n withr            2.5.0   2022-03-03 [1] CRAN (R 4.2.2)\n xfun             0.39    2023-04-20 [1] CRAN (R 4.2.2)\n xml2             1.3.4   2023-04-27 [1] CRAN (R 4.2.2)\n yaml             2.3.7   2023-01-23 [1] CRAN (R 4.2.2)\n\n [1] /home/pjpv/R/x86_64-pc-linux-gnu-library/4.2\n [2] /usr/local/lib/R/site-library\n [3] /usr/lib/R/site-library\n [4] /usr/lib/R/library\n\n──────────────────────────────────────────────────────────────────────────────"
  },
  {
    "objectID": "my_trabajo_BigData.html#introducción",
    "href": "my_trabajo_BigData.html#introducción",
    "title": "Agregados Macroeconómicos para España",
    "section": "",
    "text": "El objetivo principal de este estudio es proporcionar una visión integral de la evolución económica de España, centrándose en aspectos fundamentales como el Producto Interno Bruto (PIB), la tasa de desempleo y la inflación. Utilizando herramientas de programación en R y la versatilidad de Quarto para la creación de documentos dinámicos, exploraremos los datos disponibles y ofreceremos una perspectiva única sobre el desarrollo económico a lo largo del tiempo.\n\nLos datos utilizados en este análisis han sido sacados de conocidas bases de datos macroeconómicos para la economía española y sus regiones. En concreto, se utlizaron las siguientes bases:\n\nFEDEA: Se utilizaron las Series largas de algunos agregados económicos y demográficos regionales que contiene información de diversas varibles desde 1955 hasta 2021. Su autor, Ángel de la Fuente, un economista con un doctorado en Ciencias Económicas por la Universidad de Pennsylvania. Ha trabajado como profesor asociado, consultor para organismos internacionales y es actualmente el Director Ejecutivo de la Fundación de Estudios de Economía Aplicada (FEDEA) desde 2014. Además, ha recibido premios por su destacada labor, incluyendo el accésit al I Premio de la Fundación Banco Herrero en 2002.\nBdeMores: Una base de datos anuales de magnitudes macroeconómicas regionales de la economía española, compatible con las bases nacionales BDREMS. Iniciada en 1998, respalda los modelos macroeconómicos REMS y EREMS utilizados por la Dirección General de Presupuestos del Ministerio de Hacienda y Función Pública. Las magnitudes están clasificadas por región y rama de actividad, valoradas a precios corrientes y/o constantes de 2015, siguiendo los criterios del SEC2010. En la actualización de mayo de 2023, se incluyen revisiones relacionadas con la reclasificación temporal de la SAREB en el Sector de las Administraciones Públicas, conforme al acuerdo entre Eurostat y las autoridades estadísticas españolas.\nAMECO: La base de datos macroeconómica anual de la Dirección General de Asuntos Económicos y Financieros de la Comisión Europea. Utilizada para análisis e informes, incluye datos de la UE, la zona euro, Estados miembros, países candidatos y otros de la OCDE, abarcando más de 40 países. Organizada en dieciocho capítulos, abarca desde población y empleo hasta principales agregados de cuentas nacionales, sectores y ajuste cíclico de variables financieras públicas. A partir de 2002, los países de la zona euro publican series nacionales en euros, convirtiendo datos en moneda nacional antes de 2002 utilizando el tipo de cambio fijo al euro. A pesar del cambio de denominación a euros, las comparaciones y agregaciones deben basarse en series históricas establecidas en ECU hasta 1998 y su continuación estadística en EUR desde 1999 en adelante. En el presente trabajo, se utilizó AMECO para obtener datos sobre el PIB potencial y la tasa de desempleo estructural (NAIRU) a la hora de realizar los análisis.\n\nPara realizar este análisis, hemos empleado una variedad de paquetes de R, desde tidyverse para manipulación de datos hasta ggplot2 y plotly para la creación de gráficos interactivos. Además, hemos utilizado Quarto, una herramienta potente para la generación de documentos enriquecidos, que nos permite combinar texto, código y visualizaciones de manera efectiva. Las librerías utilizadas son las siguientes:\n\nCódigo#- 0) Librerías utilizadas -------------------------------------------------------\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(kableExtra)\nlibrary(ggplot2)\nlibrary(ggthemes)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(openxlsx)\nlibrary(countrycode)\nlibrary(ggimage)\nlibrary(gganimate)\nlibrary(lubridate)\nlibrary(sf)\nlibrary(mapSpain)\nlibrary(DT)\nlibrary(gt)\nlibrary(patchwork)\nlibrary(ggplot2)\nlibrary(ggtext)\n\n\n\nLa estructura del trabajo se divide en un análisis del Producto Interior Bruto (PIB), posteriormente se realiza un análisis de las Tasas de Desempleo, y se concluye con la representación gráfica de un par de Curvas de Phillips. A continuación, presentamos algunas de las visualizaciones clave obtenidas a partir del análisis de los datos macroeconómicos de España."
  },
  {
    "objectID": "my_trabajo_BigData.html#análisis-del-pib",
    "href": "my_trabajo_BigData.html#análisis-del-pib",
    "title": "Agregados Macroeconómicos para España",
    "section": "",
    "text": "Código# Importar y arreglar los datos\nruta &lt;- \"./datos/spain.xlsx\"\ndf &lt;- rio::import(ruta) \ndf &lt;- df %&gt;%\n  slice(-1) %&gt;%\n  select(-c(24, 25, 26)) %&gt;%\n  mutate_at(vars(4:ncol(.)), as.numeric)\n\n#### PIB\n\n### Evolución del PIB y del PIB potencial \n\ndf1 &lt;- df %&gt;% \n  select(comunidad, periodo, PIB_real_2015, pib_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(PIB_real_2015 = round(PIB_real_2015, 3),\n         pib_potencial = round(pib_potencial, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Gráfico de la evolución del PIB real y potencial\n\np1 &lt;- ggplot(df1, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1) +\n  geom_point(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1) +\n  labs(title = \"Evolución del PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\") +\n  scale_color_manual(values = c(\"PIB Real\" = \"blue\", \"PIB Potencial\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\n# Crea la animación\np1\n\n\n\n\n\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\ndf2 &lt;- df %&gt;% \n  select(comunidad, periodo, diferencia_real_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(diferencia_real_potencial = round(diferencia_real_potencial, 3))\n\n# Crear el gráfico con etiquetas en el eje x en vertical\np2 &lt;- ggplot(df2, aes(x = periodo, y = diferencia_real_potencial, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\",size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_real_potencial), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Diferencia Real-Potencial\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10))\n\n# Mostrar el gráfico\nprint(p2)\n\n\n\n\n\n\n\n\n\nCódigo### Evolución del PIB per cápita \ndf3 &lt;- df %&gt;% \n  select(comunidad, periodo, f_deflactor_pib, F_PIB_real_2016, f_población) %&gt;%\n  filter(comunidad == \"total\") %&gt;%\n  mutate(pib_nominal = F_PIB_real_2016 * f_deflactor_pib ) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016*1000) %&gt;%\n  mutate(pib_nominal = pib_nominal*1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  mutate(pibpc_nominal = pib_nominal / f_población)\n\n# Crear el gráfico interactivo con barras y línea\np3 &lt;- ggplot(df3, aes(x = periodo, group = 1)) +\n  geom_bar(aes(y = pibpc_real, fill = \"PIB per cápita real\"), stat = \"identity\", position = \"dodge\", color = \"black\", alpha = 0.7) +\n  geom_ribbon(aes(ymin = 0, ymax = pibpc_nominal), fill = \"blue\", alpha = 0.1) +\n  geom_line(aes(y = pibpc_nominal, color = \"PIB per cápita nominal\"), size = 0.5) +\n  geom_point(aes(y = pibpc_nominal), color = \"blue\", size = 2) +\n  labs(title = \"Comparación entre PIB per cápita nominal y real\",\n       x = \"Año\",\n       y = \"PIB per cápita real\",\n       fill = \"Categoría\",\n       color = \"PIB per cápita nominal\",\n       caption = \"Elaboración propia a partir de datos\") +\n  scale_fill_manual(values = c(\"PIB per cápita real\" = \"#FF9999\")) +\n  scale_color_manual(values = c(\"PIB per cápita nominal\" = \"blue\")) +\n  theme_stata(base_family = \"\") +\n  theme(legend.position = \"bottom\", axis.text.x = element_text(angle = 90, hjust = 0.5))\n\n# Convertir a gráfico interactivo con plotly\np3 &lt;- ggplotly(p3)\n\n# Mostrar el gráfico interactivo\np3\n\n\n\n\n\n\n\nCódigo### Tabla de scroll con pib pc real para las comunidades\n\nnuevos_nombres &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Islas Baleares\", \"Islas Canarias\", \n                    \"Cantabria\", \"Castilla y León\", \"Castilla - La Mancha\", \"Cataluña\", \n                    \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Comunidad de Madrid\", \n                    \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta y Melilla\", \"Total\")\n\n## Tabla que más me gusta \n\ndf4 &lt;- df %&gt;% \n  select(comunidad, periodo, F_PIB_real_2016, f_población) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016 * 1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  select(-c(3, 4)) %&gt;%\n  pivot_wider(names_from = periodo, values_from = pibpc_real) %&gt;% mutate(comunidad = nuevos_nombres)\n\ndf4 &lt;- df4 %&gt;% mutate(across(where(is.numeric), \\(x) round(x, digits = 2)))\n\ndf4 %&gt;%  \n  gt(rowname_col = \"comunidad\") %&gt;% tab_header(title = \"PIB per cápita por Comunidades Autónomas\", \n                                               subtitle = \"Euros constantes de 2015\")  %&gt;% \n  tab_source_note(md(\"Fuente: datos proveniente de la web [Fedea](https://fedea.net/angel-de-la-fuente/)\")) %&gt;%\n  gtExtras::gt_theme_pff() \n\n\n\n\n\n\n\nPIB per cápita por Comunidades Autónomas\n    \n\nEuros constantes de 2015\n    \n\n\n      1955\n      1956\n      1957\n      1958\n      1959\n      1960\n      1961\n      1962\n      1963\n      1964\n      1965\n      1966\n      1967\n      1968\n      1969\n      1970\n      1971\n      1972\n      1973\n      1974\n      1975\n      1976\n      1977\n      1978\n      1979\n      1980\n      1981\n      1982\n      1983\n      1984\n      1985\n      1986\n      1987\n      1988\n      1989\n      1990\n      1991\n      1992\n      1993\n      1994\n      1995\n      1996\n      1997\n      1998\n      1999\n      2000\n      2001\n      2002\n      2003\n      2004\n      2005\n      2006\n      2007\n      2008\n      2009\n      2010\n      2011\n      2012\n      2013\n      2014\n      2015\n      2016\n      2017\n      2018\n      2019\n      2020\n      2021\n    \n\n\n\nAndalucía\n3184.06\n3265.11\n3285.89\n3448.74\n3750.92\n3754.61\n3824.63\n4094.68\n4373.78\n4780.93\n4956.07\n5343.86\n5686.45\n6059.73\n6593.74\n7146.68\n7356.05\n7688.80\n8076.45\n8181.97\n8504.48\n8692.45\n8617.60\n8953.16\n9468.35\n9783.68\n9661.23\n9718.81\n9861.41\n9908.32\n10189.57\n10409.64\n10928.73\n11507.39\n12053.80\n12764.42\n13065.95\n13101.51\n12792.82\n13021.62\n13298.47\n13595.89\n14243.52\n14727.59\n15277.55\n16142.12\n16633.43\n17015.28\n17481.28\n17869.88\n18180.95\n18649.52\n19033.52\n18914.99\n18080.75\n17667.49\n17443.59\n16780.82\n16390.91\n16639.83\n17186.52\n17658.59\n18126.28\n18581.98\n18816.76\n16712.47\n17583.96\n\n\nAragón\n4203.82\n4419.74\n4560.46\n4790.45\n5214.93\n5245.02\n5349.36\n5784.49\n6239.33\n6736.98\n6897.13\n7399.38\n7832.52\n8273.62\n8922.18\n9414.06\n9471.40\n9845.47\n10284.78\n10564.08\n11136.20\n11361.72\n11241.29\n11900.82\n12826.95\n13301.98\n13214.67\n13423.35\n13758.91\n13871.92\n14304.66\n14800.30\n15727.42\n16658.20\n17554.28\n18250.45\n18595.54\n18791.26\n18466.53\n18690.98\n19303.46\n19888.07\n20665.40\n21097.05\n21610.41\n22661.37\n23291.02\n23927.94\n24457.65\n24938.29\n25460.68\n26163.40\n26878.51\n26643.95\n25524.50\n25677.42\n25183.57\n24127.08\n24277.66\n24629.96\n25108.10\n25981.40\n26628.33\n27331.23\n27407.28\n24907.01\n26368.51\n\n\nAsturias\n4744.79\n4875.23\n4911.64\n5130.79\n5553.95\n5526.27\n5599.83\n5996.17\n6406.29\n6924.15\n7097.82\n7661.33\n8161.67\n8626.48\n9310.72\n9730.72\n9680.04\n10170.00\n10739.93\n11058.81\n11684.28\n11549.31\n11077.16\n11810.92\n12814.74\n13325.65\n13295.79\n13040.61\n12901.82\n13005.60\n13412.43\n13474.53\n13912.75\n14385.16\n14802.23\n14855.28\n15246.45\n15912.19\n15342.00\n15701.28\n15952.83\n16248.94\n16704.18\n17440.43\n17570.37\n18344.69\n19042.61\n19485.63\n19980.88\n20434.70\n21085.03\n21981.25\n22680.40\n22844.44\n21322.89\n21265.04\n21001.55\n20203.16\n19652.25\n19746.04\n20449.02\n20918.35\n21509.25\n21947.67\n22323.83\n19963.27\n21204.95\n\n\nIslas Baleares\n6231.96\n6517.08\n6680.64\n7052.96\n7712.10\n7808.81\n7977.59\n8458.08\n8947.62\n9705.44\n9984.38\n10827.74\n11589.16\n12359.66\n13460.35\n14415.75\n14681.66\n15186.35\n15768.66\n15741.30\n16139.95\n16201.53\n15787.59\n16401.20\n17343.61\n18227.06\n18369.84\n18506.99\n18823.88\n19170.14\n19959.82\n20415.77\n21454.83\n22207.71\n22864.76\n24528.21\n25006.75\n25015.85\n24644.85\n24739.63\n25036.24\n25557.81\n26897.41\n27349.77\n28414.74\n28999.80\n29308.11\n28459.45\n27892.40\n27838.22\n27958.58\n27957.63\n27927.80\n27496.32\n25890.56\n25385.69\n25166.30\n24597.82\n23986.57\n24560.78\n25258.25\n26088.78\n26572.15\n26886.72\n26918.33\n20386.75\n22481.00\n\n\nIslas Canarias\n3735.63\n3959.18\n4126.20\n4273.75\n4577.04\n4525.23\n4549.25\n4908.73\n5284.79\n5799.59\n6036.15\n6600.64\n7123.66\n7636.70\n8359.85\n9232.29\n9682.30\n10160.44\n10719.02\n10614.35\n10802.18\n11007.59\n10893.88\n11622.63\n12628.39\n13166.65\n13152.48\n13122.05\n13209.70\n13205.48\n13513.66\n13869.76\n14629.50\n15436.11\n16192.57\n16157.89\n16279.66\n16782.69\n16857.28\n17250.68\n17491.69\n17723.49\n18279.16\n19117.60\n20164.53\n20599.21\n21349.38\n21215.50\n21430.68\n21381.46\n21476.82\n21602.70\n21782.75\n21379.21\n20165.78\n20110.60\n19699.94\n19017.89\n18608.16\n18652.93\n19114.49\n19608.96\n20169.18\n20362.09\n20420.84\n16342.97\n17479.28\n\n\nCantabria\n5079.42\n5251.58\n5321.15\n5625.07\n6160.65\n6141.94\n6213.74\n6623.24\n7044.01\n7595.51\n7767.67\n8284.32\n8720.07\n9189.68\n9889.50\n10555.61\n10732.20\n10951.40\n11224.46\n11574.62\n12248.90\n12451.91\n12279.59\n12877.34\n13754.81\n14129.58\n13900.03\n13858.20\n13941.20\n14009.82\n14407.07\n14623.16\n15249.05\n15933.04\n16563.06\n16576.08\n16447.43\n16695.61\n16313.69\n16669.42\n16839.02\n17051.28\n17623.65\n18464.06\n19230.23\n20146.56\n21035.44\n21559.58\n21726.02\n22058.07\n22549.66\n23104.29\n23531.39\n23395.16\n22271.10\n22074.08\n21454.60\n20943.27\n20275.89\n20642.84\n21253.88\n21904.75\n22593.54\n23058.30\n23329.69\n20871.72\n22001.76\n\n\nCastilla y León\n3102.04\n3238.82\n3318.96\n3478.68\n3779.67\n3785.86\n3868.26\n4233.23\n4621.83\n5090.55\n5316.98\n5707.40\n6045.86\n6454.18\n7035.09\n7536.35\n7668.56\n8020.52\n8428.12\n8600.57\n9007.90\n9242.45\n9199.64\n9712.88\n10433.21\n10834.70\n10755.93\n10819.12\n10977.14\n11197.95\n11687.08\n12185.33\n13059.04\n13719.70\n14338.27\n14758.71\n14837.96\n15051.97\n15330.34\n15752.81\n16024.23\n16322.86\n16620.30\n17076.69\n17741.19\n18454.03\n18960.00\n19582.24\n20094.49\n20620.28\n21158.80\n21812.07\n22409.77\n22413.90\n21763.87\n21846.02\n21726.86\n21036.84\n20667.84\n20874.54\n21571.73\n22407.20\n22878.50\n23664.87\n23874.41\n21887.39\n22941.17\n\n\nCastilla - La Mancha\n2456.58\n2577.68\n2654.32\n2802.80\n3065.77\n3066.38\n3135.44\n3433.56\n3751.51\n4151.28\n4356.50\n4717.27\n5041.06\n5500.17\n6127.84\n6702.69\n6949.68\n7439.34\n7996.81\n8130.48\n8484.84\n8738.60\n8733.82\n9188.48\n9831.96\n10087.97\n9887.23\n10053.11\n10311.90\n10515.89\n10971.93\n11355.29\n12070.80\n12922.08\n13760.94\n14262.39\n14559.97\n14691.30\n13997.93\n14169.67\n14340.03\n14865.66\n15333.87\n15963.54\n16290.41\n16972.03\n17497.64\n17987.04\n18321.18\n18633.95\n18904.09\n19389.86\n19820.64\n19806.19\n18911.27\n18639.66\n18162.69\n17279.69\n17283.16\n17160.75\n17915.36\n18751.71\n19200.25\n19827.69\n19875.40\n18300.31\n19134.86\n\n\nCataluña\n6663.59\n6824.54\n6849.72\n7171.18\n7767.20\n7821.92\n7969.70\n8405.21\n8844.05\n9497.41\n9672.10\n10202.82\n10621.36\n11082.51\n11807.45\n12424.28\n12526.24\n12975.45\n13497.04\n13818.70\n14508.26\n14550.79\n14164.80\n14654.16\n15446.29\n15849.49\n15616.21\n15749.06\n16021.47\n16014.35\n16359.88\n16885.99\n17915.79\n18890.94\n19816.82\n21021.68\n21694.22\n21951.50\n21660.02\n22185.77\n22760.87\n23311.46\n23994.57\n24739.74\n25781.17\n26709.13\n27577.71\n27700.65\n27827.51\n28155.44\n28424.50\n28975.50\n29322.11\n28891.12\n27622.97\n27705.79\n27054.65\n26271.87\n26061.18\n26676.33\n27802.07\n28673.54\n29350.43\n29688.56\n29977.45\n26114.80\n27605.66\n\n\nComunidad Valenciana\n4650.84\n4859.48\n4978.37\n5252.97\n5738.44\n5690.94\n5697.55\n6032.16\n6372.11\n6843.74\n6970.97\n7390.33\n7732.53\n8107.98\n8681.40\n9233.18\n9374.23\n9840.40\n10373.49\n10574.09\n11059.30\n11243.54\n11090.51\n11530.72\n12211.35\n12545.87\n12365.38\n12531.30\n12816.82\n12857.59\n13194.96\n13571.82\n14344.12\n15152.46\n15918.62\n16578.41\n17083.29\n16902.50\n16423.78\n16618.42\n17029.83\n17253.41\n18107.27\n18999.40\n19736.76\n20722.54\n21535.67\n21652.85\n21589.66\n21732.48\n21901.31\n22261.35\n22391.15\n22171.63\n20755.06\n20565.24\n20107.46\n19334.92\n19167.72\n19642.18\n20377.71\n20946.30\n21671.64\n22036.96\n22243.25\n19663.47\n20698.70\n\n\nExtremadura\n2198.55\n2310.77\n2385.98\n2497.25\n2708.40\n2661.56\n2683.84\n2868.07\n3058.12\n3353.84\n3488.43\n3761.45\n4002.93\n4241.23\n4588.83\n4978.48\n5118.02\n5355.82\n5632.85\n5686.80\n5897.57\n6036.79\n5996.81\n6463.42\n7083.62\n7456.41\n7489.12\n7535.49\n7650.69\n7758.03\n8048.72\n8467.69\n9149.13\n9668.62\n10166.74\n10397.85\n10810.48\n10933.80\n10749.62\n10863.82\n10948.10\n11307.15\n11755.79\n12219.09\n12873.82\n13595.36\n14023.92\n14554.44\n15030.81\n15498.44\n16009.65\n16597.39\n17241.09\n17499.10\n16942.16\n16965.18\n16660.03\n16130.87\n16040.25\n16104.88\n16704.74\n17117.11\n17859.26\n18288.03\n18664.12\n16987.18\n17839.78\n\n\nGalicia\n2926.13\n3039.37\n3096.05\n3244.77\n3515.60\n3480.33\n3507.19\n3812.80\n4135.52\n4546.08\n4739.24\n5126.94\n5473.57\n5839.93\n6362.18\n6904.91\n7121.02\n7494.74\n7921.00\n8109.56\n8518.49\n8749.13\n8717.78\n9194.14\n9868.00\n10177.11\n10058.31\n10205.52\n10445.25\n10528.26\n10857.70\n11109.39\n11676.53\n12366.64\n13030.57\n13110.82\n13570.08\n13804.15\n13757.45\n14112.16\n14385.08\n14693.20\n15176.79\n15653.70\n16346.67\n16880.98\n17408.60\n17825.27\n18287.43\n18905.24\n19523.84\n20334.68\n21103.53\n21431.84\n20646.11\n20731.93\n20296.42\n19782.05\n19556.58\n19785.33\n20743.92\n21478.68\n22104.78\n22595.59\n22909.16\n20831.24\n21952.77\n\n\nComunidad de Madrid\n9558.50\n9775.68\n9796.12\n9968.67\n10510.68\n10379.33\n10383.62\n10753.06\n11110.86\n11895.69\n12078.94\n12398.31\n12560.03\n12946.12\n13626.43\n14214.80\n14236.58\n14887.34\n15646.07\n16036.68\n16863.97\n16663.30\n15988.46\n16383.46\n17113.56\n17623.79\n17430.58\n17370.49\n17455.90\n17573.65\n18099.36\n18669.80\n19793.43\n20683.63\n21504.77\n22232.15\n23029.92\n22999.72\n22674.36\n23135.20\n23712.76\n24127.20\n25091.19\n26552.35\n27639.66\n28877.15\n29807.70\n29787.10\n29959.55\n30557.91\n31364.28\n32270.98\n32682.32\n32453.92\n31438.92\n31313.91\n31388.70\n30800.60\n30432.59\n30954.62\n32040.34\n32947.24\n33948.04\n34445.54\n34981.17\n30814.50\n32553.06\n\n\nMurcia\n3228.71\n3340.95\n3390.47\n3578.17\n3910.95\n4014.29\n4188.12\n4573.00\n4982.14\n5496.21\n5750.52\n6213.60\n6626.34\n7101.63\n7772.05\n8414.49\n8629.75\n9058.69\n9552.74\n9584.66\n9871.70\n9959.48\n9748.46\n10243.40\n10960.82\n11195.39\n10946.72\n11128.61\n11420.56\n11581.99\n12015.27\n12356.41\n13056.28\n13799.28\n14511.97\n15432.64\n14879.11\n14804.97\n14558.08\n14717.62\n14726.97\n15057.73\n15856.59\n16578.84\n17121.40\n17963.00\n18550.88\n18813.79\n19060.58\n19216.96\n19465.24\n19854.22\n20185.28\n20147.88\n18968.46\n18778.49\n18455.92\n17917.56\n17664.13\n18038.51\n19228.58\n19994.89\n20560.15\n20475.31\n20716.98\n18658.77\n19494.51\n\n\nNavarra\n4846.13\n5034.76\n5134.04\n5399.56\n5885.97\n5939.46\n6059.16\n6564.75\n7096.70\n7703.30\n7930.38\n8499.01\n8989.50\n9435.23\n10112.58\n10862.18\n11133.16\n11521.64\n11984.08\n12510.87\n13401.12\n13540.52\n13281.20\n13827.10\n14666.31\n15074.02\n14855.11\n15262.25\n15821.79\n16309.33\n17204.05\n17679.67\n18682.71\n19840.40\n20953.17\n21656.75\n21627.10\n21277.26\n20944.71\n21474.10\n21983.47\n22522.47\n23453.64\n24336.46\n25129.66\n26480.11\n26954.29\n27332.30\n27661.40\n28266.35\n28748.27\n29488.54\n29950.58\n29922.05\n28487.57\n28636.96\n28451.83\n27452.82\n27238.74\n27881.04\n28631.54\n29369.12\n30279.23\n30579.74\n30959.36\n27560.54\n29196.57\n\n\nPaís Vasco\n7656.85\n7714.94\n7615.20\n7843.78\n8356.13\n8286.57\n8341.94\n8910.04\n9495.57\n10322.60\n10642.58\n11176.85\n11584.52\n12068.27\n12838.14\n13390.55\n13407.30\n13822.56\n14321.37\n14998.16\n16122.86\n15873.80\n15169.08\n15346.86\n15830.36\n15879.17\n15292.26\n15363.18\n15567.35\n15819.79\n16443.38\n16884.39\n17820.44\n18694.34\n19507.60\n19987.69\n20488.13\n20237.52\n19937.44\n20204.07\n20868.62\n21126.89\n22105.44\n23377.51\n24584.11\n25682.43\n26512.78\n26929.10\n27439.75\n28101.74\n28967.53\n29889.79\n30676.06\n30860.59\n29490.54\n29871.53\n29572.77\n29109.38\n28532.82\n29136.94\n30160.26\n30998.27\n31716.94\n32265.11\n32614.72\n29030.46\n30787.36\n\n\nLa Rioja\n3862.78\n4031.59\n4127.92\n4348.39\n4751.49\n4755.24\n4830.30\n5222.75\n5634.51\n6172.88\n6413.90\n6833.34\n7185.18\n7565.76\n8135.07\n8706.45\n8847.37\n9125.51\n9456.04\n9609.28\n10011.19\n10183.78\n10040.44\n10677.85\n11559.28\n11997.59\n11937.61\n12235.70\n12638.20\n12772.08\n13209.99\n13547.26\n14271.13\n15087.57\n15859.55\n18691.17\n19204.72\n19601.80\n19484.25\n19790.94\n20205.09\n20766.23\n21523.10\n22129.07\n22787.67\n24071.35\n24500.23\n24623.15\n25034.77\n25331.97\n25714.63\n26426.67\n26908.44\n26871.49\n25556.30\n25646.08\n25048.76\n24206.43\n23700.70\n24084.91\n24968.35\n25633.63\n25858.92\n26349.04\n26510.63\n24030.64\n25138.06\n\n\nCeuta y Melilla\n4214.89\n4260.60\n4221.57\n4260.95\n4459.81\n4442.94\n4523.97\n4687.96\n4843.89\n5286.45\n5474.71\n5869.81\n6213.84\n6590.14\n7120.09\n7575.67\n7658.48\n8150.32\n8727.11\n8889.04\n9294.32\n9413.58\n9251.35\n9802.27\n10575.61\n11181.96\n11286.03\n11592.50\n12010.28\n11938.50\n12144.63\n12218.44\n12636.80\n13144.98\n13613.44\n14887.46\n14556.10\n14444.51\n15100.53\n14933.16\n15004.37\n15120.51\n15764.50\n16514.26\n17138.75\n17674.29\n17943.49\n18416.53\n19229.73\n19753.79\n20075.26\n20338.70\n20455.42\n20497.26\n19702.16\n19125.36\n18604.44\n17851.38\n17736.80\n17746.31\n18177.97\n18550.10\n18936.80\n19365.20\n19705.39\n18064.63\n19003.66\n\n\nTotal\n4428.61\n4587.84\n4662.12\n4884.06\n5298.26\n5310.35\n5409.18\n5799.18\n6201.82\n6765.76\n6998.50\n7474.32\n7876.25\n8335.11\n9004.61\n9622.97\n9801.51\n10250.29\n10769.66\n11025.78\n11584.53\n11696.41\n11460.19\n11933.10\n12653.98\n13044.34\n12885.34\n12965.83\n13162.16\n13259.63\n13665.19\n14059.13\n14864.94\n15641.72\n16374.08\n17041.82\n17461.86\n17559.58\n17292.84\n17626.58\n18019.40\n18393.72\n19102.10\n19884.25\n20676.73\n21578.07\n22271.26\n22548.77\n22849.80\n23249.42\n23676.93\n24262.25\n24689.25\n24556.24\n23476.15\n23372.88\n23041.73\n22353.25\n22046.76\n22412.93\n23245.83\n23968.82\n24638.70\n25096.59\n25389.91\n22393.14\n23642.03\n\n\n\nFuente: datos proveniente de la web Fedea"
  },
  {
    "objectID": "my_trabajo_BigData.html#análisis-del-desempleo",
    "href": "my_trabajo_BigData.html#análisis-del-desempleo",
    "title": "Agregados Macroeconómicos para España",
    "section": "",
    "text": "Código#### Desempleo\n\n### Tasa de desempleo vs NAIRU\n\ndfn &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n\n# Gráfico de la evolución del NAIRU y parados\n\npn &lt;- ggplot(dfn, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = nairu, color = \"NAIRU\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = nairu, color = \"NAIRU\"), size = 1) +\n  geom_point(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1) +\n  labs(title = \"Evolución del PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\") +\n  scale_color_manual(values = c(\"NAIRU\" = \"blue\", \"Tasa de Paro\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\npn\n\n\n\n\n\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\n\ndfd &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo)) %&gt;% \n  mutate(diferencia_desempleo = b_tasa_paro - nairu)\n\npd &lt;- ggplot(dfd, aes(x = periodo, y = diferencia_desempleo, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\",size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_desempleo), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre Tasa de desempleo y NAIRU\",\n       x = \"Año\",\n       y = \"Diferencia entre Tasa de desempleo y NAIRU\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10))\n\n# Mostrar el gráfico\nprint(pd)\n\n\n\n\n\n\n\n\n\nCódigo### Como han evolucionado los parados y ocupados a lo largo del tiempo \ndf5 &lt;- df %&gt;% \n  select(comunidad, periodo, f_parados, f_ocupados) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(f_parados = round(f_parados, 3),\n         f_ocupados = round(f_ocupados, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Crear el gráfico con ggplot2\ngg_barras_apiladas &lt;- ggplot(df5, aes(x = periodo, fill = factor(comunidad))) +\n  geom_bar(aes(y = f_ocupados, color = \"Ocupados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  geom_bar(aes(y = f_parados, color = \"Parados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  labs(title = \"Comparación de Ocupados y Parados en España\",\n       x = \"Periodo\",\n       y = \"Número de Personas\",\n       color = \"Categoría\") +\n  scale_fill_manual(values = c(\"Ocupados\" = \"blue\", \"Parados\" = \"red\")) +\n  theme_stata()\n\n# Imprimir el gráfico\nprint(gg_barras_apiladas)\n\n\n\n\n\n\n\n\n\nCódigo### Tasa de desempleo \n\ndf6 &lt;- df %&gt;%\n  select(comunidad, periodo, b_tasa_paro) %&gt;%\n  filter(periodo &gt;= 1977) %&gt;%\n  mutate(b_tasa_paro = round(b_tasa_paro, 2)) %&gt;%\n  mutate(periodo = as.numeric(periodo)) \n\n\n# Filtrar para el año 1977\ndf6_1977 &lt;- df6 %&gt;% filter(periodo == 1977) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_1977 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 1995\ndf6_1995 &lt;- df6 %&gt;% filter(periodo == 1995) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1995 de mayor a menor según la columna b_tasa_paro\ndf6_1995 &lt;- df6_1995 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2007\ndf6_2007 &lt;- df6 %&gt;% filter(periodo == 2007) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_2007 &lt;- df6_2007 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2021\ndf6_2021 &lt;- df6 %&gt;% filter(periodo == 2021) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_2021 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_2021 %&gt;% arrange(desc(b_tasa_paro))\n\n\n\n\n# Función para crear un gráfico de barras para la tasa de paro\ncrear_grafico &lt;- function(data, title) {\n  ggplot(data, aes(x = reorder(comunidad, b_tasa_paro), y = b_tasa_paro, fill = comunidad)) +\n    geom_bar(stat = \"identity\") +\n    labs(title = title, x = \"Comunidad Autónoma\", y = \"Tasa de Paro\") +\n    theme_stata() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))}\n\n# Crear gráficos individuales\ngrafico_1977 &lt;- crear_grafico(df6_1977, \"Tasa de Paro en 1977\")\ngrafico_1995 &lt;- crear_grafico(df6_1995, \"Tasa de Paro en 1995\")\ngrafico_2007 &lt;- crear_grafico(df6_2007, \"Tasa de Paro en 2007\")\ngrafico_2021 &lt;- crear_grafico(df6_2021, \"Tasa de Paro en 2021\")\n\n# Organizar los gráficos en una cuadrícula\ngrafico_combinado &lt;- wrap_plots(\n  grafico_1977 + theme(legend.position = \"none\"),\n  grafico_1995 + theme(legend.position = \"none\"),\n  ncol = 2) + plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma\",\n    subtitle = \"(1977, 1995, 2007, y 2021 respectivamente)\",\n    caption = \"Datos del INE\")\n# Mostrar el gráfico combinado\nprint(grafico_combinado)\n\n\n\n\n\n\n\n\n\nCódigografico_combinado2 &lt;- wrap_plots(\n  grafico_2007 + theme(legend.position = \"none\"),\n  grafico_2021 + theme(legend.position = \"none\"),\n  ncol = 2) + plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma\",\n    subtitle = \"(1977, 1995, 2007, y 2021 respectivamente)\",\n    caption = \"Datos del INE\")\nprint(grafico_combinado2)\n\n\n\n\n\n\n\n\n\nCódigo#### Mapa coroplético desempleo y PIB \n\nnuevos_nombres2 &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Baleares\", \"Canarias\", \n                     \"Cantabria\", \"Castilla y León\", \"Castilla-La Mancha\", \"Cataluña\", \n                     \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Madrid\", \n                     \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta\", \"Melilla\")\ndfc &lt;- df %&gt;%\n  distinct(comunidad) %&gt;%\n  mutate(nuevos_nombres = nuevos_nombres2)\n\ndfc &lt;- left_join(df, dfc, by = \"comunidad\")\n\ndfc &lt;- dfc %&gt;%\n  select(nuevos_nombres, periodo, F_PIB_real_2016, f_parados, f_ocupados, f_población) %&gt;%\n  mutate(tasa_desempleo =  f_parados/(f_parados + f_ocupados)*100) %&gt;%\n  mutate(pibpc= F_PIB_real_2016/f_población) %&gt;%\n  select(nuevos_nombres, periodo, pibpc, tasa_desempleo) %&gt;%\n  rename(comunidad = nuevos_nombres)\n\n\n#Obtenemos el mapa de España por CCAA\ndf_ccaa &lt;- esp_get_ccaa()%&gt;%\n  select(ccaa.shortname.es, geometry) %&gt;%\n  rename(\"comunidad\" = ccaa.shortname.es)\n\ndf_datos_mapa &lt;- dfc %&gt;% filter(periodo %in% c(1955, 1975, 2000, 2021)) %&gt;%\n  filter(`comunidad`!= \"total\")\n\n\ndf_mapa &lt;- left_join(df_ccaa, df_datos_mapa, by = c(\"comunidad\" = \"comunidad\"))\n\n### Mapa para el paro \n\ndf_mapa_ccaa1 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(paro_ccaa_4 = ntile(tasa_desempleo, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(paro_ccaa_4 = forcats::as_factor(paro_ccaa_4))\n\npc &lt;- ggplot(df_mapa_ccaa1) +\n  geom_sf(aes(geometry = geometry, fill = paro_ccaa_4)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"Tasa de desempleo por cuartiles\" , caption = \"Elaboración propia a partir de datos extraídos del INE\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\npc\n\n\n\n\n\n\n\n\n\nCódigo### Mapa para el PIB\n\ndf_mapa_ccaa2 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(pibpc = ntile(pibpc, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(pibpc = forcats::as_factor(pibpc))\n\npc2 &lt;- ggplot(df_mapa_ccaa2) +\n  geom_sf(aes(geometry = geometry, fill = pibpc)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"PIBpc real por cuartiles\" , caption = \"Elaboración propia a partir de datos extraídos del INE\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\npc2"
  },
  {
    "objectID": "my_trabajo_BigData.html#curvas-de-phillips",
    "href": "my_trabajo_BigData.html#curvas-de-phillips",
    "title": "Agregados Macroeconómicos para España",
    "section": "",
    "text": "Código### Curvas de Phillips \n\n\n# Crear columnas para los grupos de periodos\ndf10 &lt;- df %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100)\n  \n  \n  df10 &lt;- df10 %&gt;%\n  mutate(periodo_grupo = case_when(\n    periodo &gt;= 1977 & periodo &lt;= 2000 ~ \"1977-2000\",\n    periodo &gt; 2000 & periodo &lt;= 2021 ~ \"2000-2021\",\n    periodo &gt;= 1977 & periodo &lt;= 2021 ~ \"1977-2021\",\n    TRUE ~ \"Otro\"\n  ))\n\n# Gráfico de la Curva de Phillips con líneas para diferentes periodos\np_phillips &lt;- ggplot(df10, aes(x = b_tasa_paro, y = f_deflactor_pib, color = periodo_grupo)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  annotate('text', x = 7, y = 17, label = '1978-2000', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 9, y = 6, label = '2000-2021', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 7.5, y = 11, label = '1978-2021', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  labs(title = \"Curva de Phillips\",\n       subtitle = \"La Curva de Phillips representa la relación entre la tasa de desempleo y la inflación.\\n¿Cómo ha evolucionado en España?\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: Datos del INE',\n       color = 'Periodo') +\n  scale_color_manual(values = c('#d1495b', '#00798c', '#fd5532')) +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\n# Añadir una capa de regresión para todo el conjunto de datos (discontinua)\np_phillips &lt;- p_phillips +\n  geom_smooth(aes(group = 1), method = 'lm', se = FALSE, linetype = 2, color = 'black')\n\nprint(p_phillips)\n\n\n\n\n\n\n\n\n\nCódigo### Comunidades CP\n\n# Filtrar datos por comunidades específicas y periodo\ndf_comunidades &lt;- df %&gt;% \n  filter(comunidad %in% c(\"mad\", \"and\", \"total\"), periodo &gt;= 1977 & periodo &lt;= 2021) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  group_by(comunidad) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100) %&gt;%\n  ungroup()\n\n# Gráfico de la Curva de Phillips con una regresión para cada comunidad\np_phillips_comunidades &lt;- ggplot(df_comunidades, aes(x = b_tasa_paro, y = f_deflactor_pib, color = comunidad)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  annotate('text', x = 33, y = 5, label = 'Andalucía', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 8, y = 11, label = 'España', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 6, y = 5, label = 'Madrid', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  labs(title = \"Curva de Phillips por Comunidad Autónoma\",\n       subtitle = \"Relación entre la tasa de desempleo y la inflación (1977-2021)\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: Datos del INE',\n       color = 'Comunidad Autónoma') +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\nprint(p_phillips_comunidades)"
  },
  {
    "objectID": "my_trabajo_BigData.html#agregados-macroeconómicos-para-españa",
    "href": "my_trabajo_BigData.html#agregados-macroeconómicos-para-españa",
    "title": "Perspectivas Macro: Análisis de Agregados Económicos en España",
    "section": "",
    "text": "Bienvenido al análisis detallado de los agregados macroeconómicos clave para la economía española y sus regiones. Este trabajo, elaborado por Juan Antonio Abello Durán de la Universitat de València, se sumerge en variables cruciales como la producción, la tasa de desempleo y la inflación.\n\nEl objetivo principal de este estudio es proporcionar una visión integral de la evolución económica de España, centrándose en aspectos fundamentales como el Producto Interno Bruto (PIB), la tasa de desempleo y la inflación. Utilizando herramientas de programación en R y la versatilidad de Quarto para la creación de documentos dinámicos, exploraremos los datos disponibles y ofreceremos una perspectiva única sobre el desarrollo económico a lo largo del tiempo. Asimismo, uno de los aspectos más interesantes de este trabajo fue la limpieza de datos realizada para homogeneizar las distintas bases de datos utilizadas.\n\nLos datos utilizados en este análisis han sido sacados de conocidas bases de datos macroeconómicos para la economía española y sus regiones. En concreto, se utlizaron las siguientes bases:\n\nFEDEA: Se utilizaron las Series largas de algunos agregados económicos y demográficos regionales que contiene información de diversas varibles desde 1955 hasta 2021. Su autor, Ángel de la Fuente, un economista con un doctorado en Ciencias Económicas por la Universidad de Pennsylvania. Ha trabajado como profesor asociado, consultor para organismos internacionales y es actualmente el Director Ejecutivo de la Fundación de Estudios de Economía Aplicada (FEDEA) desde 2014. Además, ha recibido premios por su destacada labor, incluyendo el accésit al I Premio de la Fundación Banco Herrero en 2002.\nBdeMores: Una base de datos anuales de magnitudes macroeconómicas regionales de la economía española, compatible con las bases nacionales BDREMS. Iniciada en 1998, respalda los modelos macroeconómicos REMS y EREMS utilizados por la Dirección General de Presupuestos del Ministerio de Hacienda y Función Pública. Las magnitudes están clasificadas por región y rama de actividad, valoradas a precios corrientes y/o constantes de 2015, siguiendo los criterios del SEC2010. En la actualización de mayo de 2023, se incluyen revisiones relacionadas con la reclasificación temporal de la SAREB en el Sector de las Administraciones Públicas, conforme al acuerdo entre Eurostat y las autoridades estadísticas españolas.\nAMECO: La base de datos macroeconómica anual de la Dirección General de Asuntos Económicos y Financieros de la Comisión Europea. Utilizada para análisis e informes, incluye datos de la UE, la zona euro, Estados miembros, países candidatos y otros de la OCDE, abarcando más de 40 países. Organizada en dieciocho capítulos, abarca desde población y empleo hasta principales agregados de cuentas nacionales, sectores y ajuste cíclico de variables financieras públicas. A partir de 2002, los países de la zona euro publican series nacionales en euros, convirtiendo datos en moneda nacional antes de 2002 utilizando el tipo de cambio fijo al euro. A pesar del cambio de denominación a euros, las comparaciones y agregaciones deben basarse en series históricas establecidas en ECU hasta 1998 y su continuación estadística en EUR desde 1999 en adelante. En el presente trabajo, se utilizó AMECO para obtener datos sobre el PIB potencial y la tasa de desempleo estructural (NAIRU) a la hora de realizar los análisis.\n\nPara realizar este análisis, hemos empleado una variedad de paquetes de R, desde tidyverse para manipulación de datos hasta ggplot2 y plotly para la creación de gráficos interactivos. Además, hemos utilizado Quarto, una herramienta potente para la generación de documentos enriquecidos, que nos permite combinar texto, código y visualizaciones de manera efectiva. Las librerías utilizadas son las siguientes:\n\nCódigo#- 0) Librerías utilizadas -------------------------------------------------------\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(kableExtra)\nlibrary(ggplot2)\nlibrary(ggthemes)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(openxlsx)\nlibrary(countrycode)\nlibrary(ggimage)\nlibrary(gganimate)\nlibrary(lubridate)\nlibrary(sf)\nlibrary(mapSpain)\nlibrary(DT)\nlibrary(gt)\nlibrary(patchwork)\nlibrary(ggplot2)\nlibrary(ggtext)\nlibrary(vembedr)\n\n\n\nLa estructura del trabajo se divide en un análisis del Producto Interior Bruto (PIB), posteriormente se realiza un análisis de las Tasas de Desempleo, la evolución de la inflación y por último, se concluye con la representación gráfica de un par de Curvas de Phillips. A continuación, presentamos algunas de las visualizaciones clave obtenidas a partir del análisis de los datos macroeconómicos de España.\n\nEl Producto Interno Bruto (PIB) constituye un indicador fundamental que refleja la salud y la dinámica económica de un país. En este segmento de nuestro estudio, exploraremos detalladamente la evolución del PIB en el contexto de la economía española. Este análisis permitirá arrojar luz sobre las tendencias históricas, identificar patrones significativos y, en última instancia, comprender mejor los factores que impulsan el crecimiento económico.\n\nEl PIB real representa el valor total de los bienes y servicios producidos por una economía, ajustado a la inflación. Por otro lado, el PIB potencial denota la capacidad máxima de producción de la economía en un periodo sin generar presiones inflacionarias. Analizando la evolución de ambos, identificamos no solo las variaciones a lo largo de las décadas, sino también las discrepancias entre el rendimiento económico real y su capacidad subyacente. A través de herramientas de visualización, examinamos gráficamente esta evolución para obtener una comprensión sobre el crecimiento económico y las fluctuaciones cíclicas que han marcado su desarrollo.\n\n\nGráfico animado\nGráfico sin animar\nCódigo\n\n\n\n\nCódigo# Importar y arreglar los datos\nruta &lt;- \"./datos/spain.xlsx\"\ndf &lt;- rio::import(ruta) \ndf &lt;- df %&gt;%\n  slice(-1) %&gt;%\n  select(-c(24, 25, 26)) %&gt;%\n  mutate_at(vars(4:ncol(.)), as.numeric)\n\n#### PIB\n\n### Evolución del PIB y del PIB potencial \n\ndf1 &lt;- df %&gt;% \n  select(comunidad, periodo, PIB_real_2015, pib_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(PIB_real_2015 = round(PIB_real_2015, 3),\n         pib_potencial = round(pib_potencial, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Gráfico de la evolución del PIB real y potencial\n\np1 &lt;- ggplot(df1, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1) +\n  geom_point(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1) +\n  labs(title = \"Evolución del PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\", caption = \"Fuente: AMECO\") +\n  scale_color_manual(values = c(\"PIB Real\" = \"blue\", \"PIB Potencial\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\n# Crea la animación\np_animated &lt;- p1 +\n  transition_reveal(periodo) +\n  enter_fade() + \n  exit_fade()\n\n# Visualiza la animación\nanimate(p_animated, nframes = 200, fps = 20, end_pause = 0)\n\n\n\n\n\n\n\n\n\n\nCódigop1\n\n\n\n\n\n\n\n\n\n\nCódigo# Importar y arreglar los datos\nruta &lt;- \"./datos/spain.xlsx\"\ndf &lt;- rio::import(ruta) \ndf &lt;- df %&gt;%\n  slice(-1) %&gt;%\n  select(-c(24, 25, 26)) %&gt;%\n  mutate_at(vars(4:ncol(.)), as.numeric)\n\n#### PIB\n\n### Evolución del PIB y del PIB potencial \n\ndf1 &lt;- df %&gt;% \n  select(comunidad, periodo, PIB_real_2015, pib_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(PIB_real_2015 = round(PIB_real_2015, 3),\n         pib_potencial = round(pib_potencial, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Gráfico de la evolución del PIB real y potencial\n\np1 &lt;- ggplot(df1, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = PIB_real_2015, color = \"PIB Real\"), size = 1) +\n  geom_point(aes(y = pib_potencial, color = \"PIB Potencial\"), size = 1) +\n  labs(title = \"Evolución del PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\", caption = \"Fuente: AMECO\") +\n  scale_color_manual(values = c(\"PIB Real\" = \"blue\", \"PIB Potencial\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\n\n\n\n\n\nEn complemento al análisis detallado de la evolución del PIB real y el PIB potencial (1.1), exploraremos el diferencial porcentual entre ambos indicadores en esta sección. Este enfoque proporcionará un apoyo visual a la comprensión de las variaciones entre el rendimiento económico real y su capacidad potencial.\nEste análisis específico nos permitirá identificar periodos de sobre o subutilización de la capacidad económica, proporcionando así una perspectiva más completa sobre la eficiencia y resiliencia de la economía en diversas coyunturas.\nCuando la diferencia entre el PIB real y el PIB potencial es positiva, indica que la economía está operando por encima de su capacidad máxima de producción. Esto puede traducirse en presiones inflacionarias, ya que la demanda supera la oferta disponible. Por otro lado, una diferencia negativa sugiere que la economía está operando por debajo de su capacidad, indicando subutilización de recursos y posible desempleo.\nEjemplos de Diferencia Negativa:\n\nCrisis de la Burbuja Inmobiliaria (2008 y posteriores): En este período, la diferencia negativa entre el PIB real y el PIB potencial en España señaló una significativa subutilización de la capacidad económica. La contracción en el sector inmobiliario y financiero llevó a una recesión, generando desempleo y disminuyendo la producción por debajo de su potencial.\nCrisis del COVID-19 (2020): Durante la crisis provocada por la pandemia, la diferencia negativa entre el PIB real y el PIB potencial reflejó una brusca contracción económica. Las restricciones y la disminución de la demanda llevaron a una caída en la producción, generando una brecha significativa. Las medidas de confinamiento y la incertidumbre económica contribuyeron a la subutilización de recursos.\n\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\ndf2 &lt;- df %&gt;% \n  select(comunidad, periodo, diferencia_real_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(diferencia_real_potencial = round(diferencia_real_potencial, 3),\n         periodo = as.numeric(periodo)) \n\n# Crear el gráfico con etiquetas en el eje x en vertical\np2 &lt;- ggplot(df2, aes(x = periodo, y = diferencia_real_potencial, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\", size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_real_potencial), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Diferencia Real-Potencial\", caption = \"Fuente: AMECO\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10)) +\n  scale_x_continuous(breaks = seq(min(df2$periodo), max(df2$periodo), by = 2))\n\n\n# Mostrar el gráfico\nprint(p2)\n\n\n\n\n\n\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\ndf2 &lt;- df %&gt;% \n  select(comunidad, periodo, diferencia_real_potencial) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(diferencia_real_potencial = round(diferencia_real_potencial, 3),\n         periodo = as.numeric(periodo)) \n\n# Crear el gráfico con etiquetas en el eje x en vertical\np2 &lt;- ggplot(df2, aes(x = periodo, y = diferencia_real_potencial, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\", size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_real_potencial), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre PIB Real y Potencial\",\n       x = \"Año\",\n       y = \"Diferencia Real-Potencial\", caption = \"Fuente: AMECO\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10)) +\n  scale_x_continuous(breaks = seq(min(df2$periodo), max(df2$periodo), by = 2))\n\n\n\n\n\n\nSegún BBVA Research, el 2024 será un año de desaceleración para el crecimiento de las economías avanzadas. Además, las tensiones geopolíticas son significativas, incluyendo la expectativa de elecciones en EE. UU., en el Parlamento Europeo, entre otras. Los Bancos Centrales deberán finalizar la carrera por normalizar la inflación. La desinflación ha sido más rápida de lo anticipado. Será un año de ajuste fiscal para la eurozona con posibles efectos de contagio que podrían afectar a la economía española. Las elecciones en el Parlamento Europeo ponen de manifiesto la senda que seguirá la UE y una posible polarización que aumentaría la incertidumbre en la política económica.\nEspaña experimentó un crecimiento del 2,4% en 2023, el doble de lo previsto a finales de 2022, impulsado por políticas fiscales expansivas. La industria española tuvo un mejor desempeño que la industria europea gracias a la ventaja comparativa de no depender tanto del gas ruso. Además, aumentó la demanda interna, tanto pública como privada. También se observa un aumento en la migración: más consumo, mayor demanda y más empleo, entre otros. Se prevé que estas tendencias continúen en 2024, con un crecimiento superior al promedio europeo. Dado que España es una economía pequeña y muy abierta, estará altamente sensible a la incertidumbre y a las políticas económicas globales.\n\n\n\n\n\n\n\n\n\n\n\nEn esta sección, contrastamos el PIB per cápita real y nominal, siendo el año base para el PIB real el 2016. El PIB nominal, reflejando el valor total sin ajustes inflacionarios, tiende a estar por debajo del PIB real debido al impacto de la inflación.\nRealizar el análisis en torno al PIB pc real en lugar del PIB pc nominal es esencial por varias razones fundamentales. En primer lugar, el PIB pc real ajusta los valores de producción por inflación, ofreciendo una comparación más precisa del crecimiento económico a lo largo del tiempo al eliminar el efecto de los cambios en los precios. Esto resulta crucial para evaluar el aumento real en la producción y entender el verdadero progreso económico. En segundo lugar, el PIB pc real refleja de manera más precisa el bienestar real de la población al capturar no solo el crecimiento nominal, sino también el aumento real en los ingresos y niveles de vida. Por el contrario, el PIB pc nominal puede proporcionar interpretaciones engañosas, ya que los cambios en los valores pueden deberse simplemente a la inflación, sin implicar un cambio sustancial en la capacidad adquisitiva de la población.\nEn el análisis del PIB per cápita real desde 1955 hasta la crisis financiera de 2008, se observa una marcada tendencia de crecimiento, indicativa de un período de desarrollo económico en España. Sin embargo, a partir de 2008, tras la crisis de la burbuja inmobiliaria, se evidencia un relativo estancamiento en el crecimiento del PIB per cápita real. Este fenómeno refleja los desafíos económicos y las fluctuaciones asociadas con eventos significativos.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Evolución del PIB per cápita \ndf3 &lt;- df %&gt;% \n  select(comunidad, periodo, f_deflactor_pib, F_PIB_real_2016, f_población) %&gt;%\n  filter(comunidad == \"total\") %&gt;%\n  mutate(pib_nominal = F_PIB_real_2016 * f_deflactor_pib ) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016*1000) %&gt;%\n  mutate(pib_nominal = pib_nominal*1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  mutate(pibpc_nominal = pib_nominal / f_población)\n\n# Crear el gráfico interactivo con barras y línea\np3 &lt;- ggplot(df3, aes(x = as.factor(periodo), group = 1)) +  # Convierte periodo a factor\n  geom_bar(aes(y = pibpc_real, fill = \"PIB per cápita real\"), stat = \"identity\", position = \"dodge\", color = \"black\", alpha = 0.7) +\n  geom_ribbon(aes(ymin = 0, ymax = pibpc_nominal), fill = \"blue\", alpha = 0.1) +\n  geom_line(aes(y = pibpc_nominal, color = \"PIB per cápita nominal\"), size = 0.5) +\n  geom_point(aes(y = pibpc_nominal), color = \"blue\", size = 2) +\n  labs(title = \"Comparación entre PIB per cápita nominal y real\",\n       x = \"Año\",\n       y = \"PIB per cápita real\",\n       fill = \"Categoría\",\n       color = \"PIB per cápita nominal\",\n       caption = \"Fuente: FEDEA\") +\n  scale_fill_manual(values = c(\"PIB per cápita real\" = \"#FF9999\"), guide = \"none\") +  # Deshabilitar la leyenda para fill\n  scale_color_manual(values = c(\"PIB per cápita nominal\" = \"blue\"), guide = \"none\") +  # Deshabilitar la leyenda para color\n  scale_x_discrete(breaks = unique(df3$periodo[seq(1, nrow(df3), by = 5)])) +  # Muestra los años de 5 en 5\n  theme_stata(base_family = \"\") +\n  theme(legend.position = \"bottom\", axis.text.x = element_text(angle = 45, hjust = 1))\n\n# Convertir a gráfico interactivo con plotly\np3 &lt;- ggplotly(p3)\n\n# Mostrar el gráfico interactivo\np3\n\n\n\n\n\n\n\n\nCódigo### Evolución del PIB per cápita \ndf3 &lt;- df %&gt;% \n  select(comunidad, periodo, f_deflactor_pib, F_PIB_real_2016, f_población) %&gt;%\n  filter(comunidad == \"total\") %&gt;%\n  mutate(pib_nominal = F_PIB_real_2016 * f_deflactor_pib ) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016*1000) %&gt;%\n  mutate(pib_nominal = pib_nominal*1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  mutate(pibpc_nominal = pib_nominal / f_población)\n\n# Crear el gráfico interactivo con barras y línea\np3 &lt;- ggplot(df3, aes(x = periodo, group = 1)) +\n  geom_bar(aes(y = pibpc_real, fill = \"PIB per cápita real\"), stat = \"identity\", position = \"dodge\", color = \"black\", alpha = 0.7) +\n  geom_ribbon(aes(ymin = 0, ymax = pibpc_nominal), fill = \"blue\", alpha = 0.1) +\n  geom_line(aes(y = pibpc_nominal, color = \"PIB per cápita nominal\"), size = 0.5) +\n  geom_point(aes(y = pibpc_nominal), color = \"blue\", size = 2) +\n  labs(title = \"Comparación entre PIB per cápita nominal y real\",\n       x = \"Año\",\n       y = \"PIB per cápita real\",\n       fill = \"Categoría\",\n       color = \"PIB per cápita nominal\",\n       caption = \"Fuente: FEDEA\") +\n  scale_fill_manual(values = c(\"PIB per cápita real\" = \"#FF9999\")) +\n  scale_color_manual(values = c(\"PIB per cápita nominal\" = \"blue\")) +\n  theme_stata(base_family = \"\") +\n  theme(legend.position = \"bottom\", axis.text.x = element_text(angle = 90, hjust = 0.5))\n\n\n\n\n\n\nEn esta sección, presentaremos una tabla detallada que desglose el PIB per cápita real para las Comunidades Autónomas de España desde 1955 hasta la fecha actual. Esta tabla proporcionará una visión exhaustiva de la distribución del crecimiento económico a nivel regional, destacando posibles disparidades y patrones de desarrollo. Al presentar los datos de manera estructurada, facilitaremos la identificación de tendencias y la comprensión de la contribución relativa de cada región al panorama económico general del país.\n\n\nTabla\nCódigo\n\n\n\n\nCódigo### Tabla de scroll con pib pc real para las comunidades\n\nnuevos_nombres &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Islas Baleares\", \"Islas Canarias\", \n                    \"Cantabria\", \"Castilla y León\", \"Castilla - La Mancha\", \"Cataluña\", \n                    \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Comunidad de Madrid\", \n                    \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta y Melilla\", \"Total\")\n\n## Tabla que más me gusta \n\ndf4 &lt;- df %&gt;% \n  select(comunidad, periodo, F_PIB_real_2016, f_población) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016 * 1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  select(-c(3, 4)) %&gt;%\n  pivot_wider(names_from = periodo, values_from = pibpc_real) %&gt;% mutate(comunidad = nuevos_nombres)\n\ndf4 &lt;- df4 %&gt;% mutate(across(where(is.numeric), \\(x) round(x, digits = 2)))\n\ndf4 %&gt;%  \n  gt(rowname_col = \"comunidad\") %&gt;% tab_header(title = \"PIB per cápita por Comunidades Autónomas\", \n                                               subtitle = \"Euros constantes de 2015\")  %&gt;% \n  tab_source_note(md(\"Fuente: [BdeMores](https://www.sepg.pap.hacienda.gob.es/sitios/sepg/es-ES/Presupuestos/DocumentacionEstadisticas/Documentacion/paginas/basesdatosestudiosregionales.aspx)\")) %&gt;%\n  gtExtras::gt_theme_pff() \n\n\n\n\n\n\n\nPIB per cápita por Comunidades Autónomas\n    \n\nEuros constantes de 2015\n    \n\n\n      1955\n      1956\n      1957\n      1958\n      1959\n      1960\n      1961\n      1962\n      1963\n      1964\n      1965\n      1966\n      1967\n      1968\n      1969\n      1970\n      1971\n      1972\n      1973\n      1974\n      1975\n      1976\n      1977\n      1978\n      1979\n      1980\n      1981\n      1982\n      1983\n      1984\n      1985\n      1986\n      1987\n      1988\n      1989\n      1990\n      1991\n      1992\n      1993\n      1994\n      1995\n      1996\n      1997\n      1998\n      1999\n      2000\n      2001\n      2002\n      2003\n      2004\n      2005\n      2006\n      2007\n      2008\n      2009\n      2010\n      2011\n      2012\n      2013\n      2014\n      2015\n      2016\n      2017\n      2018\n      2019\n      2020\n      2021\n    \n\n\n\nAndalucía\n3184.06\n3265.11\n3285.89\n3448.74\n3750.92\n3754.61\n3824.63\n4094.68\n4373.78\n4780.93\n4956.07\n5343.86\n5686.45\n6059.73\n6593.74\n7146.68\n7356.05\n7688.80\n8076.45\n8181.97\n8504.48\n8692.45\n8617.60\n8953.16\n9468.35\n9783.68\n9661.23\n9718.81\n9861.41\n9908.32\n10189.57\n10409.64\n10928.73\n11507.39\n12053.80\n12764.42\n13065.95\n13101.51\n12792.82\n13021.62\n13298.47\n13595.89\n14243.52\n14727.59\n15277.55\n16142.12\n16633.43\n17015.28\n17481.28\n17869.88\n18180.95\n18649.52\n19033.52\n18914.99\n18080.75\n17667.49\n17443.59\n16780.82\n16390.91\n16639.83\n17186.52\n17658.59\n18126.28\n18581.98\n18816.76\n16712.47\n17583.96\n\n\nAragón\n4203.82\n4419.74\n4560.46\n4790.45\n5214.93\n5245.02\n5349.36\n5784.49\n6239.33\n6736.98\n6897.13\n7399.38\n7832.52\n8273.62\n8922.18\n9414.06\n9471.40\n9845.47\n10284.78\n10564.08\n11136.20\n11361.72\n11241.29\n11900.82\n12826.95\n13301.98\n13214.67\n13423.35\n13758.91\n13871.92\n14304.66\n14800.30\n15727.42\n16658.20\n17554.28\n18250.45\n18595.54\n18791.26\n18466.53\n18690.98\n19303.46\n19888.07\n20665.40\n21097.05\n21610.41\n22661.37\n23291.02\n23927.94\n24457.65\n24938.29\n25460.68\n26163.40\n26878.51\n26643.95\n25524.50\n25677.42\n25183.57\n24127.08\n24277.66\n24629.96\n25108.10\n25981.40\n26628.33\n27331.23\n27407.28\n24907.01\n26368.51\n\n\nAsturias\n4744.79\n4875.23\n4911.64\n5130.79\n5553.95\n5526.27\n5599.83\n5996.17\n6406.29\n6924.15\n7097.82\n7661.33\n8161.67\n8626.48\n9310.72\n9730.72\n9680.04\n10170.00\n10739.93\n11058.81\n11684.28\n11549.31\n11077.16\n11810.92\n12814.74\n13325.65\n13295.79\n13040.61\n12901.82\n13005.60\n13412.43\n13474.53\n13912.75\n14385.16\n14802.23\n14855.28\n15246.45\n15912.19\n15342.00\n15701.28\n15952.83\n16248.94\n16704.18\n17440.43\n17570.37\n18344.69\n19042.61\n19485.63\n19980.88\n20434.70\n21085.03\n21981.25\n22680.40\n22844.44\n21322.89\n21265.04\n21001.55\n20203.16\n19652.25\n19746.04\n20449.02\n20918.35\n21509.25\n21947.67\n22323.83\n19963.27\n21204.95\n\n\nIslas Baleares\n6231.96\n6517.08\n6680.64\n7052.96\n7712.10\n7808.81\n7977.59\n8458.08\n8947.62\n9705.44\n9984.38\n10827.74\n11589.16\n12359.66\n13460.35\n14415.75\n14681.66\n15186.35\n15768.66\n15741.30\n16139.95\n16201.53\n15787.59\n16401.20\n17343.61\n18227.06\n18369.84\n18506.99\n18823.88\n19170.14\n19959.82\n20415.77\n21454.83\n22207.71\n22864.76\n24528.21\n25006.75\n25015.85\n24644.85\n24739.63\n25036.24\n25557.81\n26897.41\n27349.77\n28414.74\n28999.80\n29308.11\n28459.45\n27892.40\n27838.22\n27958.58\n27957.63\n27927.80\n27496.32\n25890.56\n25385.69\n25166.30\n24597.82\n23986.57\n24560.78\n25258.25\n26088.78\n26572.15\n26886.72\n26918.33\n20386.75\n22481.00\n\n\nIslas Canarias\n3735.63\n3959.18\n4126.20\n4273.75\n4577.04\n4525.23\n4549.25\n4908.73\n5284.79\n5799.59\n6036.15\n6600.64\n7123.66\n7636.70\n8359.85\n9232.29\n9682.30\n10160.44\n10719.02\n10614.35\n10802.18\n11007.59\n10893.88\n11622.63\n12628.39\n13166.65\n13152.48\n13122.05\n13209.70\n13205.48\n13513.66\n13869.76\n14629.50\n15436.11\n16192.57\n16157.89\n16279.66\n16782.69\n16857.28\n17250.68\n17491.69\n17723.49\n18279.16\n19117.60\n20164.53\n20599.21\n21349.38\n21215.50\n21430.68\n21381.46\n21476.82\n21602.70\n21782.75\n21379.21\n20165.78\n20110.60\n19699.94\n19017.89\n18608.16\n18652.93\n19114.49\n19608.96\n20169.18\n20362.09\n20420.84\n16342.97\n17479.28\n\n\nCantabria\n5079.42\n5251.58\n5321.15\n5625.07\n6160.65\n6141.94\n6213.74\n6623.24\n7044.01\n7595.51\n7767.67\n8284.32\n8720.07\n9189.68\n9889.50\n10555.61\n10732.20\n10951.40\n11224.46\n11574.62\n12248.90\n12451.91\n12279.59\n12877.34\n13754.81\n14129.58\n13900.03\n13858.20\n13941.20\n14009.82\n14407.07\n14623.16\n15249.05\n15933.04\n16563.06\n16576.08\n16447.43\n16695.61\n16313.69\n16669.42\n16839.02\n17051.28\n17623.65\n18464.06\n19230.23\n20146.56\n21035.44\n21559.58\n21726.02\n22058.07\n22549.66\n23104.29\n23531.39\n23395.16\n22271.10\n22074.08\n21454.60\n20943.27\n20275.89\n20642.84\n21253.88\n21904.75\n22593.54\n23058.30\n23329.69\n20871.72\n22001.76\n\n\nCastilla y León\n3102.04\n3238.82\n3318.96\n3478.68\n3779.67\n3785.86\n3868.26\n4233.23\n4621.83\n5090.55\n5316.98\n5707.40\n6045.86\n6454.18\n7035.09\n7536.35\n7668.56\n8020.52\n8428.12\n8600.57\n9007.90\n9242.45\n9199.64\n9712.88\n10433.21\n10834.70\n10755.93\n10819.12\n10977.14\n11197.95\n11687.08\n12185.33\n13059.04\n13719.70\n14338.27\n14758.71\n14837.96\n15051.97\n15330.34\n15752.81\n16024.23\n16322.86\n16620.30\n17076.69\n17741.19\n18454.03\n18960.00\n19582.24\n20094.49\n20620.28\n21158.80\n21812.07\n22409.77\n22413.90\n21763.87\n21846.02\n21726.86\n21036.84\n20667.84\n20874.54\n21571.73\n22407.20\n22878.50\n23664.87\n23874.41\n21887.39\n22941.17\n\n\nCastilla - La Mancha\n2456.58\n2577.68\n2654.32\n2802.80\n3065.77\n3066.38\n3135.44\n3433.56\n3751.51\n4151.28\n4356.50\n4717.27\n5041.06\n5500.17\n6127.84\n6702.69\n6949.68\n7439.34\n7996.81\n8130.48\n8484.84\n8738.60\n8733.82\n9188.48\n9831.96\n10087.97\n9887.23\n10053.11\n10311.90\n10515.89\n10971.93\n11355.29\n12070.80\n12922.08\n13760.94\n14262.39\n14559.97\n14691.30\n13997.93\n14169.67\n14340.03\n14865.66\n15333.87\n15963.54\n16290.41\n16972.03\n17497.64\n17987.04\n18321.18\n18633.95\n18904.09\n19389.86\n19820.64\n19806.19\n18911.27\n18639.66\n18162.69\n17279.69\n17283.16\n17160.75\n17915.36\n18751.71\n19200.25\n19827.69\n19875.40\n18300.31\n19134.86\n\n\nCataluña\n6663.59\n6824.54\n6849.72\n7171.18\n7767.20\n7821.92\n7969.70\n8405.21\n8844.05\n9497.41\n9672.10\n10202.82\n10621.36\n11082.51\n11807.45\n12424.28\n12526.24\n12975.45\n13497.04\n13818.70\n14508.26\n14550.79\n14164.80\n14654.16\n15446.29\n15849.49\n15616.21\n15749.06\n16021.47\n16014.35\n16359.88\n16885.99\n17915.79\n18890.94\n19816.82\n21021.68\n21694.22\n21951.50\n21660.02\n22185.77\n22760.87\n23311.46\n23994.57\n24739.74\n25781.17\n26709.13\n27577.71\n27700.65\n27827.51\n28155.44\n28424.50\n28975.50\n29322.11\n28891.12\n27622.97\n27705.79\n27054.65\n26271.87\n26061.18\n26676.33\n27802.07\n28673.54\n29350.43\n29688.56\n29977.45\n26114.80\n27605.66\n\n\nComunidad Valenciana\n4650.84\n4859.48\n4978.37\n5252.97\n5738.44\n5690.94\n5697.55\n6032.16\n6372.11\n6843.74\n6970.97\n7390.33\n7732.53\n8107.98\n8681.40\n9233.18\n9374.23\n9840.40\n10373.49\n10574.09\n11059.30\n11243.54\n11090.51\n11530.72\n12211.35\n12545.87\n12365.38\n12531.30\n12816.82\n12857.59\n13194.96\n13571.82\n14344.12\n15152.46\n15918.62\n16578.41\n17083.29\n16902.50\n16423.78\n16618.42\n17029.83\n17253.41\n18107.27\n18999.40\n19736.76\n20722.54\n21535.67\n21652.85\n21589.66\n21732.48\n21901.31\n22261.35\n22391.15\n22171.63\n20755.06\n20565.24\n20107.46\n19334.92\n19167.72\n19642.18\n20377.71\n20946.30\n21671.64\n22036.96\n22243.25\n19663.47\n20698.70\n\n\nExtremadura\n2198.55\n2310.77\n2385.98\n2497.25\n2708.40\n2661.56\n2683.84\n2868.07\n3058.12\n3353.84\n3488.43\n3761.45\n4002.93\n4241.23\n4588.83\n4978.48\n5118.02\n5355.82\n5632.85\n5686.80\n5897.57\n6036.79\n5996.81\n6463.42\n7083.62\n7456.41\n7489.12\n7535.49\n7650.69\n7758.03\n8048.72\n8467.69\n9149.13\n9668.62\n10166.74\n10397.85\n10810.48\n10933.80\n10749.62\n10863.82\n10948.10\n11307.15\n11755.79\n12219.09\n12873.82\n13595.36\n14023.92\n14554.44\n15030.81\n15498.44\n16009.65\n16597.39\n17241.09\n17499.10\n16942.16\n16965.18\n16660.03\n16130.87\n16040.25\n16104.88\n16704.74\n17117.11\n17859.26\n18288.03\n18664.12\n16987.18\n17839.78\n\n\nGalicia\n2926.13\n3039.37\n3096.05\n3244.77\n3515.60\n3480.33\n3507.19\n3812.80\n4135.52\n4546.08\n4739.24\n5126.94\n5473.57\n5839.93\n6362.18\n6904.91\n7121.02\n7494.74\n7921.00\n8109.56\n8518.49\n8749.13\n8717.78\n9194.14\n9868.00\n10177.11\n10058.31\n10205.52\n10445.25\n10528.26\n10857.70\n11109.39\n11676.53\n12366.64\n13030.57\n13110.82\n13570.08\n13804.15\n13757.45\n14112.16\n14385.08\n14693.20\n15176.79\n15653.70\n16346.67\n16880.98\n17408.60\n17825.27\n18287.43\n18905.24\n19523.84\n20334.68\n21103.53\n21431.84\n20646.11\n20731.93\n20296.42\n19782.05\n19556.58\n19785.33\n20743.92\n21478.68\n22104.78\n22595.59\n22909.16\n20831.24\n21952.77\n\n\nComunidad de Madrid\n9558.50\n9775.68\n9796.12\n9968.67\n10510.68\n10379.33\n10383.62\n10753.06\n11110.86\n11895.69\n12078.94\n12398.31\n12560.03\n12946.12\n13626.43\n14214.80\n14236.58\n14887.34\n15646.07\n16036.68\n16863.97\n16663.30\n15988.46\n16383.46\n17113.56\n17623.79\n17430.58\n17370.49\n17455.90\n17573.65\n18099.36\n18669.80\n19793.43\n20683.63\n21504.77\n22232.15\n23029.92\n22999.72\n22674.36\n23135.20\n23712.76\n24127.20\n25091.19\n26552.35\n27639.66\n28877.15\n29807.70\n29787.10\n29959.55\n30557.91\n31364.28\n32270.98\n32682.32\n32453.92\n31438.92\n31313.91\n31388.70\n30800.60\n30432.59\n30954.62\n32040.34\n32947.24\n33948.04\n34445.54\n34981.17\n30814.50\n32553.06\n\n\nMurcia\n3228.71\n3340.95\n3390.47\n3578.17\n3910.95\n4014.29\n4188.12\n4573.00\n4982.14\n5496.21\n5750.52\n6213.60\n6626.34\n7101.63\n7772.05\n8414.49\n8629.75\n9058.69\n9552.74\n9584.66\n9871.70\n9959.48\n9748.46\n10243.40\n10960.82\n11195.39\n10946.72\n11128.61\n11420.56\n11581.99\n12015.27\n12356.41\n13056.28\n13799.28\n14511.97\n15432.64\n14879.11\n14804.97\n14558.08\n14717.62\n14726.97\n15057.73\n15856.59\n16578.84\n17121.40\n17963.00\n18550.88\n18813.79\n19060.58\n19216.96\n19465.24\n19854.22\n20185.28\n20147.88\n18968.46\n18778.49\n18455.92\n17917.56\n17664.13\n18038.51\n19228.58\n19994.89\n20560.15\n20475.31\n20716.98\n18658.77\n19494.51\n\n\nNavarra\n4846.13\n5034.76\n5134.04\n5399.56\n5885.97\n5939.46\n6059.16\n6564.75\n7096.70\n7703.30\n7930.38\n8499.01\n8989.50\n9435.23\n10112.58\n10862.18\n11133.16\n11521.64\n11984.08\n12510.87\n13401.12\n13540.52\n13281.20\n13827.10\n14666.31\n15074.02\n14855.11\n15262.25\n15821.79\n16309.33\n17204.05\n17679.67\n18682.71\n19840.40\n20953.17\n21656.75\n21627.10\n21277.26\n20944.71\n21474.10\n21983.47\n22522.47\n23453.64\n24336.46\n25129.66\n26480.11\n26954.29\n27332.30\n27661.40\n28266.35\n28748.27\n29488.54\n29950.58\n29922.05\n28487.57\n28636.96\n28451.83\n27452.82\n27238.74\n27881.04\n28631.54\n29369.12\n30279.23\n30579.74\n30959.36\n27560.54\n29196.57\n\n\nPaís Vasco\n7656.85\n7714.94\n7615.20\n7843.78\n8356.13\n8286.57\n8341.94\n8910.04\n9495.57\n10322.60\n10642.58\n11176.85\n11584.52\n12068.27\n12838.14\n13390.55\n13407.30\n13822.56\n14321.37\n14998.16\n16122.86\n15873.80\n15169.08\n15346.86\n15830.36\n15879.17\n15292.26\n15363.18\n15567.35\n15819.79\n16443.38\n16884.39\n17820.44\n18694.34\n19507.60\n19987.69\n20488.13\n20237.52\n19937.44\n20204.07\n20868.62\n21126.89\n22105.44\n23377.51\n24584.11\n25682.43\n26512.78\n26929.10\n27439.75\n28101.74\n28967.53\n29889.79\n30676.06\n30860.59\n29490.54\n29871.53\n29572.77\n29109.38\n28532.82\n29136.94\n30160.26\n30998.27\n31716.94\n32265.11\n32614.72\n29030.46\n30787.36\n\n\nLa Rioja\n3862.78\n4031.59\n4127.92\n4348.39\n4751.49\n4755.24\n4830.30\n5222.75\n5634.51\n6172.88\n6413.90\n6833.34\n7185.18\n7565.76\n8135.07\n8706.45\n8847.37\n9125.51\n9456.04\n9609.28\n10011.19\n10183.78\n10040.44\n10677.85\n11559.28\n11997.59\n11937.61\n12235.70\n12638.20\n12772.08\n13209.99\n13547.26\n14271.13\n15087.57\n15859.55\n18691.17\n19204.72\n19601.80\n19484.25\n19790.94\n20205.09\n20766.23\n21523.10\n22129.07\n22787.67\n24071.35\n24500.23\n24623.15\n25034.77\n25331.97\n25714.63\n26426.67\n26908.44\n26871.49\n25556.30\n25646.08\n25048.76\n24206.43\n23700.70\n24084.91\n24968.35\n25633.63\n25858.92\n26349.04\n26510.63\n24030.64\n25138.06\n\n\nCeuta y Melilla\n4214.89\n4260.60\n4221.57\n4260.95\n4459.81\n4442.94\n4523.97\n4687.96\n4843.89\n5286.45\n5474.71\n5869.81\n6213.84\n6590.14\n7120.09\n7575.67\n7658.48\n8150.32\n8727.11\n8889.04\n9294.32\n9413.58\n9251.35\n9802.27\n10575.61\n11181.96\n11286.03\n11592.50\n12010.28\n11938.50\n12144.63\n12218.44\n12636.80\n13144.98\n13613.44\n14887.46\n14556.10\n14444.51\n15100.53\n14933.16\n15004.37\n15120.51\n15764.50\n16514.26\n17138.75\n17674.29\n17943.49\n18416.53\n19229.73\n19753.79\n20075.26\n20338.70\n20455.42\n20497.26\n19702.16\n19125.36\n18604.44\n17851.38\n17736.80\n17746.31\n18177.97\n18550.10\n18936.80\n19365.20\n19705.39\n18064.63\n19003.66\n\n\nTotal\n4428.61\n4587.84\n4662.12\n4884.06\n5298.26\n5310.35\n5409.18\n5799.18\n6201.82\n6765.76\n6998.50\n7474.32\n7876.25\n8335.11\n9004.61\n9622.97\n9801.51\n10250.29\n10769.66\n11025.78\n11584.53\n11696.41\n11460.19\n11933.10\n12653.98\n13044.34\n12885.34\n12965.83\n13162.16\n13259.63\n13665.19\n14059.13\n14864.94\n15641.72\n16374.08\n17041.82\n17461.86\n17559.58\n17292.84\n17626.58\n18019.40\n18393.72\n19102.10\n19884.25\n20676.73\n21578.07\n22271.26\n22548.77\n22849.80\n23249.42\n23676.93\n24262.25\n24689.25\n24556.24\n23476.15\n23372.88\n23041.73\n22353.25\n22046.76\n22412.93\n23245.83\n23968.82\n24638.70\n25096.59\n25389.91\n22393.14\n23642.03\n\n\n\nFuente: BdeMores\n\n    \n\n\n\n\n\n\n\nCódigo### Tabla de scroll con pib pc real para las comunidades\n\nnuevos_nombres &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Islas Baleares\", \"Islas Canarias\", \n                    \"Cantabria\", \"Castilla y León\", \"Castilla - La Mancha\", \"Cataluña\", \n                    \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Comunidad de Madrid\", \n                    \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta y Melilla\", \"Total\")\n\n## Tabla que más me gusta \n\ndf4 &lt;- df %&gt;% \n  select(comunidad, periodo, F_PIB_real_2016, f_población) %&gt;%\n  mutate(F_PIB_real_2016 = F_PIB_real_2016 * 1000) %&gt;%\n  mutate(pibpc_real = F_PIB_real_2016 / f_población) %&gt;%\n  select(-c(3, 4)) %&gt;%\n  pivot_wider(names_from = periodo, values_from = pibpc_real) %&gt;% mutate(comunidad = nuevos_nombres)\n\ndf4 &lt;- df4 %&gt;% mutate(across(where(is.numeric), \\(x) round(x, digits = 2)))\n\n\n\n\n\n\nEn esta sección, nos adentraremos en el análisis del desempleo, examinando la evolución de la Tasa de Desempleo y la Tasa de Desempleo Estructural (NAIRU). Posteriormente, de la evolución de la población activa (parados y ocupados). Por último, la evolución de la tasa de desempleo por Comunidades Autónomas.\n\nEl enfoque principal será comprender la dinámica del empleo en España a lo largo del tiempo. Exploraremos la variación en la Tasa de Desempleo, destacando momentos críticos que han impactado el mercado laboral. Además, examinaremos la Tasa de Desempleo Estructural (NAIRU), que representa la tasa de desempleo natural en una economía sin presiones inflacionarias. Este análisis nos permitirá evaluar no solo las fluctuaciones a corto plazo, sino también comprender las condiciones subyacentes del mercado laboral a lo largo de las décadas.\n\n\nGráfico animado\nGráfico sin animar\nCódigo\n\n\n\n\nCódigo#### Desempleo\n\n### Tasa de desempleo vs NAIRU\n\ndfn &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n\n# Gráfico de la evolución del NAIRU y parados\n\npn &lt;- ggplot(dfn, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = nairu, color = \"NAIRU\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = nairu, color = \"NAIRU\"), size = 1) +\n  geom_point(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1) +\n  labs(title = \"Evolución de la Tasa de Desempleo y NAIRU\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\", caption = \"Fuente: AMECO\") +\n  scale_color_manual(values = c(\"NAIRU\" = \"blue\", \"Tasa de Paro\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\n# Crea la animación\np_animated2 &lt;- pn +\n  transition_reveal(periodo) +\n  enter_fade() + \n  exit_fade()\n\n# Visualiza la animación\nanimate(p_animated2, nframes = 200, fps = 20, end_pause = 0)\n\n\n\n\n\n\n\n\n\n\nCódigopn\n\n\n\n\n\n\n\n\n\n\nCódigo#### Desempleo\n\n### Tasa de desempleo vs NAIRU\n\ndfn &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n\n# Gráfico de la evolución del NAIRU y parados\n\npn &lt;- ggplot(dfn, aes(x = periodo, group = 1)) +\n  geom_line(aes(y = nairu, color = \"NAIRU\"), size = 1, linetype = \"solid\") +\n  geom_line(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1, linetype = \"dashed\") +\n  geom_point(aes(y = nairu, color = \"NAIRU\"), size = 1) +\n  geom_point(aes(y = b_tasa_paro, color = \"Tasa de Paro\"), size = 1) +\n  labs(title = \"Evolución de la Tasa de Desempleo y NAIRU\",\n       x = \"Año\",\n       y = \"Valor\",\n       color = \"Categoría\", caption = \"Fuente: AMECO\") +\n  scale_color_manual(values = c(\"NAIRU\" = \"blue\", \"Tasa de Paro\" = \"red\")) +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  guides(color = guide_legend(title = \"Categoría\"))\n\n\n\n\n\n\nEn esta sección, nos enfocaremos en el Diferencial porcentual entre la Tasa de Desempleo y la Tasa de Desempleo Estructural (NAIRU). Este análisis proporcionará una perspectiva detallada sobre las brechas entre la tasa de desempleo actual y la tasa de desempleo considerada natural en condiciones de equilibrio. Podemos destacar:\n\nDurante las décadas de los 80 y 90 en España, se observó que las tasas de desempleo estuvieron consistentemente por encima de la Tasa de Desempleo Estructural (NAIRU). Este fenómeno puede atribuirse a varios factores, entre ellos, la transición económica y la modernización industrial que caracterizaron esos períodos. Las reformas estructurales, aunque necesarias para la adaptación a la economía global, generaron desajustes temporales en el mercado laboral. Los cambios en la estructura productiva y la adopción de nuevas tecnologías llevaron a una destrucción de empleo en ciertos sectores, contribuyendo a tasas de desempleo elevadas.\nTras la crisis financiera de 2008, se evidenció un aumento significativo en la tasa de desempleo por encima de la NAIRU. La recesión económica y la contracción en diversos sectores, particularmente en la construcción, provocaron una rápida pérdida de empleo. La recuperación posterior fue gradual, pero la tasa de desempleo permaneció elevada durante un tiempo, reflejando las secuelas de la crisis.\nEn contraste, durante la crisis del COVID-19, las medidas gubernamentales, especialmente los Expedientes de Regulación Temporal de Empleo (ERTEs), jugaron un papel crucial. Estos programas de apoyo mitigaron la destrucción masiva de empleo al proporcionar un mecanismo de suspensión temporal de los contratos laborales. Esto evitó que la tasa de desempleo se disparara por encima de la NAIRU, ofreciendo estabilidad al mercado laboral y resaltando la eficacia de las políticas de respuesta ante crisis económicas.\n\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\n\ndfd &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo)) %&gt;% \n  mutate(diferencia_desempleo = b_tasa_paro - nairu)\n\npd &lt;- ggplot(dfd, aes(x = periodo, y = diferencia_desempleo, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\",size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_desempleo), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre Tasa de desempleo y NAIRU\",\n       x = \"Año\",\n       y = \"Diferencia entre Tasa de desempleo y NAIRU\", caption = \"Fuente: AMECO\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10))\n\n# Mostrar el gráfico\nprint(pd)\n\n\n\n\n\n\n\n\n\n\nCódigo### Gráfico con la diferencia porcentual entre PIB real y PIB potencial \n\n\ndfd &lt;- df %&gt;% \n  select(comunidad, periodo, nairu, b_tasa_paro) %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  mutate(nairu = round(nairu, 3),\n         b_tasa_paro = round(b_tasa_paro, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo)) %&gt;% \n  mutate(diferencia_desempleo = b_tasa_paro - nairu)\n\npd &lt;- ggplot(dfd, aes(x = periodo, y = diferencia_desempleo, group = 1)) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_line(color = \"blue\",size = 1.5) +\n  geom_ribbon(aes(ymin = -10, ymax = diferencia_desempleo), fill = \"blue\", alpha = 0.1) +\n  labs(title = \"Diferencia entre Tasa de desempleo y NAIRU\",\n       x = \"Año\",\n       y = \"Diferencia entre Tasa de desempleo y NAIRU\", caption = \"Fuente: AMECO\") +\n  theme_stata() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +\n  ylim(c(-10, 10))\n\n\n\n\n\n\nEl análisis de la Población Activa proporcionará una visión completa de la participación laboral, permitiendo entender mejor las tendencias y desafíos en la oferta y la demanda de empleo en distintos períodos económicos.\nLa ecuación de la Población Activa (PA) se desglosa en dos componentes: los Ocupados (O) y los Parados (P). A partir de esta ecuación, se derivan varios indicadores económicos clave:\n\nTasa de Actividad (TA): La Tasa de Actividad mide la proporción de la población en edad de trabajar que está activamente participando en el mercado laboral, ya sea empleada o buscando empleo. Se calcula como (PA / Población en Edad de Trabajar (PET)) * 100.\nTasa de Ocupación (TO): La Tasa de Ocupación indica la proporción de la población en edad de trabajar que está actualmente empleada. Se determina como (O / PET) * 100.\nTasa de Paro (TP): La Tasa de Paro mide el porcentaje de la población activa que está desempleada, es decir, busca empleo pero no lo encuentra. Se expresa como (P / PA) * 100.\n\nEstos indicadores proporcionan una comprensión detallada de la dinámica del mercado laboral. La Tasa de Actividad refleja la participación general en el mercado laboral, la Tasa de Ocupación destaca la proporción de personas empleadas, y la Tasa de Paro señala la prevalencia del desempleo. Estos indicadores son fundamentales para evaluar el rendimiento económico y la salud del mercado laboral en diferentes contextos y períodos.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Como han evolucionado los parados y ocupados a lo largo del tiempo \ndf5 &lt;- df %&gt;% \n  select(comunidad, periodo, f_parados, f_ocupados) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(f_parados = round(f_parados, 3),\n         f_ocupados = round(f_ocupados, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Crear el gráfico con ggplot2\ngg_barras_apiladas &lt;- ggplot(df5, aes(x = periodo, fill = factor(comunidad))) +\n  geom_bar(aes(y = f_ocupados, color = \"Ocupados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  geom_bar(aes(y = f_parados, color = \"Parados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  labs(title = \"Comparación de Ocupados y Parados en España\",\n       x = \"Periodo\",\n       y = \"Número de Personas\",\n       color = \"Categoría\", caption = \"Fuente: FEDEA\") +\n  scale_fill_manual(values = c(\"Ocupados\" = \"blue\", \"Parados\" = \"red\")) +\n  theme_stata()\n\n# Imprimir el gráfico\nprint(gg_barras_apiladas)\n\n\n\n\n\n\n\n\n\n\nCódigo### Como han evolucionado los parados y ocupados a lo largo del tiempo \ndf5 &lt;- df %&gt;% \n  select(comunidad, periodo, f_parados, f_ocupados) %&gt;%\n  filter(comunidad == \"total\", periodo &gt;= 1965) %&gt;%\n  mutate(f_parados = round(f_parados, 3),\n         f_ocupados = round(f_ocupados, 3)) %&gt;% \n  mutate(periodo = as.numeric(periodo))\n\n# Crear el gráfico con ggplot2\ngg_barras_apiladas &lt;- ggplot(df5, aes(x = periodo, fill = factor(comunidad))) +\n  geom_bar(aes(y = f_ocupados, color = \"Ocupados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  geom_bar(aes(y = f_parados, color = \"Parados\"), stat = \"identity\", position = \"stack\", alpha = 0.7) +\n  labs(title = \"Comparación de Ocupados y Parados en España\",\n       x = \"Periodo\",\n       y = \"Número de Personas\",\n       color = \"Categoría\", caption = \"Fuente: FEDEA\") +\n  scale_fill_manual(values = c(\"Ocupados\" = \"blue\", \"Parados\" = \"red\")) +\n  theme_stata()\n\n\n\n\n\n\nEn esta sección, se presentarán cuatro gráficos que ilustran la evolución temporal de la Tasa de Desempleo por Comunidad Autónoma en momentos clave: 1977, 1995, 2007 y 2021. Cada gráfico proporcionará una representación visual de cómo ha variado el desempleo en las diferentes regiones en estos años específicos. Más adelante en la presentación se utilizarán mapas para ofrecer una representación aún más gráfica y detallada de la evolución de la Tasa de Desempleo por Comunidad Autónoma.\n\n\nAño 1977\nAño 1995\nAño 2007\nAño 2021\nCódigo\n\n\n\n\nCódigo### Tasa de desempleo \n\ndf6 &lt;- df %&gt;%\n  select(comunidad, periodo, b_tasa_paro) %&gt;%\n  filter(periodo &gt;= 1977) %&gt;%\n  mutate(b_tasa_paro = round(b_tasa_paro, 2)) %&gt;%\n  mutate(periodo = as.numeric(periodo)) \n\n\n# Filtrar para el año 1977\ndf6_1977 &lt;- df6 %&gt;% filter(periodo == 1977) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_1977 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 1995\ndf6_1995 &lt;- df6 %&gt;% filter(periodo == 1995) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1995 de mayor a menor según la columna b_tasa_paro\ndf6_1995 &lt;- df6_1995 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2007\ndf6_2007 &lt;- df6 %&gt;% filter(periodo == 2007) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_2007 &lt;- df6_2007 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2021\ndf6_2021 &lt;- df6 %&gt;% filter(periodo == 2021) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_2021 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_2021 %&gt;% arrange(desc(b_tasa_paro))\n\n\n\n\n# Función para crear un gráfico de barras para la tasa de paro\ncrear_grafico &lt;- function(data, title) {\n  ggplot(data, aes(x = reorder(comunidad, b_tasa_paro), y = b_tasa_paro, fill = comunidad)) +\n    geom_bar(stat = \"identity\") +\n    labs(title = title, x = \"Comunidad Autónoma\", y = \"Tasa de Paro\") +\n    theme_stata() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))}\n\n# Crear gráficos individuales\ngrafico_1977 &lt;- crear_grafico(df6_1977, \"Tasa de Paro en 1977\")\ngrafico_1995 &lt;- crear_grafico(df6_1995, \"Tasa de Paro en 1995\")\ngrafico_2007 &lt;- crear_grafico(df6_2007, \"Tasa de Paro en 2007\")\ngrafico_2021 &lt;- crear_grafico(df6_2021, \"Tasa de Paro en 2021\")\n\n# Organizar los gráficos en una cuadrícula\ngrafico_combinado &lt;- grafico_1977 + theme(legend.position = \"none\")+ plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma 1977\",\n    caption = \"Fuente: BdeMores\") \n# Mostrar el gráfico combinado\nprint(grafico_combinado)\n\n\n\n\n\n\n\n\n\n\nCódigografico_combinado2 &lt;- grafico_1995 + theme(legend.position = \"none\")+ plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma 1995\",\n    caption = \"Fuente: BdeMores\") \n# Mostrar el gráfico combinado\nprint(grafico_combinado2)\n\n\n\n\n\n\n\n\n\n\nCódigo# Organizar los gráficos en una cuadrícula\ngrafico_combinado3 &lt;- grafico_2007 + theme(legend.position = \"none\")+ plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma 2007\",\n    caption = \"Fuente: BdeMores\") \n# Mostrar el gráfico combinado\nprint(grafico_combinado3)\n\n\n\n\n\n\n\n\n\n\nCódigo# Organizar los gráficos en una cuadrícula\ngrafico_combinado4 &lt;- grafico_2021 + theme(legend.position = \"none\")+ plot_annotation(\n    title = \"Tasa de Paro en España por Comunidad Autónoma 2021\",\n    caption = \"Fuente: BdeMores\") \n# Mostrar el gráfico combinado\nprint(grafico_combinado4)\n\n\n\n\n\n\n\n\n\n\nCódigo### Tasa de desempleo \n\ndf6 &lt;- df %&gt;%\n  select(comunidad, periodo, b_tasa_paro) %&gt;%\n  filter(periodo &gt;= 1977) %&gt;%\n  mutate(b_tasa_paro = round(b_tasa_paro, 2)) %&gt;%\n  mutate(periodo = as.numeric(periodo)) \n\n\n# Filtrar para el año 1977\ndf6_1977 &lt;- df6 %&gt;% filter(periodo == 1977) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_1977 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 1995\ndf6_1995 &lt;- df6 %&gt;% filter(periodo == 1995) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1995 de mayor a menor según la columna b_tasa_paro\ndf6_1995 &lt;- df6_1995 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2007\ndf6_2007 &lt;- df6 %&gt;% filter(periodo == 2007) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_1977 de mayor a menor según la columna b_tasa_paro\ndf6_2007 &lt;- df6_2007 %&gt;% arrange(desc(b_tasa_paro))\n# Filtrar para el año 2021\ndf6_2021 &lt;- df6 %&gt;% filter(periodo == 2021) %&gt;% mutate(comunidad = nuevos_nombres) %&gt;% filter(comunidad != \"Ceuta y Melilla\")\n# Ordenar df6_2021 de mayor a menor según la columna b_tasa_paro\ndf6_1977 &lt;- df6_2021 %&gt;% arrange(desc(b_tasa_paro))\n\n\n\n\n# Función para crear un gráfico de barras para la tasa de paro\ncrear_grafico &lt;- function(data, title) {\n  ggplot(data, aes(x = reorder(comunidad, b_tasa_paro), y = b_tasa_paro, fill = comunidad)) +\n    geom_bar(stat = \"identity\") +\n    labs(title = title, x = \"Comunidad Autónoma\", y = \"Tasa de Paro\") +\n    theme_stata() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))}\n\n# Crear gráficos individuales\ngrafico_1977 &lt;- crear_grafico(df6_1977, \"Tasa de Paro en 1977\")\ngrafico_1995 &lt;- crear_grafico(df6_1995, \"Tasa de Paro en 1995\")\ngrafico_2007 &lt;- crear_grafico(df6_2007, \"Tasa de Paro en 2007\")\ngrafico_2021 &lt;- crear_grafico(df6_2021, \"Tasa de Paro en 2021\")\n\n\n\n\n\n\nEn esta sección, realizaremos una comparación integral entre el Producto Interno Bruto (PIB) y la Tasa de Desempleo por Comunidades Autónomas.\n\nEn esta sección, exploraremos la evolución de la Tasa de Desempleo en España a través de cuatro mapas interactivos que representan los años 1955, 1975, 2000 y 2021 respectivamente. Estos mapas proporcionarán una visión visual de cómo ha variado la tasa de desempleo en cada Comunidad Autónoma a lo largo de décadas clave en la historia económica española.\nAl analizar estos mapas, se observan diferencias notables en las tasas de desempleo entre el sur y el norte de España. Estas disparidades pueden atribuirse a diversas razones, como las disparidades históricas en el desarrollo industrial, la concentración de sectores económicos específicos en ciertas regiones y las variaciones en las inversiones y políticas de desarrollo regional.\nCon el paso del tiempo, esta tendencia ha mostrado un creciente aumento de la disparidad entre el sur y el norte, acentuándose aún más en los años recientes. Factores como la descentralización industrial, las inversiones en infraestructura y la dinámica de la globalización han influido en estas diferencias regionales en las tasas de desempleo. Este análisis visual nos permitirá identificar patrones geográficos y comprender cómo factores económicos y estructurales han impactado la distribución del empleo en España a lo largo del tiempo.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo#### Mapa coroplético desempleo y PIB \n\nnuevos_nombres2 &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Baleares\", \"Canarias\", \n                     \"Cantabria\", \"Castilla y León\", \"Castilla-La Mancha\", \"Cataluña\", \n                     \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Madrid\", \n                     \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta\", \"Melilla\")\ndfc &lt;- df %&gt;%\n  distinct(comunidad) %&gt;%\n  mutate(nuevos_nombres = nuevos_nombres2)\n\ndfc &lt;- left_join(df, dfc, by = \"comunidad\")\n\ndfc &lt;- dfc %&gt;%\n  select(nuevos_nombres, periodo, F_PIB_real_2016, f_parados, f_ocupados, f_población) %&gt;%\n  mutate(tasa_desempleo =  f_parados/(f_parados + f_ocupados)*100) %&gt;%\n  mutate(pibpc= F_PIB_real_2016/f_población) %&gt;%\n  select(nuevos_nombres, periodo, pibpc, tasa_desempleo) %&gt;%\n  rename(comunidad = nuevos_nombres)\n\n\n#Obtenemos el mapa de España por CCAA\ndf_ccaa &lt;- esp_get_ccaa()%&gt;%\n  select(ccaa.shortname.es, geometry) %&gt;%\n  rename(\"comunidad\" = ccaa.shortname.es)\n\ndf_datos_mapa &lt;- dfc %&gt;% filter(periodo %in% c(1955, 1975, 2000, 2021)) %&gt;%\n  filter(`comunidad`!= \"total\")\n\n\ndf_mapa &lt;- left_join(df_ccaa, df_datos_mapa, by = c(\"comunidad\" = \"comunidad\"))\n\n### Mapa para el paro \n\ndf_mapa_ccaa1 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(paro_ccaa_4 = ntile(tasa_desempleo, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(paro_ccaa_4 = forcats::as_factor(paro_ccaa_4))\n\npc &lt;- ggplot(df_mapa_ccaa1) +\n  geom_sf(aes(geometry = geometry, fill = paro_ccaa_4)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"Tasa de desempleo por cuartiles\" , caption = \"Fuente: FEDEA\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\npc\n\n\n\n\n\n\n\n\n\n\nCódigo#### Mapa coroplético desempleo y PIB \n\nnuevos_nombres2 &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Baleares\", \"Canarias\", \n                     \"Cantabria\", \"Castilla y León\", \"Castilla-La Mancha\", \"Cataluña\", \n                     \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Madrid\", \n                     \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta\", \"Melilla\")\ndfc &lt;- df %&gt;%\n  distinct(comunidad) %&gt;%\n  mutate(nuevos_nombres = nuevos_nombres2)\n\ndfc &lt;- left_join(df, dfc, by = \"comunidad\")\n\ndfc &lt;- dfc %&gt;%\n  select(nuevos_nombres, periodo, F_PIB_real_2016, f_parados, f_ocupados, f_población) %&gt;%\n  mutate(tasa_desempleo =  f_parados/(f_parados + f_ocupados)*100) %&gt;%\n  mutate(pibpc= F_PIB_real_2016/f_población) %&gt;%\n  select(nuevos_nombres, periodo, pibpc, tasa_desempleo) %&gt;%\n  rename(comunidad = nuevos_nombres)\n\n\n#Obtenemos el mapa de España por CCAA\ndf_ccaa &lt;- esp_get_ccaa()%&gt;%\n  select(ccaa.shortname.es, geometry) %&gt;%\n  rename(\"comunidad\" = ccaa.shortname.es)\n\ndf_datos_mapa &lt;- dfc %&gt;% filter(periodo %in% c(1955, 1975, 2000, 2021)) %&gt;%\n  filter(`comunidad`!= \"total\")\n\n\ndf_mapa &lt;- left_join(df_ccaa, df_datos_mapa, by = c(\"comunidad\" = \"comunidad\"))\n\n### Mapa para el paro \n\ndf_mapa_ccaa1 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(paro_ccaa_4 = ntile(tasa_desempleo, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(paro_ccaa_4 = forcats::as_factor(paro_ccaa_4))\n\npc &lt;- ggplot(df_mapa_ccaa1) +\n  geom_sf(aes(geometry = geometry, fill = paro_ccaa_4)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"Tasa de desempleo por cuartiles\" , caption = \"Fuente: FEDEA\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\n\n\n\n\n\nEn este análisis, exploraremos la evolución de la renta per cápita en España mediante cuatro mapas interactivos correspondientes a los años 1955, 1975, 2000 y 2021. Estos mapas nos brindarán una representación visual dinámica de cómo ha variado el Producto Interno Bruto (PIB) per cápita en cada Comunidad Autónoma a lo largo de décadas clave.\nContrastando con el análisis de la Tasa de Desempleo, se observa una tendencia consistente a lo largo del tiempo: las Comunidades Autónomas del norte de España, con tasas de desempleo históricamente más bajas, exhiben mayores niveles de PIB per cápita. Por otro lado, las Comunidades Autónomas del sur, con tasas de desempleo históricamente más altas, presentan niveles más bajos de PIB per cápita.\nEstas correlaciones reflejan la interconexión entre el empleo y la producción económica a nivel regional. Factores históricos, inversiones en infraestructura, desarrollo industrial y políticas económicas pueden explicar estas disparidades. Al analizar conjuntamente los mapas de desempleo y PIB per cápita, se obtiene una comprensión más completa de cómo los aspectos económicos y laborales han influido en el desarrollo regional de España a lo largo de los años.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Mapa para el PIB\n\ndf_mapa_ccaa2 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(pibpc = ntile(pibpc, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(pibpc = forcats::as_factor(pibpc))\n\npc2 &lt;- ggplot(df_mapa_ccaa2) +\n  geom_sf(aes(geometry = geometry, fill = pibpc)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"PIBpc real por cuartiles\" , caption = \"Fuente: FEDEA\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\npc2\n\n\n\n\n\n\n\n\n\n\nCódigo### Mapa para el PIB\n\ndf_mapa_ccaa2 &lt;- df_mapa %&gt;%\n  group_by(periodo) %&gt;%\n  mutate(pibpc = ntile(pibpc, 4)) %&gt;% \n  ungroup() %&gt;% \n  mutate(pibpc = forcats::as_factor(pibpc))\n\npc2 &lt;- ggplot(df_mapa_ccaa2) +\n  geom_sf(aes(geometry = geometry, fill = pibpc)) + \n  scale_fill_brewer(palette = \"Blues\", name = NULL,\n                    labels = c(\"1er cuartil\", \"2do cuartil\", \"3er cuartil\", \"4to cuartil\"))+\n  facet_wrap(vars(periodo)) +\n  theme(axis.text.x = element_blank(),\n        axis.text.y = element_blank(), plot.caption = element_text(hjust = 0.5)) +\n  labs(title = \"PIBpc real por cuartiles\" , caption = \"Fuente: FEDEA\") + theme_stata() + scale_y_continuous(breaks = NULL) + scale_x_continuous(breaks = NULL)\n\n\n\n\n\n\n\nEn esta sección, presentaremos una tabla detallada que muestra la Inflación Interanual por Comunidades Autónomas desde el año 1956. La medida de inflación utilizada es el Deflactor del PIB, calculado a través de la tasa de crecimiento del deflactor. Esta herramienta nos permite evaluar cómo los precios han variado en cada región a lo largo del tiempo, proporcionando una visión integral de la dinámica inflacionaria a nivel autonómico.\nEl Deflactor del PIB es una métrica relevante que ajusta el PIB nominal al valor real, teniendo en cuenta las variaciones en los precios. Al calcular la tasa de inflación interanual, se capturan los cambios porcentuales en el nivel general de precios en cada Comunidad Autónoma. Este análisis permitirá identificar patrones inflacionarios, evaluar la estabilidad económica y entender las variaciones regionales en los costos de bienes y servicios a lo largo del tiempo.\n\n\nTabla\nCódigo\n\n\n\n\nCódigonuevos_nombres &lt;- c(\"Andalucía\", \"Aragón\", \"Asturias\", \"Islas Baleares\", \"Islas Canarias\", \n                    \"Cantabria\", \"Castilla y León\", \"Castilla - La Mancha\", \"Cataluña\", \n                    \"Comunidad Valenciana\", \"Extremadura\", \"Galicia\", \"Comunidad de Madrid\", \n                    \"Murcia\", \"Navarra\", \"País Vasco\", \"La Rioja\", \"Ceuta y Melilla\", \"Total\")\n\n\ndf20 &lt;- df %&gt;% \n  select(comunidad, periodo, f_deflactor_pib) %&gt;%\n  group_by(comunidad) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100) %&gt;%\n  ungroup() %&gt;%\n  pivot_wider(names_from = periodo, values_from = f_deflactor_pib) %&gt;%\n  mutate(comunidad = nuevos_nombres) %&gt;%\n  mutate(across(where(is.numeric), ~round(., digits = 2))) \n\ndf20 &lt;- df20[, -2]\n\n\ndf20%&gt;%  \n  gt(rowname_col = \"comunidad\") %&gt;% \n  tab_header(title = \"Inflación interanual con el Deflactor del PIB por CCAA\", \n             subtitle = \"Valores expresados en porcentaje (%)\")  %&gt;% \n  tab_source_note(md(\"Fuente: [Fedea](https://fedea.net/angel-de-la-fuente/)\")) %&gt;%\n  gtExtras::gt_theme_pff() \n\n\n\n\n\n\n\nInflación interanual con el Deflactor del PIB por CCAA\n    \n\nValores expresados en porcentaje (%)\n    \n\n\n      1956\n      1957\n      1958\n      1959\n      1960\n      1961\n      1962\n      1963\n      1964\n      1965\n      1966\n      1967\n      1968\n      1969\n      1970\n      1971\n      1972\n      1973\n      1974\n      1975\n      1976\n      1977\n      1978\n      1979\n      1980\n      1981\n      1982\n      1983\n      1984\n      1985\n      1986\n      1987\n      1988\n      1989\n      1990\n      1991\n      1992\n      1993\n      1994\n      1995\n      1996\n      1997\n      1998\n      1999\n      2000\n      2001\n      2002\n      2003\n      2004\n      2005\n      2006\n      2007\n      2008\n      2009\n      2010\n      2011\n      2012\n      2013\n      2014\n      2015\n      2016\n      2017\n      2018\n      2019\n      2020\n      2021\n    \n\n\n\nAndalucía\n7.15\n12.54\n11.20\n5.68\n2.55\n0.86\n5.57\n8.07\n7.69\n9.45\n8.55\n8.91\n6.00\n5.22\n6.39\n8.30\n8.49\n11.81\n16.45\n17.29\n16.40\n23.28\n21.12\n17.40\n13.34\n12.50\n13.75\n11.60\n11.48\n7.55\n10.93\n5.72\n5.80\n7.24\n7.99\n7.02\n5.78\n4.09\n4.28\n3.69\n3.38\n1.35\n1.90\n2.68\n2.96\n4.35\n4.31\n4.66\n4.65\n4.99\n3.85\n2.99\n2.11\n-0.51\n0.13\n-0.38\n-0.01\n0.57\n-0.36\n1.32\n-0.18\n2.03\n0.76\n0.92\n1.19\n2.42\n\n\nAragón\n7.21\n12.61\n11.08\n5.57\n2.94\n1.25\n5.22\n7.72\n7.42\n9.17\n7.05\n7.40\n6.39\n5.61\n5.75\n7.64\n8.77\n12.10\n16.13\n16.97\n16.28\n23.16\n19.82\n16.13\n13.83\n12.98\n13.86\n11.70\n11.43\n7.51\n11.11\n5.89\n5.49\n6.92\n5.98\n8.01\n5.61\n4.32\n4.50\n3.31\n3.14\n2.46\n2.36\n2.45\n2.72\n4.15\n4.39\n3.74\n3.84\n4.12\n4.10\n3.93\n2.74\n-0.73\n-1.20\n0.39\n0.34\n-0.08\n-0.39\n0.07\n0.88\n1.73\n0.78\n2.26\n2.03\n2.53\n\n\nAsturias\n7.95\n13.38\n10.04\n4.58\n2.14\n0.47\n4.20\n6.68\n7.45\n9.21\n7.69\n8.04\n6.10\n5.32\n6.48\n8.38\n7.40\n10.69\n16.11\n16.95\n16.50\n23.39\n17.76\n14.13\n13.04\n12.20\n16.09\n13.89\n11.58\n7.66\n12.47\n7.18\n5.41\n6.84\n8.28\n5.94\n5.21\n4.87\n4.21\n6.04\n3.08\n0.96\n3.90\n2.12\n4.07\n3.97\n4.00\n3.53\n4.52\n5.37\n4.69\n3.78\n2.41\n1.07\n1.10\n-0.42\n-0.45\n-0.05\n-0.12\n0.76\n0.06\n2.00\n1.30\n0.78\n0.77\n4.43\n\n\nIslas Baleares\n5.59\n10.90\n11.84\n6.28\n2.00\n0.33\n5.80\n8.32\n8.03\n9.80\n7.94\n8.30\n5.79\n5.01\n6.51\n8.41\n8.28\n11.59\n16.59\n17.43\n16.80\n23.71\n22.09\n18.34\n11.94\n11.11\n15.62\n13.43\n12.56\n8.59\n12.18\n6.91\n6.58\n8.03\n5.01\n7.93\n6.80\n3.94\n5.04\n3.60\n3.60\n3.79\n4.77\n4.75\n6.25\n5.70\n5.34\n3.99\n4.57\n4.19\n4.71\n3.31\n2.74\n-0.06\n-3.30\n-0.37\n0.12\n1.35\n0.14\n1.42\n1.06\n2.01\n1.53\n1.60\n0.46\n4.64\n\n\nIslas Canarias\n9.19\n14.69\n11.41\n5.88\n2.46\n0.78\n4.97\n7.46\n7.17\n8.92\n8.46\n8.82\n5.93\n5.15\n6.39\n8.30\n7.51\n10.79\n17.02\n17.86\n17.38\n24.32\n22.84\n19.06\n12.52\n11.68\n14.39\n12.22\n12.09\n8.15\n12.33\n7.06\n6.03\n7.47\n9.32\n7.99\n6.48\n6.34\n3.32\n4.24\n3.65\n3.26\n3.17\n4.09\n4.16\n4.19\n4.69\n3.82\n3.90\n3.99\n4.01\n2.89\n2.57\n-0.30\n-0.76\n0.49\n-0.54\n0.74\n-0.10\n0.27\n0.26\n1.33\n1.50\n1.18\n1.13\n3.23\n\n\nCantabria\n7.49\n12.90\n11.06\n5.55\n2.79\n1.10\n4.93\n7.42\n7.44\n9.20\n7.89\n8.25\n5.42\n4.65\n5.41\n7.29\n8.15\n11.46\n14.58\n15.40\n15.88\n22.73\n20.13\n16.43\n14.38\n13.53\n13.49\n11.34\n11.18\n7.27\n11.14\n5.92\n5.58\n7.01\n7.79\n8.04\n7.31\n3.38\n3.96\n5.49\n3.58\n2.31\n2.65\n3.20\n3.82\n4.01\n4.30\n4.24\n4.69\n4.94\n4.13\n4.26\n2.92\n-0.17\n0.26\n0.73\n-0.98\n0.38\n0.24\n-0.34\n0.58\n0.79\n1.79\n1.82\n1.12\n2.10\n\n\nCastilla y León\n6.21\n11.55\n9.54\n4.10\n2.01\n0.34\n5.24\n7.73\n6.57\n8.31\n7.43\n7.79\n5.68\n4.91\n5.58\n7.47\n7.85\n11.15\n16.56\n17.40\n15.90\n22.75\n20.16\n16.46\n13.33\n12.48\n14.68\n12.50\n10.81\n6.91\n10.25\n5.07\n5.52\n6.96\n5.97\n9.47\n6.23\n4.03\n1.99\n7.84\n2.91\n2.27\n2.50\n2.54\n2.79\n4.07\n3.46\n3.82\n3.94\n3.98\n3.47\n3.51\n1.77\n-0.34\n-0.46\n-0.21\n0.75\n-0.48\n-0.13\n0.64\n0.05\n1.11\n1.51\n1.57\n0.48\n1.66\n\n\nCastilla - La Mancha\n8.03\n13.47\n9.43\n4.00\n2.11\n0.44\n4.88\n7.37\n5.01\n6.72\n7.39\n7.74\n5.25\n4.47\n4.99\n6.87\n9.08\n12.42\n16.88\n17.72\n15.30\n22.12\n20.00\n16.31\n13.36\n12.51\n13.24\n11.09\n10.69\n6.79\n10.33\n5.15\n5.76\n7.20\n7.68\n7.16\n6.52\n6.38\n3.23\n4.95\n2.61\n2.03\n2.77\n2.86\n2.83\n4.37\n3.27\n4.52\n3.28\n4.74\n3.48\n3.12\n1.58\n-0.25\n-0.05\n0.76\n1.80\n-1.80\n-0.83\n0.86\n-0.69\n2.21\n0.82\n1.55\n0.56\n2.58\n\n\nCataluña\n6.03\n11.37\n10.43\n4.95\n2.75\n1.06\n4.90\n7.39\n7.44\n9.20\n7.77\n8.13\n5.83\n5.05\n5.93\n7.82\n8.36\n11.67\n15.59\n16.43\n16.36\n23.24\n20.14\n16.45\n13.52\n12.67\n13.81\n11.65\n11.89\n7.95\n10.78\n5.58\n5.40\n6.83\n5.06\n6.53\n6.72\n3.75\n4.20\n5.39\n4.14\n2.78\n2.18\n2.77\n3.51\n4.12\n4.25\n4.19\n3.99\n4.06\n4.40\n3.54\n2.64\n0.07\n-2.05\n0.44\n0.50\n0.41\n0.05\n0.19\n0.67\n1.29\n1.36\n1.75\n1.71\n2.09\n\n\nComunidad Valenciana\n6.51\n11.87\n10.97\n5.46\n2.70\n1.02\n4.78\n7.26\n7.27\n9.02\n7.87\n8.23\n5.86\n5.08\n6.02\n7.91\n8.36\n11.67\n15.94\n16.78\n16.32\n23.20\n20.73\n17.01\n13.87\n13.02\n13.45\n11.30\n11.47\n7.55\n11.42\n6.18\n5.69\n7.13\n7.33\n6.24\n7.60\n5.13\n3.45\n2.91\n3.95\n2.15\n2.05\n2.64\n3.12\n4.19\n4.36\n4.31\n4.09\n4.37\n4.41\n3.41\n2.47\n0.09\n-0.80\n0.30\n-0.37\n0.23\n0.04\n0.16\n0.50\n0.90\n1.56\n1.45\n1.66\n1.89\n\n\nExtremadura\n8.54\n14.00\n10.70\n5.21\n2.19\n0.51\n4.11\n6.59\n6.50\n8.24\n7.58\n7.94\n5.81\n5.04\n5.65\n7.54\n9.56\n12.91\n16.10\n16.94\n16.08\n22.94\n19.41\n15.74\n12.94\n12.09\n14.23\n12.07\n11.23\n7.31\n11.47\n6.23\n5.96\n7.40\n8.68\n6.21\n7.40\n4.21\n5.41\n2.07\n3.06\n1.09\n2.60\n2.70\n2.73\n3.99\n3.19\n3.72\n3.80\n5.09\n2.51\n3.16\n2.04\n0.46\n-1.94\n-0.97\n-0.53\n0.46\n-0.32\n1.82\n1.74\n1.94\n1.00\n0.27\n1.69\n1.83\n\n\nGalicia\n7.51\n12.92\n11.01\n5.50\n3.17\n1.48\n5.02\n7.52\n6.81\n8.56\n8.38\n8.74\n5.34\n4.57\n6.01\n7.91\n8.39\n11.70\n16.45\n17.29\n16.34\n23.22\n20.60\n16.89\n13.18\n12.33\n13.54\n11.39\n11.36\n7.45\n11.50\n6.26\n5.77\n7.21\n9.05\n6.01\n6.73\n4.00\n2.87\n6.82\n3.03\n2.41\n2.78\n2.24\n3.36\n3.90\n4.22\n4.25\n3.99\n4.72\n3.98\n3.36\n2.19\n0.09\n-0.02\n0.03\n-0.47\n1.05\n-0.12\n0.03\n-0.12\n1.07\n1.28\n1.47\n0.43\n2.62\n\n\nComunidad de Madrid\n7.12\n12.51\n12.14\n6.58\n3.52\n1.82\n6.65\n9.18\n9.54\n11.33\n10.22\n10.59\n6.49\n5.71\n6.44\n8.35\n9.28\n12.62\n16.41\n17.25\n17.41\n24.35\n21.87\n18.12\n13.40\n12.55\n13.99\n11.82\n12.21\n8.26\n10.82\n5.61\n5.69\n7.12\n9.71\n6.62\n8.21\n4.65\n4.47\n5.42\n3.44\n2.59\n2.39\n2.65\n3.69\n4.32\n4.72\n3.92\n3.65\n3.51\n4.24\n3.26\n2.47\n0.90\n-2.18\n-0.13\n-0.04\n0.35\n-0.31\n0.73\n0.43\n0.79\n1.20\n1.47\n1.37\n1.95\n\n\nMurcia\n7.63\n13.04\n11.00\n5.49\n3.12\n1.43\n4.74\n7.22\n6.59\n8.33\n8.50\n8.86\n5.94\n5.16\n6.17\n8.07\n8.05\n11.35\n17.38\n18.23\n16.74\n23.65\n20.90\n17.18\n13.33\n12.49\n13.48\n11.33\n11.56\n7.63\n11.55\n6.30\n5.46\n6.89\n7.31\n11.42\n5.95\n2.73\n4.14\n3.99\n2.95\n2.34\n1.87\n2.54\n4.38\n4.43\n4.92\n4.85\n4.39\n5.19\n3.99\n3.18\n2.37\n-0.37\n3.85\n-1.22\n0.41\n1.22\n-1.65\n-0.49\n-1.12\n0.80\n1.86\n1.62\n1.15\n3.22\n\n\nNavarra\n6.46\n11.82\n11.54\n6.00\n2.73\n1.05\n6.28\n8.81\n6.41\n8.15\n8.30\n8.66\n5.52\n4.75\n5.59\n7.48\n9.56\n12.91\n13.86\n14.68\n16.19\n23.06\n20.25\n16.55\n13.50\n12.65\n13.31\n11.17\n11.23\n7.32\n11.04\n5.82\n5.65\n7.09\n4.29\n10.26\n8.83\n2.95\n3.49\n5.81\n3.65\n2.63\n1.45\n2.24\n2.67\n3.78\n3.99\n3.64\n3.51\n4.55\n3.43\n3.14\n2.35\n0.50\n-0.75\n-0.20\n-0.25\n0.54\n-0.25\n0.33\n0.50\n0.62\n0.91\n1.75\n1.22\n1.62\n\n\nPaís Vasco\n7.33\n12.73\n10.39\n4.91\n2.43\n0.75\n5.07\n7.56\n7.24\n8.99\n7.06\n7.41\n6.25\n5.47\n5.34\n7.22\n9.25\n12.59\n13.56\n14.38\n16.21\n23.09\n19.75\n16.07\n14.26\n13.41\n13.61\n11.46\n11.48\n7.56\n11.03\n5.82\n5.43\n6.86\n7.96\n6.97\n7.55\n4.41\n4.87\n3.88\n3.80\n2.25\n2.34\n2.71\n3.41\n3.71\n4.21\n3.81\n4.09\n4.37\n4.45\n3.51\n2.88\n-0.25\n-0.25\n0.01\n-0.43\n0.46\n0.03\n-0.04\n0.39\n1.33\n1.27\n1.44\n0.40\n2.33\n\n\nLa Rioja\n7.59\n13.00\n10.94\n5.44\n3.28\n1.59\n5.27\n7.77\n6.49\n8.22\n7.54\n7.89\n5.32\n4.55\n5.26\n7.14\n8.79\n12.11\n15.40\n16.23\n16.10\n22.97\n20.77\n17.06\n13.19\n12.35\n13.38\n11.23\n10.70\n6.81\n10.67\n5.47\n5.72\n7.16\n-4.93\n7.12\n5.60\n3.16\n5.28\n3.84\n2.46\n3.06\n2.84\n3.57\n2.99\n4.36\n3.67\n4.39\n2.67\n3.94\n3.93\n3.02\n2.07\n0.03\n-1.23\n0.78\n0.45\n1.37\n1.04\n-0.08\n-1.77\n2.70\n1.67\n1.36\n0.92\n1.59\n\n\nCeuta y Melilla\n7.97\n13.41\n12.47\n6.89\n2.91\n1.22\n7.90\n10.46\n10.05\n11.84\n13.30\n13.67\n7.49\n6.71\n7.79\n9.72\n7.98\n11.28\n17.80\n18.65\n18.27\n25.27\n22.66\n18.88\n14.15\n13.30\n14.63\n12.46\n11.81\n7.88\n11.56\n6.32\n5.55\n6.98\n4.03\n14.64\n5.60\n1.67\n4.19\n12.23\n3.29\n3.16\n4.68\n3.16\n2.75\n3.16\n4.49\n3.85\n4.40\n3.85\n4.92\n3.20\n2.15\n1.25\n-0.32\n-0.45\n-1.43\n1.23\n-0.40\n0.87\n0.56\n-1.10\n1.56\n1.73\n2.53\n1.72\n\n\nTotal\n6.92\n12.31\n10.83\n5.33\n2.63\n0.96\n5.28\n7.78\n7.40\n9.17\n8.17\n8.53\n5.91\n5.14\n5.95\n7.84\n8.52\n11.84\n15.95\n16.78\n16.49\n23.38\n20.63\n16.93\n13.42\n12.57\n13.93\n11.76\n11.62\n7.69\n11.07\n5.85\n5.65\n7.09\n7.31\n7.11\n6.87\n4.34\n3.99\n4.82\n3.52\n2.32\n2.40\n2.75\n3.43\n4.20\n4.31\n4.14\n4.02\n4.29\n4.12\n3.34\n2.40\n0.08\n-0.98\n0.03\n0.07\n0.36\n-0.19\n0.51\n0.29\n1.30\n1.25\n1.45\n1.23\n2.30\n\n\n\nFuente: Fedea\n\n    \n\n\n\n\n\n\n\nCódigodf20 &lt;- df %&gt;% \n  select(comunidad, periodo, f_deflactor_pib) %&gt;%\n  group_by(comunidad) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100) %&gt;%\n  ungroup() %&gt;%\n  pivot_wider(names_from = periodo, values_from = f_deflactor_pib) %&gt;%\n  mutate(comunidad = nuevos_nombres) %&gt;%\n  mutate(across(where(is.numeric), ~round(., digits = 2))) \n\ndf20 &lt;- df20[, -2]\n\n\n\n\n\n\nLas Curvas de Phillips son representaciones gráficas que exploran la relación inversa entre la tasa de inflación y la tasa de desempleo en una economía. Esta relación es fundamental en la teoría macroeconómica y proporciona insights valiosos sobre las dinámicas del mercado laboral y los efectos de las políticas económicas.\nEn términos generales, la Curva de Phillips sugiere que existe una relación de trade-off entre inflación y desempleo en el corto plazo. Esto significa que cuando la tasa de desempleo es baja, la inflación tiende a ser alta, y viceversa. Esta relación implica que las autoridades económicas pueden elegir entre tener una tasa de desempleo más baja a expensas de una inflación más alta, o viceversa.\nSin embargo, es importante destacar que esta relación puede ser afectada por diversos factores a largo plazo, como las expectativas inflacionarias y las condiciones estructurales del mercado laboral. A lo largo del tiempo, las Curvas de Phillips pueden cambiar de forma debido a cambios en la estructura económica, las políticas gubernamentales y las expectativas de los agentes económicos.\nA continuación, exploraremos Curvas de Phillips específicas para la economía española y un par de sus provincias en diferentes momentos del tiempo. Analizar estas curvas nos permitirá comprender cómo ha evolucionado la relación entre inflación y desempleo, proporcionando información valiosa sobre la dinámica económica a lo largo de los años.\n\nEn el análisis de las Curvas de Phillips para la economía española en distintos periodos, se observan tendencias y cambios significativos en la relación entre la tasa de inflación y la tasa de desempleo.\nCurva de Phillips 1978-2000: Durante este periodo, la curva exhibe una pendiente más pronunciada, indicando que pequeñas variaciones en la tasa de desempleo estaban asociadas con cambios más notables en la tasa de inflación. Este fenómeno podría atribuirse a la introducción de políticas económicas y monetarias, así como a factores como las expectativas inflacionarias más sensibles a las fluctuaciones en el mercado laboral.\nCurva de Phillips 2000-2021: En contraste, la curva correspondiente a este periodo presenta una pendiente menos pronunciada, sugiriendo que variaciones en la tasa de desempleo generaban cambios más moderados en la tasa de inflación. Factores como la estabilidad financiera, la globalización y cambios en la estructura del mercado laboral podrían haber contribuido a esta menor sensibilidad entre inflación y desempleo.\nCurva de Phillips 1978-2021: Esta curva, abarcando el periodo completo, muestra una pendiente intermedia entre las dos anteriores. Indica una tendencia general a lo largo de estas décadas, sugiriendo que la relación entre inflación y desempleo ha experimentado cambios. Factores estructurales a largo plazo, como la evolución de las políticas económicas y las expectativas del mercado, han influido en esta dinámica más moderada.\nLa tendencia a que la Curva de Phillips se haya aplanado en la economía española puede explicarse por diversos factores económicos y estructurales a lo largo del tiempo. En primer lugar, la evolución de las expectativas inflacionarias ha influido en la respuesta de los agentes económicos a cambios en la tasa de desempleo. Asimismo, la implementación de políticas económicas más efectivas y la estabilidad financiera pueden haber mitigado la sensibilidad de la inflación ante variaciones en el empleo. Además, la integración económica y la globalización han introducido nuevas dinámicas que pueden haber alterado la relación tradicional entre inflación y desempleo. Estos elementos, combinados con cambios en la estructura del mercado laboral y la madurez de la economía española, contribuyen a la percepción de que la Curva de Phillips ha experimentado un aplanamiento, reflejando una mayor complejidad y moderación en la relación entre estos dos indicadores clave.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Curvas de Phillips \n\n\n# Crear columnas para los grupos de periodos\ndf10 &lt;- df %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100)\n  \n  \n  df10 &lt;- df10 %&gt;%\n  mutate(periodo_grupo = case_when(\n    periodo &gt;= 1977 & periodo &lt;= 2000 ~ \"1977-2000\",\n    periodo &gt; 2000 & periodo &lt;= 2021 ~ \"2000-2021\",\n    periodo &gt;= 1977 & periodo &lt;= 2021 ~ \"1977-2021\",\n    TRUE ~ \"Otro\"\n  ))\n\n# Gráfico de la Curva de Phillips con líneas para diferentes periodos\np_phillips &lt;- ggplot(df10, aes(x = b_tasa_paro, y = f_deflactor_pib, color = periodo_grupo)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  annotate('text', x = 7, y = 17, label = '1978-2000', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 9, y = 6, label = '2000-2021', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 7.5, y = 11, label = '1978-2021', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  labs(title = \"Curva de Phillips\",\n       subtitle = \"La Curva de Phillips representa la relación entre la tasa de desempleo y la inflación.\\n¿Cómo ha evolucionado en España?\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: FEDEA',\n       color = 'Periodo') +\n  scale_color_manual(values = c('#d1495b', '#00798c', '#fd5532')) +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\n# Añadir una capa de regresión para todo el conjunto de datos (discontinua)\np_phillips &lt;- p_phillips +\n  geom_smooth(aes(group = 1), method = 'lm', se = FALSE, linetype = 2, color = 'black')\n\nprint(p_phillips)\n\n\n\n\n\n\n\n\n\n\nCódigo### Curvas de Phillips \n\n\n# Crear columnas para los grupos de periodos\ndf10 &lt;- df %&gt;% \n  filter(comunidad == \"total\", periodo &gt;= 1977) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100)\n  \n  \n  df10 &lt;- df10 %&gt;%\n  mutate(periodo_grupo = case_when(\n    periodo &gt;= 1977 & periodo &lt;= 2000 ~ \"1977-2000\",\n    periodo &gt; 2000 & periodo &lt;= 2021 ~ \"2000-2021\",\n    periodo &gt;= 1977 & periodo &lt;= 2021 ~ \"1977-2021\",\n    TRUE ~ \"Otro\"\n  ))\n\n# Gráfico de la Curva de Phillips con líneas para diferentes periodos\np_phillips &lt;- ggplot(df10, aes(x = b_tasa_paro, y = f_deflactor_pib, color = periodo_grupo)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  annotate('text', x = 7, y = 17, label = '1978-2000', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 9, y = 6, label = '2000-2021', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 7.5, y = 11, label = '1978-2021', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  labs(title = \"Curva de Phillips\",\n       subtitle = \"La Curva de Phillips representa la relación entre la tasa de desempleo y la inflación.\\n¿Cómo ha evolucionado en España?\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: FEDEA',\n       color = 'Periodo') +\n  scale_color_manual(values = c('#d1495b', '#00798c', '#fd5532')) +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\n# Añadir una capa de regresión para todo el conjunto de datos (discontinua)\np_phillips &lt;- p_phillips +\n  geom_smooth(aes(group = 1), method = 'lm', se = FALSE, linetype = 2, color = 'black')\n\n\n\n\n\n\nEn este análisis, realizamos una comparación entre las Curvas de Phillips para España, Madrid y Andalucía. Estas representaciones gráficas exploran la relación entre la tasa de inflación y la tasa de desempleo en tres contextos diferentes: a nivel nacional, en la comunidad autónoma más rica (Madrid) y en una de las comunidades con mayores desafíos económicos (Andalucía).\nCurva de Phillips para España: La Curva de Phillips a nivel nacional refleja la relación histórica entre inflación y desempleo en el conjunto de la economía española.\nCurva de Phillips para Madrid: En el caso de Madrid, una de las comunidades más prósperas, la curva exhibe una pendiente más plana en comparación con la curva nacional. Esto sugiere que las variaciones en la tasa de desempleo en Madrid están asociadas con cambios menos pronunciados en la tasa de inflación.\nCurva de Phillips para Andalucía: Contrastando con Madrid, la Curva de Phillips para Andalucía muestra una pendiente similar a la curva nacional, pero con niveles de desempleo más elevados. Esto indica que, aunque la sensibilidad entre inflación y desempleo es parecida a nivel nacional, Andalucía enfrenta mayores desafíos en términos de empleo.\n\n\nGráfico\nCódigo\n\n\n\n\nCódigo### Comunidades CP\n\n# Filtrar datos por comunidades específicas y periodo\ndf_comunidades &lt;- df %&gt;% \n  filter(comunidad %in% c(\"mad\", \"and\", \"total\"), periodo &gt;= 1977 & periodo &lt;= 2021) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  group_by(comunidad) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100) %&gt;%\n  ungroup()\n\n# Gráfico de la Curva de Phillips con una regresión para cada comunidad\np_phillips_comunidades &lt;- ggplot(df_comunidades, aes(x = b_tasa_paro, y = f_deflactor_pib, color = comunidad)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  annotate('text', x = 33, y = 5, label = 'Andalucía', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 8, y = 11, label = 'España', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 6, y = 5, label = 'Madrid', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  labs(title = \"Curva de Phillips por Comunidad Autónoma\",\n       subtitle = \"Relación entre la tasa de desempleo y la inflación (1977-2021)\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: FEDEA',\n       color = 'Comunidad Autónoma') +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\nprint(p_phillips_comunidades)\n\n\n\n\n\n\n\n\n\n\nCódigo### Comunidades CP\n\n# Filtrar datos por comunidades específicas y periodo\ndf_comunidades &lt;- df %&gt;% \n  filter(comunidad %in% c(\"mad\", \"and\", \"total\"), periodo &gt;= 1977 & periodo &lt;= 2021) %&gt;%\n  select(comunidad, periodo, f_deflactor_pib, b_tasa_paro) %&gt;%\n  group_by(comunidad) %&gt;%\n  mutate(f_deflactor_pib = ((f_deflactor_pib - lag(f_deflactor_pib)) / lag(f_deflactor_pib)) * 100) %&gt;%\n  ungroup()\n\n# Gráfico de la Curva de Phillips con una regresión para cada comunidad\np_phillips_comunidades &lt;- ggplot(df_comunidades, aes(x = b_tasa_paro, y = f_deflactor_pib, color = comunidad)) +\n  geom_point(alpha = 0.7, size = 2.25) +\n  annotate('text', x = 33, y = 5, label = 'Andalucía', color = '#d1495b',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 8, y = 11, label = 'España', color = '#00798c',\n           family = 'American Typewriter', fontface = 'bold') +\n  annotate('text', x = 6, y = 5, label = 'Madrid', color = 'black',\n           family = 'American Typewriter', fontface = 'bold') + \n  geom_smooth(method = 'lm', se = FALSE, linetype = 2) +\n  labs(title = \"Curva de Phillips por Comunidad Autónoma\",\n       subtitle = \"Relación entre la tasa de desempleo y la inflación (1977-2021)\",\n       x = 'Tasa de desempleo',\n       y = 'Índice de precios (Deflactor PIB)',\n       caption = 'Fuente: FEDEA',\n       color = 'Comunidad Autónoma') +\n  theme_void() +\n  theme(text = element_text('American Typewriter', color = 'grey30'),\n        legend.position = 'none',\n        plot.title = element_textbox_simple(size = 12, margin = margin(b = 0.15, unit = 'cm')),\n        plot.subtitle = element_textbox_simple(size = 8, color = 'grey60',\n                                               margin = margin(b = 0.25, unit = 'cm')),\n        plot.background = element_rect(fill = '#fffef7', color = '#fffef7'),\n        plot.caption = element_text(size = 10, color = 'grey80'),\n        plot.margin = margin(1, 1, 1, 1, 'cm'),\n        panel.grid = element_line(color = 'grey70', linetype = 'dotted'),\n        axis.title = element_text(margin = margin(t = 0.2, r = 0.2, unit = 'cm'), color = 'grey50'),\n        axis.title.y = element_text(angle = 90),\n        axis.text = element_text(color = 'grey70', size = 9,\n                                 margin = margin(t = 0.1, r = 0.1, unit = 'cm')),\n        axis.line = element_line(color = 'grey50'),\n        axis.ticks = element_line(color = 'grey50', size = 0.6),\n        axis.ticks.length = unit(0.10, 'cm'))\n\n\n\n\n\n\nEn resumen, este análisis exhaustivo de los agregados macroeconómicos para España proporciona una visión integral de la evolución económica a lo largo de décadas. Desde el análisis del PIB hasta la relación entre inflación y desempleo a través de las Curvas de Phillips, cada sección revela tendencias y determinantes clave. Las comparaciones entre comunidades autónomas, como Madrid y Andalucía, resaltan disparidades regionales en la interacción entre indicadores económicos fundamentales.\nLa utilización de herramientas de programación en R y Quarto ha permitido una exploración profunda y visualmente impactante de los datos macroeconómicos. La observación de cambios significativos en la sensibilidad de la Curva de Phillips a lo largo del tiempo y las diferencias regionales subrayan la riqueza de la economía española en su complejidad y dinamismo.\nQuiero expresar mi agradecimiento por este trabajo, que ha sido fundamental en mi proceso de aprendizaje en la asignatura “Programación y manejo de datos en la era del Big Data”. Este análisis no solo me ha proporcionado valiosas habilidades en R, sino que también ha contribuido significativamente a mi preparación para enfrentar desafíos en mi futuro profesional.\n\n\nÁngel de la Fuente. (n.d.). Retrieved from https://fedea.net/angel-de-la-fuente/\nAMECO Database. (n.d.). Retrieved from https://economy-finance.ec.europa.eu/economic-research-and-databases/economic-databases/ameco-database_en\nBdeMores. (n.d.). Retrieved from https://www.sepg.pap.hacienda.gob.es/sitios/sepg/es-ES/Presupuestos/DocumentacionEstadisticas/Documentacion/paginas/basesdatosestudiosregionales.aspx"
  }
]